(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[530],{7375:function(e,t,s){Promise.resolve().then(s.bind(s,6053))},7648:function(e,t,s){"use strict";s.d(t,{default:function(){return o.a}});var n=s(2972),o=s.n(n)},9376:function(e,t,s){"use strict";var n=s(5475);s.o(n,"usePathname")&&s.d(t,{usePathname:function(){return n.usePathname}}),s.o(n,"useRouter")&&s.d(t,{useRouter:function(){return n.useRouter}}),s.o(n,"useSearchParams")&&s.d(t,{useSearchParams:function(){return n.useSearchParams}})},6053:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return O}});var n=s(7437),o=s(2265),r=s(9376);let a={s:{color:"text-white",bgColor:"bg-gray-600",border:"border-gray-700",symbol:"♠"},h:{color:"text-white",bgColor:"bg-red-600",border:"border-red-700",symbol:"♥"},c:{color:"text-white",bgColor:"bg-green-600",border:"border-green-700",symbol:"♣"},d:{color:"text-white",bgColor:"bg-blue-600",border:"border-blue-700",symbol:"♦"}},l={A:"A",K:"K",Q:"Q",J:"J",T:"10",9:"9",8:"8",7:"7",6:"6",5:"5",4:"4",3:"3",2:"2"},c=e=>{let{card:t,size:s="md",highlight:o=!1}=e;(!t||t.length<2||"??"===t)&&(t="As");let r=t[0].toUpperCase(),c=a[t[1].toLowerCase()]||{color:"text-white",bgColor:"bg-gray-500",border:"border-gray-600",symbol:"?"},i=l[r]||r,d={sm:{width:"w-[35px]",height:"h-[46px]",fontSize:"text-2xl",symbolSize:"text-5xl",padding:"p-1"},md:{width:"w-[46px]",height:"h-[64px]",fontSize:"text-3xl",symbolSize:"text-6xl",padding:"p-1.5"},lg:{width:"w-[70px]",height:"h-[96px]",fontSize:"text-5xl",symbolSize:"text-8xl",padding:"p-2"}}[s];return(0,n.jsxs)("div",{className:"\n        ".concat(d.width,"\n        ").concat(d.height,"\n        ").concat(c.bgColor,"\n        rounded-md\n        ").concat(o?"border-yellow-400 border-2":"border ".concat(c.border," border-2"),"\n        ").concat(o?"shadow-[0_0_10px_rgba(250,204,21,0.8)]":"shadow-md","\n        flex\n        items-center\n        justify-center\n        ").concat(d.padding,"\n        m-0\n        relative\n        overflow-hidden\n      "),children:[(0,n.jsx)("div",{className:"absolute inset-0 flex items-center justify-end opacity-20 z-0",children:(0,n.jsx)("span",{className:"".concat(c.color," ").concat(d.symbolSize," transform translate-x-1/2"),children:c.symbol})}),(0,n.jsx)("span",{className:"".concat(c.color," ").concat(d.fontSize," font-bold z-10"),children:i})]})},i=e=>{let{cards:t,size:s="md",highlightedCards:o=[]}=e,r=[...t];return 0===r.length?r=["As","Kd"]:1===r.length&&r.push("Kd"),r=r.slice(0,2),(0,n.jsx)("div",{className:"flex items-center gap-0 space-x-0.5",children:r.map((e,t)=>(0,n.jsx)(c,{card:e,size:s,highlight:o.includes(e)},t))})};var d=s(220);let u=e=>{let{currentSpot:t,selectedAction:s,isCorrect:r=!1,showResults:a=!1,onActionSelect:l,availableActions:c=["FOLD","CHECK","CALL","RAISE"],heroHand:u,potSize:g,onNextSpot:h,onRepeatSpot:m,positionRangeData:x,stackSize:b="100",cpuActionEnabled:p=!1,onActionCompleted:f,backButtonUrl:L}=e;(0,o.useEffect)(()=>{if("vs3bet"===t.actionType&&t.threeBetterPosition&&t.positions){console.log("\uD83C\uDFAF PokerTable: vs3ベットスタック確認",{actionType:t.actionType,threeBetterPosition:t.threeBetterPosition,threeBetSize:t.threeBetSize,stackDepth:t.stackDepth,currentStack:t.positions[t.threeBetterPosition].stack,expectedStack:"15BB"===t.stackDepth?0:30-(t.threeBetSize||0),spotId:t.id});let e="15BB"===t.stackDepth?0:30-(t.threeBetSize||0),s=t.positions[t.threeBetterPosition].stack;s!==e&&(console.log("\uD83D\uDEA8 PokerTable: スタック不一致を検出！強制的に再レンダリングします"),console.log("\uD83D\uDEA8 期待値: ".concat(e,", 現在値: ").concat(s)))}},[t]);let[y,B]=(0,o.useState)(!1);(0,o.useEffect)(()=>{let e=()=>{B(window.innerWidth<768)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);let[v,A]=(0,o.useState)(!1),[D,j]=(0,o.useState)(!0),[N,S]=(0,o.useState)(1),[C,F]=(0,o.useState)("translate(-100%, 0)"),[w,I]=(0,o.useState)([]),[O,k]=(0,o.useState)(-1),[T,_]=(0,o.useState)({}),[R,E]=(0,o.useState)(!1),[z,q]=(0,o.useState)([]);(0,o.useEffect)(()=>{if(s){j(!0),S(0),F("translate(-100%, 0)");let e=setTimeout(()=>{S(1),F("translate(-50%, 0)")},10),t=setTimeout(()=>{S(0),F("translate(-50%, 0) translateX(30px)")},1500),s=setTimeout(()=>{j(!1)},2e3);return()=>{clearTimeout(e),clearTimeout(t),clearTimeout(s)}}},[s]),(0,o.useEffect)(()=>{if(t&&t.heroPosition){let e=["UTG","UTG1","LJ","HJ","CO","BTN","SB","BB"],s=e.indexOf(t.heroPosition);if(-1!==s){let t=e.slice(s+1);q(t),p&&(I(t),_({}),E(!1),k(-1))}}},[t,p]);let H=t.heroPosition||"UTG1",M=x||(0,d.UU)(H),P=()=>{let e=void 0!==g?g:void 0!==t.potSize?t.potSize:void 0!==t.pot?t.pot:0;return"vs3bet"===t.actionType&&console.log("\uD83C\uDFAF PokerTable getPotSize vs3bet:",{actionType:t.actionType,stackSize:t.stackDepth,openRaiseSize:t.openRaiseSize,threeBetSize:t.threeBetSize,threeBetterPosition:t.threeBetterPosition,originalPotSize:e,_debug:t._debug}),"vs4bet"===t.actionType&&console.log("\uD83C\uDFAF PokerTable getPotSize vs4bet:",{actionType:t.actionType,originalPotSize:e}),e},U=()=>{if(!p||O>=w.length-1){E(!0),f&&f();return}let e=O+1;k(e);let t=w[e],s=W(t,J());_(e=>({...e,[t]:{action:s,result:G(s,t)}})),setTimeout(()=>{U()},1e3)},J=()=>{let e=["premium","strong","medium","weak","trash"],t=[10,20,30,25,15],s=Math.random()*t.reduce((e,t)=>e+t,0);for(let n=0;n<t.length;n++){if(s<t[n])return e[n];s-=t[n]}return e[Math.floor(Math.random()*e.length)]},K=e=>{if("20BB"===t.stackDepth&&"vs3bet"===t.actionType){let t;return t="SB"===e?5.5:"BB"===e?6:5,console.log("\uD83C\uDFAF getCpu3betSize: ".concat(e," = ").concat(t,"BB (20BB vs3bet)")),t}return["BTN","CO"].includes(e)?7:["SB","BB"].includes(e)?9:8},W=(e,t)=>{let s={premium:{FOLD:0,CALL:20,RAISE:80},strong:{FOLD:10,CALL:50,RAISE:40},medium:{FOLD:30,CALL:60,RAISE:10},weak:{FOLD:70,CALL:30,RAISE:0},trash:{FOLD:95,CALL:5,RAISE:0}},n={SB:{FOLD:-10,CALL:0,RAISE:10},BB:{FOLD:-20,CALL:10,RAISE:10},BTN:{FOLD:-5,CALL:-5,RAISE:10},CO:{FOLD:0,CALL:0,RAISE:0}};n[e]||(n[e]={FOLD:5,CALL:0,RAISE:-5});let o={FOLD:Math.max(0,Math.min(100,s[t].FOLD+(n[e].FOLD||0))),CALL:Math.max(0,Math.min(100,s[t].CALL+(n[e].CALL||0))),RAISE:Math.max(0,Math.min(100,s[t].RAISE+(n[e].RAISE||0)))},r=o.FOLD+o.CALL+o.RAISE;r>0&&(o.FOLD=o.FOLD/r*100,o.CALL=o.CALL/r*100,o.RAISE=o.RAISE/r*100);let a=100*Math.random();if(a<o.FOLD)return"FOLD";if(a<o.FOLD+o.CALL)return"CALL";{let t=K(e);return"RAISE ".concat(t)}},G=(e,t)=>{if("FOLD"===e)return"フォールド";if("CALL"===e)return"コール";if(e.startsWith("RAISE")){let t=e.match(/RAISE (\d+(\.\d+)?)/),s=t?t[1]:"?";return"".concat(s,"BBにレイズ")}return"ALL IN"===e?"オールイン":""};(0,o.useEffect)(()=>{p&&s&&!R&&setTimeout(()=>{U()},1e3)},[s,p]);let Q=e=>!!p&&w.indexOf(e)===O,X=e=>{if(!p)return!1;let t=w.indexOf(e);return t>O&&t<w.length},V=()=>{if(!s)return{element:(0,n.jsx)(n.Fragment,{}),evaluationLevel:"suboptimal"};let e="optimal",o=s.split(" ")[0],a=0;if(t.frequencies&&Object.keys(t.frequencies).length>0){let n=t.frequencies[s]||0;a=n;let o=0,r="";Object.entries(t.frequencies).forEach(e=>{let[t,s]=e;s>o&&(o=s,r=t)}),e=s===r?"perfect":n>=30?"optimal":n>=10?"acceptable":"suboptimal"}else{if(t.correctAction&&t.frequencies){let n=t.correctAction.split(" ")[0],o=s.split(" ")[0],r=t.frequencies[n]||0,l=t.frequencies[o]||0;o===n?(e="perfect",a=r):l>0?(e=l>=50?"optimal":"acceptable",a=l):(e="suboptimal",a=0)}else if(t.correctAction){let n=t.correctAction.split(" ")[0],o=s.split(" ")[0];e="MIN"===n&&"RAISE"===o?"perfect":"RAISE"===n&&"RAISE"===o?"perfect":o===n?"perfect":"RAISE"===n&&"CALL"===o||"CALL"===n&&"FOLD"===o?"acceptable":"suboptimal"}0===a&&(a="perfect"===e?90:"optimal"===e?60:"acceptable"===e?30:5)}let l=" ".concat(Math.round(a),"%"),c=(()=>{switch(o){case"FOLD":return"FOLD";case"CHECK":return"CHECK";case"CALL":return"CALL";case"RAISE":return"RAISE";case"ALL":return"ALL IN";case"MIN":return"MIN";default:return o}})();return(r&&("suboptimal"===e||"acceptable"===e)?e="optimal":r||"perfect"!==e&&"optimal"!==e&&"acceptable"!==e||(e="suboptimal"),"perfect"===e||"optimal"===e||"acceptable"===e)?{element:(0,n.jsxs)("div",{className:"bg-green-500 text-white px-3 py-2 rounded-sm text-sm whitespace-nowrap flex items-center shadow-lg border border-green-400",children:[c,l]}),evaluationLevel:e}:{element:(0,n.jsxs)("div",{className:"bg-red-500 text-white px-3 py-2 rounded-sm text-sm whitespace-nowrap flex items-center shadow-lg border border-red-400",children:[c,l]}),evaluationLevel:e}},Y=e=>{let s=t.heroPosition||"";if("vs3bet"===t.actionType){let n=t.threeBetterPosition;return e!==s&&e!==n}if("vs4bet"===t.actionType){let n=t.openRaiserPosition;return e!==s&&e!==n}if(e===t.openRaiserPosition)return!1;let n=["UTG","UTG1","LJ","HJ","CO","BTN","SB","BB"],o=n.indexOf(s),r=n.indexOf(e);return -1!==o&&-1!==r&&r<o},Z=e=>{let n=parseInt(b);if("vs3bet"===t.actionType&&e===t.threeBetterPosition){let s;if(console.log("\uD83C\uDFAF getPositionStack: 3ベッター処理",{position:e,actionType:t.actionType,threeBetterPosition:t.threeBetterPosition,threeBetSize:t.threeBetSize,stackDepth:t.stackDepth}),"20BB"===t.stackDepth&&"vs3bet"===t.actionType){let t=window.currentThreeBetType;console.log("\uD83C\uDFAF PokerTable 3ベットタイプ確認: ".concat(t,", position: ").concat(e)),"allin"===t?(s=20,console.log("\uD83C\uDFAF PokerTable オールイン: effectiveThreeBetSize = 20")):(s="SB"===e?5.5:"BB"===e?6:5,console.log("\uD83C\uDFAF PokerTable レイズ: effectiveThreeBetSize = ".concat(s," (").concat(e,")")))}else s=t.threeBetSize||0;if(console.log("\uD83C\uDFAF 有効3ベットサイズ: ".concat(s," (").concat(e,")")),"15BB"===t.stackDepth)return console.log("\uD83C\uDFAF 15BB vs3ベット: ".concat(e,"のスタックを0に設定")),"0";if("20BB"===t.stackDepth){let t;return"SB"===e?(t=19.5-s,console.log("\uD83C\uDFAF 20BB vs3ベット SB: 20 - 0.5 - ".concat(s," = ").concat(t))):"BB"===e?(t=20-s,console.log("\uD83C\uDFAF 20BB vs3ベット BB: 20 - ".concat(s," = ").concat(t))):(t=20-s,console.log("\uD83C\uDFAF 20BB vs3ベット その他: 20 - ".concat(s," = ").concat(t))),t<=0?"0":"".concat(t.toFixed(1))}if("30BB"===t.stackDepth){let t;return"SB"===e?(t=29.5-s,console.log("\uD83C\uDFAF 30BB vs3ベット SB: 29.5 - ".concat(s," = ").concat(t))):"BB"===e?(t=29-s,console.log("\uD83C\uDFAF 30BB vs3ベット BB: 29 - ".concat(s," = ").concat(t))):(t=30-s,console.log("\uD83C\uDFAF 30BB vs3ベット その他: 30 - ".concat(s," = ").concat(t))),t<=0?"0":"".concat(t.toFixed(1))}if("40BB"===t.stackDepth){let t;return"SB"===e?(t=39.5-s,console.log("\uD83C\uDFAF 40BB vs3ベット SB: 39.5 - ".concat(s," = ").concat(t))):"BB"===e?(t=39-s,console.log("\uD83C\uDFAF 40BB vs3ベット BB: 39 - ".concat(s," = ").concat(t))):(t=40-s,console.log("\uD83C\uDFAF 40BB vs3ベット その他: 40 - ".concat(s," = ").concat(t))),t<=0?"0":"".concat(t.toFixed(1))}}if(e===t.heroPosition&&s&&s.startsWith("RAISE")){let e=s.match(/RAISE (\d+(\.\d+)?)/);if(e&&e[1]){let t=n-parseFloat(e[1]);return 0===t?"0":"".concat(t.toFixed(1))}}if(e===t.openRaiserPosition&&t.openRaiseSize){let e=n-t.openRaiseSize;return 0===e?"0":"".concat(e.toFixed(1))}if("SB"===e&&e!==t.threeBetterPosition){let e=n-.5;return 0===e?"0":"".concat(e)}if("BB"===e&&e!==t.threeBetterPosition){let e=n-1;return 0===e?"0":"".concat(e)}return"".concat(n)},$=e=>e?"string"==typeof e?4===e.length?[e.slice(0,2),e.slice(2,4)]:[e,"?"]:e:["?","?"],ee=()=>{if(!t.tournamentStage)return"";switch(t.tournamentStage){case"bubble":return"border-blue-500/50 bg-blue-900/20";case"final_table":return"border-purple-500/50 bg-purple-900/20";default:return""}},et=(()=>{let e={},s=t.heroPosition||"";return"BTN"===s?(e.BTN={label:"BTN",x:50,y:55,isHero:!0},e.SB={label:"SB",x:25,y:55,isHero:!1},e.BB={label:"BB",x:15,y:35,isHero:!1},e.UTG={label:"UTG",x:25,y:15,isHero:!1},e.UTG1={label:"UTG+1",x:50,y:15,isHero:!1},e.LJ={label:"LJ",x:75,y:15,isHero:!1},e.HJ={label:"HJ",x:85,y:35,isHero:!1},e.CO={label:"CO",x:75,y:55,isHero:!1}):"SB"===s?(e.SB={label:"SB",x:50,y:55,isHero:!0},e.BB={label:"BB",x:25,y:55,isHero:!1},e.UTG={label:"UTG",x:15,y:35,isHero:!1},e.UTG1={label:"UTG+1",x:25,y:15,isHero:!1},e.LJ={label:"LJ",x:50,y:15,isHero:!1},e.HJ={label:"HJ",x:75,y:15,isHero:!1},e.CO={label:"CO",x:85,y:35,isHero:!1},e.BTN={label:"BTN",x:75,y:55,isHero:!1}):"BB"===s?(e.BB={label:"BB",x:50,y:55,isHero:!0},e.UTG={label:"UTG",x:25,y:55,isHero:!1},e.UTG1={label:"UTG+1",x:15,y:35,isHero:!1},e.LJ={label:"LJ",x:25,y:15,isHero:!1},e.HJ={label:"HJ",x:50,y:15,isHero:!1},e.CO={label:"CO",x:75,y:15,isHero:!1},e.BTN={label:"BTN",x:85,y:35,isHero:!1},e.SB={label:"SB",x:75,y:55,isHero:!1}):"UTG"===s?(e.UTG={label:"UTG",x:50,y:55,isHero:!0},e.UTG1={label:"UTG+1",x:25,y:55,isHero:!1},e.LJ={label:"LJ",x:15,y:35,isHero:!1},e.HJ={label:"HJ",x:25,y:15,isHero:!1},e.CO={label:"CO",x:50,y:15,isHero:!1},e.BTN={label:"BTN",x:75,y:15,isHero:!1},e.SB={label:"SB",x:85,y:35,isHero:!1},e.BB={label:"BB",x:75,y:55,isHero:!1}):"UTG1"===s?(e.UTG1={label:"UTG+1",x:50,y:55,isHero:!0},e.LJ={label:"LJ",x:25,y:55,isHero:!1},e.HJ={label:"HJ",x:15,y:35,isHero:!1},e.CO={label:"CO",x:25,y:15,isHero:!1},e.BTN={label:"BTN",x:50,y:15,isHero:!1},e.SB={label:"SB",x:75,y:15,isHero:!1},e.BB={label:"BB",x:85,y:35,isHero:!1},e.UTG={label:"UTG",x:75,y:55,isHero:!1}):"LJ"===s?(e.LJ={label:"LJ",x:50,y:55,isHero:!0},e.HJ={label:"HJ",x:25,y:55,isHero:!1},e.CO={label:"CO",x:15,y:35,isHero:!1},e.BTN={label:"BTN",x:25,y:15,isHero:!1},e.SB={label:"SB",x:50,y:15,isHero:!1},e.BB={label:"BB",x:75,y:15,isHero:!1},e.UTG={label:"UTG",x:85,y:35,isHero:!1},e.UTG1={label:"UTG+1",x:75,y:55,isHero:!1}):"HJ"===s?(e.HJ={label:"HJ",x:50,y:55,isHero:!0},e.CO={label:"CO",x:25,y:55,isHero:!1},e.BTN={label:"BTN",x:15,y:35,isHero:!1},e.SB={label:"SB",x:25,y:15,isHero:!1},e.BB={label:"BB",x:50,y:15,isHero:!1},e.UTG={label:"UTG",x:75,y:15,isHero:!1},e.UTG1={label:"UTG+1",x:85,y:35,isHero:!1},e.LJ={label:"LJ",x:75,y:55,isHero:!1}):"CO"===s?(e.CO={label:"CO",x:50,y:55,isHero:!0},e.BTN={label:"BTN",x:25,y:55,isHero:!1},e.SB={label:"SB",x:15,y:35,isHero:!1},e.BB={label:"BB",x:25,y:15,isHero:!1},e.UTG={label:"UTG",x:50,y:15,isHero:!1},e.UTG1={label:"UTG+1",x:75,y:15,isHero:!1},e.LJ={label:"LJ",x:85,y:35,isHero:!1},e.HJ={label:"HJ",x:75,y:55,isHero:!1}):(e.BTN={label:"BTN",x:50,y:68,isHero:"BTN"===s},e.SB={label:"SB",x:25,y:55,isHero:"SB"===s},e.BB={label:"BB",x:15,y:35,isHero:"BB"===s},e.UTG={label:"UTG",x:25,y:15,isHero:"UTG"===s},e.UTG1={label:"UTG+1",x:50,y:15,isHero:"UTG1"===s},e.LJ={label:"LJ",x:75,y:15,isHero:"LJ"===s},e.HJ={label:"HJ",x:85,y:35,isHero:"HJ"===s},e.CO={label:"CO",x:75,y:55,isHero:"CO"===s}),e})(),es=$(t.heroHand);P(),s&&s.split(" ")[0],t.correctAction&&t.correctAction.split(" ")[0];let en=(t.description||"").match(/CO\s+vs\s+UTG1/i);en&&en[0];let eo=()=>{let e=parseInt(b),s=[...c];return"vs3bet"===t.actionType&&"allin"===t.threeBetType?s=s.filter(e=>"FOLD"===e||"CALL"===e):((e<=15||t.frequencies&&t.frequencies["ALL IN"]>0||"bubble"===t.tournamentStage&&"high"===t.icmPressure||"push_fold"===t.actionType)&&!s.includes("ALL IN")&&s.push("ALL IN"),s)};return y?(0,n.jsx)("div",{className:"w-full h-full",children:(0,n.jsx)("div",{className:"w-full h-full relative ".concat(ee()),children:(()=>{Object.entries(et).find(e=>{let[t,s]=e;return s.isHero});let e=$(t.heroHand),o={},r=Object.entries(et).find(e=>{let[t,s]=e;return s.isHero});if(r){o[r[0]]={x:50,y:78};let e=["SB","BB","UTG","UTG1","LJ","HJ","CO","BTN"],t=r[0],s=e.indexOf(t),n=[];for(let t=1;t<e.length;t++){let o=(s+t)%e.length,r=e[o];et[r]&&!et[r].isHero&&n.push(r)}let a=[{x:50,y:-30},{x:5,y:-20},{x:95,y:-20},{x:-2,y:24},{x:102,y:24},{x:5,y:67},{x:95,y:67}],l=[5,3,1,0,2,4,6];for(let e=0;e<n.length&&e<l.length;e++){let t=n[e],s=l[e];s<a.length&&(o[t]=a[s])}}return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"absolute w-full flex flex-col items-center text-white z-40",style:{top:"36%"},children:(0,n.jsxs)("div",{className:"text-base font-bold",children:[P()," BB"]})}),(0,n.jsx)("div",{className:"absolute inset-0 flex items-center justify-center mt-8",children:(0,n.jsxs)("div",{className:"relative w-72 h-72",children:[(0,n.jsxs)("div",{className:"absolute inset-0 z-10",style:{pointerEvents:"none"},children:[[["UTG","UTG+1"],["UTG+1","LJ"],["LJ","HJ"],["HJ","CO"],["CO","BTN"],["BTN","SB"],["SB","BB"],["BB","UTG"]].map((e,t)=>{let[s,r]=e,a=o[s],l=o[r];if(!a||!l)return null;let c=l.x-a.x,i=l.y-a.y;return(0,n.jsx)("div",{className:"absolute bg-gray-400",style:{left:"".concat(a.x,"%"),top:"".concat(a.y,"%"),width:"".concat(Math.sqrt(c*c+i*i),"%"),height:"1.5px",transformOrigin:"0 50%",transform:"rotate(".concat(180*Math.atan2(i,c)/Math.PI,"deg)")}},"line-".concat(s,"-").concat(r,"-").concat(t))}),(()=>{let e=Object.keys(o).find(e=>e.includes("UTG")&&"UTG"!==e)||"UTG+1",t=[];if(o[e]&&o.UTG){let s=o[e],r=o.UTG,a=r.x-s.x,l=r.y-s.y;t.push((0,n.jsx)("div",{className:"absolute bg-gray-400",style:{left:"".concat(s.x,"%"),top:"".concat(s.y,"%"),width:"".concat(Math.sqrt(a*a+l*l),"%"),height:"1.5px",transformOrigin:"0 50%",transform:"rotate(".concat(180*Math.atan2(l,a)/Math.PI,"deg)")}},"line1"))}if(o[e]&&o.LJ){let s=o[e],r=o.LJ,a=r.x-s.x,l=r.y-s.y;t.push((0,n.jsx)("div",{className:"absolute bg-gray-400",style:{left:"".concat(s.x,"%"),top:"".concat(s.y,"%"),width:"".concat(Math.sqrt(a*a+l*l),"%"),height:"1.5px",transformOrigin:"0 50%",transform:"rotate(".concat(180*Math.atan2(l,a)/Math.PI,"deg)")}},"line2"))}return t})()]}),Object.entries(et).map(r=>{let[a,c]=r,d=o[a];if(!d)return null;let u=t.openRaiserPosition===a,g=c.isHero;return(0,n.jsxs)("div",{className:"absolute z-20",style:{left:"".concat(d.x,"%"),top:"".concat(d.y,"%"),transform:"translate(-50%, -50%)"},children:[(0,n.jsxs)("div",{className:"w-14 h-14 flex flex-col items-center justify-center rounded-full border-2\n                    ".concat(g?"bg-green-700 border-green-400":Y(a)&&a!==t.openRaiserPosition?"bg-gray-950 border-gray-900":u?"bg-orange-700 border-orange-400":"bg-gray-700 border-gray-500"),children:[(0,n.jsx)("div",{className:"font-bold text-xs ".concat(g?"text-white":u?"text-white":Y(a)?"text-gray-500":"text-gray-300"),children:c.label}),(0,n.jsx)("div",{className:"font-bold text-[10px] ".concat(g?"text-white":u?"text-white":Y(a)?"text-gray-500":"text-gray-300"),children:Z(a)})]}),g&&(0,n.jsx)("div",{className:"absolute top-16 left-1/2 transform -translate-x-1/2 z-30",children:(0,n.jsx)("div",{className:"flex gap-1 scale-110",children:(0,n.jsx)(i,{cards:e,size:"sm"})})}),g&&!s&&(0,n.jsx)("div",{className:"absolute top-32 left-1/2 transform -translate-x-1/2 z-30",children:(0,n.jsx)("div",{className:"flex space-x-2 justify-center",children:eo().map(e=>{let{label:t,colorClass:s}="FOLD"===e?{label:"FOLD",colorClass:"bg-blue-600 hover:bg-blue-700"}:"CHECK"===e?{label:"CHECK",colorClass:"bg-gray-600 hover:bg-gray-700"}:"CALL"===e?{label:"CALL",colorClass:"bg-green-600 hover:bg-green-700"}:"RAISE"===e?{label:"RAISE",colorClass:"bg-red-600 hover:bg-red-700"}:"ALL IN"===e?{label:"ALLIN",colorClass:"bg-purple-600 hover:bg-purple-700"}:{label:e,colorClass:"bg-gray-600 hover:bg-gray-700"};return(0,n.jsx)("button",{className:"px-5 py-3 rounded-lg text-white font-semibold whitespace-nowrap min-h-12 min-w-20 ".concat(s," transition-colors shadow-lg"),onClick:()=>l&&l(e),disabled:p&&!R,children:t},e)})})}),g&&s&&(0,n.jsx)("div",{className:"absolute top-32 left-1/2 transform -translate-x-1/2 z-30",children:(0,n.jsxs)("div",{className:"flex space-x-3 justify-center",children:[m&&(0,n.jsx)("button",{className:"px-4 py-3 rounded-lg text-white text-sm font-semibold bg-gray-500 hover:bg-gray-600 transition-colors whitespace-nowrap min-w-20 shadow-lg",onClick:m,children:"再試行"}),h&&(0,n.jsx)("button",{className:"px-4 py-3 rounded-lg text-white text-sm font-semibold bg-green-500 hover:bg-green-600 transition-colors whitespace-nowrap min-w-20 shadow-lg",onClick:h,children:"次へ"})]})})]},a)}),(()=>{var e,s;let r=[],a=o.SB,l=o.BB,c=t.openRaiserPosition,i=c?o[c]:null,d=(e,t)=>{let s=50-e.x,n=35-e.y,o=Math.sqrt(s*s+n*n),r=22,a=0,l=0;return"SB"===t?e.x>80?(r=16,a=-2,l=3):e.x<20?(r=18,a=4,l=2):e.y>60?(r=14,a=1,l=-1):e.x>50&&e.y<40?(r=18,a=-1,l=4):(r=20,a=0,l=3):"BB"===t?e.x>80?(r=18,a=-3,l=4):e.x<20?(r=16,a=3,l=3):e.y>60?(r=12,a=0,l=0):e.x<50&&e.y<40?(r=17,a=2,l=5):(r=22,a=-1,l=4):e.x>80?(r=18,a=-1,l=2):e.x<20?(r=18,a=1,l=2):e.y>60?(r=12,a=0,l=-2):e.y<20?(r=20,a=0,l=3):(r=19,a=0,l=1),{x:e.x+s/o*r+a,y:e.y+n/o*r+l}},u="BB"===t.heroPosition&&"SB"===c||"SB"===t.threeBetterPosition||"vs3bet"===t.actionType&&"BB"===t.threeBetterPosition;if(console.log("\uD83D\uDD0D モバイル版SBチップ表示条件:",{sbPos:!!a,shouldHideSBChipMobile:u,heroPosition:t.heroPosition,openRaiserPos:c,threeBetterPosition:t.threeBetterPosition,actionType:t.actionType}),a&&!u){let e=d(a,"SB");r.push((0,n.jsx)("div",{className:"absolute z-30",style:{left:"".concat(e.x,"%"),top:"".concat(e.y,"%"),transform:"translate(-50%, -50%)"},children:(0,n.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,n.jsx)("div",{className:"bg-blue-400 w-2.5 h-2.5 rounded-full flex items-center justify-center shadow-md border border-blue-300"}),(0,n.jsx)("span",{className:"text-white font-medium text-xs",children:"0.5"})]})},"sb-blind-chip-mobile"))}if(l&&"BB"!==t.threeBetterPosition){let e=d(l,"BB");r.push((0,n.jsx)("div",{className:"absolute z-30",style:{left:"".concat(e.x,"%"),top:"".concat(e.y,"%"),transform:"translate(-50%, -50%)"},children:(0,n.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,n.jsx)("div",{className:"bg-blue-600 w-2.5 h-2.5 rounded-full flex items-center justify-center shadow-md border border-blue-500"}),(0,n.jsx)("span",{className:"text-white font-medium text-xs",children:"1"})]})},"bb-blind-chip-mobile"))}if(i&&(null==t?void 0:t.openRaiseSize)){let e=d(i,c||"OPEN");r.push((0,n.jsx)("div",{className:"absolute z-30",style:{left:"".concat(e.x,"%"),top:"".concat(e.y,"%"),transform:"translate(-50%, -50%)"},children:(0,n.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,n.jsx)("div",{className:"bg-red-600 w-2.5 h-2.5 rounded-full flex items-center justify-center shadow-md border border-red-500"}),(0,n.jsx)("span",{className:"text-white font-medium text-xs",children:t.openRaiseSize})]})},"open-raiser-chips-mobile"))}let g="vs3bet"===t.actionType?t.threeBetterPosition:"vs4bet"===t.actionType?t.heroPosition:null,h="vs4bet"===t.actionType?t.openRaiserPosition:null,m=g?null===(e=Object.entries(o).find(e=>{let[t]=e;return t===g}))||void 0===e?void 0:e[1]:null,x=h?null===(s=Object.entries(o).find(e=>{let[t]=e;return t===h}))||void 0===s?void 0:s[1]:null;if(console.log("3ベット・4ベットデバッグ:",{actionType:t.actionType,openRaiserPosition:t.openRaiserPosition,threeBetterPosition:t.threeBetterPosition,threeBetSize:t.threeBetSize,openRaiseSize:t.openRaiseSize,threeBetterPosMobile:g,fourBetterPosMobile:h,threeBetterInfoMobile:m,fourBetterInfoMobile:x}),console.log("\uD83D\uDD0D 3ベッターチップ表示条件チェック: threeBetterInfoMobile=".concat(!!m,", threeBetSize=").concat(null==t?void 0:t.threeBetSize,", threeBetterPosMobile=").concat(g,", actionType=").concat(t.actionType)),m&&(null==t?void 0:t.threeBetSize)&&g&&("vs3bet"===t.actionType||"vs4bet"===t.actionType)){let e=d(m,g);r.push((0,n.jsx)("div",{className:"absolute z-30",style:{left:"".concat(e.x,"%"),top:"".concat(e.y,"%"),transform:"translate(-50%, -50%)"},children:(0,n.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,n.jsx)("div",{className:"bg-orange-600 w-2.5 h-2.5 rounded-full flex items-center justify-center shadow-md border border-orange-500"}),(0,n.jsx)("span",{className:"text-white font-medium text-xs",children:t.threeBetSize})]})},"three-better-chip-mobile"))}if(x&&(null==t?void 0:t.openRaiseSize)&&h&&"vs4bet"===t.actionType){let e=d(x,h);r.push((0,n.jsx)("div",{className:"absolute z-30",style:{left:"".concat(e.x,"%"),top:"".concat(e.y,"%"),transform:"translate(-50%, -50%)"},children:(0,n.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,n.jsx)("div",{className:"bg-purple-600 w-2.5 h-2.5 rounded-full flex items-center justify-center shadow-md border border-purple-500"}),(0,n.jsx)("span",{className:"text-white font-medium text-xs",children:t.openRaiseSize})]})},"four-better-chip-mobile"))}return r})()]})}),s&&a&&D&&(()=>{let e=Object.entries(et).find(e=>{let[t,s]=e;return s.isHero}),t=e?o[e[0]]:{x:50,y:68};return(0,n.jsx)("div",{className:"absolute z-[999]",style:{left:"".concat(t.x+15,"%"),top:"".concat(t.y-20,"%"),transform:"translate(-50%, -50%)"},children:(()=>{let{element:e}=V();return(0,n.jsx)("div",{style:{transform:C,opacity:N,transition:"transform 0.1s ease-out, opacity 0.1s ease-out"},children:e})})()})})(),v&&(0,n.jsx)(d.Nn,{rangeData:M,title:"".concat(t.heroPosition||"BTN","ポジションからのオープンレイズレンジ (100BB)"),onClose:()=>A(!1)})]})})()})}):(0,n.jsxs)("div",{className:"w-full h-full",children:[(0,n.jsxs)("div",{className:"w-full h-full relative bg-[#0a0a0a] rounded-lg overflow-hidden ".concat(ee()," ").concat(t.tournamentStage?"border":""),children:[(0,n.jsx)("div",{className:"absolute top-0 left-0 w-[120px] h-[70px] bg-[#0a0a0a] z-30"}),(0,n.jsx)("svg",{className:"absolute inset-0 w-full h-full z-20",style:{pointerEvents:"none"},children:(()=>{let e=[];return[{from:"UTG",to:"UTG1"},{from:"UTG1",to:"LJ"},{from:"LJ",to:"HJ"},{from:"HJ",to:"CO"},{from:"BTN",to:"SB"},{from:"SB",to:"BB"},{from:"BB",to:"UTG"},{from:"CO",to:"BTN"}].forEach((t,s)=>{let{from:o,to:r}=t;if(et[o]&&et[r]){let t=et[o],a=et[r],l=t.x,c=t.y,i=a.x,d=a.y;e.push((0,n.jsx)("line",{x1:"".concat(l,"%"),y1:"".concat(c,"%"),x2:"".concat(i,"%"),y2:"".concat(d,"%"),stroke:"rgba(200, 200, 200, 0.7)",strokeWidth:"1.2"},"pc-".concat(o,"-").concat(r,"-").concat(s)))}}),e})()}),(0,n.jsxs)("div",{className:"absolute w-full top-[180px] flex flex-col items-center text-white z-40",children:[(0,n.jsxs)("div",{className:"text-base font-medium px-2.5 py-0.5 bg-black/50 rounded-lg",children:[P()," BB"]}),t.icmPressure&&(0,n.jsxs)("div",{className:"absolute top-0 right-4 px-3 py-1 rounded-full text-sm font-medium\n              ".concat("low"===t.icmPressure?"bg-green-700/70":"medium"===t.icmPressure?"bg-yellow-700/70":"high"===t.icmPressure?"bg-orange-700/70":"bg-red-700/70"),children:["ICM: ","low"===t.icmPressure?"低":"medium"===t.icmPressure?"中":"high"===t.icmPressure?"高":"極高"]})]}),(()=>{var e;let t=null===(e=Object.entries(et).find(e=>{let[t]=e;return"BTN"===t}))||void 0===e?void 0:e[1];if(t){let e=t.x-5,s=t.y-4.5;return(0,n.jsx)("div",{className:"absolute z-50",style:{left:"".concat(e,"%"),top:"".concat(s,"%")},children:(0,n.jsx)("div",{className:"w-4 h-4 bg-white rounded-full flex items-center justify-center shadow-lg border border-gray-300",children:(0,n.jsx)("span",{className:"text-black font-bold text-[9px]",children:"D"})})})}return null})(),Object.entries(et).map(e=>{var s,o,r,a,l,c,d,u,g;let[h,m]=e,x=t.openRaiserPosition===h,b=t.threeBetterPosition===h;return(0,n.jsxs)("div",{className:"absolute ".concat(Q(h)?"z-50 animate-pulse":X(h)?"z-40":"z-30"),style:{left:"".concat(m.x,"%"),top:"".concat(m.y,"%"),transform:"translate(-50%, -50%)"},children:[(0,n.jsxs)("div",{className:"w-[4rem] h-[4rem] flex flex-col items-center justify-center rounded-full \n              ".concat(m.isHero?"bg-green-800 border-2 border-green-500 shadow-md shadow-green-500/50":x?"bg-red-700 border-2 border-red-500 shadow-md":b?"bg-orange-700 border-2 border-orange-500 shadow-md shadow-orange-500/50":Y(h)?"bg-[#1a1a1a] border border-[#252525] shadow-md":Q(h)?"bg-blue-800 border-2 border-blue-500 shadow-md shadow-blue-500/50 scale-110":(null===(s=T[h])||void 0===s?void 0:s.action)==="FOLD"?"bg-gray-800 border border-gray-700 shadow-md opacity-60":"bg-[#1a1a1a] border border-[#252525] shadow-md"),children:[(0,n.jsx)("div",{className:"text-[14px] font-bold ".concat(m.isHero?"text-white":x?"text-white":b?"text-white":Y(h)?"text-gray-600":Q(h)||X(h)?"text-white":(null===(o=T[h])||void 0===o?void 0:o.action)==="FOLD"?"text-gray-500":"text-white"),children:m.label}),(0,n.jsx)("div",{className:"text-[14px] font-bold mt-0.5 ".concat(m.isHero?"text-white":x?"text-white":b?"text-white":Y(h)?"text-gray-600":Q(h)||X(h)?"text-white":(null===(r=T[h])||void 0===r?void 0:r.action)==="FOLD"?"text-gray-500":"text-white"),children:Z(h)})]}),m.isHero&&(0,n.jsx)("div",{className:"absolute top-20 left-1/2 transform -translate-x-1/2 flex gap-0 space-x-0.5 z-40",children:(0,n.jsx)(i,{cards:es,size:"md"})}),(null===(a=T[h])||void 0===a?void 0:a.result)&&!x&&(0,n.jsx)("div",{className:"absolute -top-6 left-1/2 transform -translate-x-1/2 z-40",children:(0,n.jsx)("div",{className:"text-xs px-2 py-1 rounded whitespace-nowrap font-semibold shadow-lg border border-opacity-50\n                    ".concat((null===(l=T[h])||void 0===l?void 0:l.action)==="FOLD"?"bg-blue-600 text-white border-blue-400":(null===(c=T[h])||void 0===c?void 0:c.action)==="CALL"?"bg-green-600 text-white border-green-400":(null===(u=T[h])||void 0===u?void 0:null===(d=u.action)||void 0===d?void 0:d.startsWith("RAISE"))?"bg-red-600 text-white border-red-400":"bg-gray-600 text-white border-gray-400"),children:null===(g=T[h])||void 0===g?void 0:g.result})})]},h)}),(()=>{let e=Object.entries(et).find(e=>{let[t,s]=e;return s.isHero});if(e&&s&&a&&D){let[t,s]=e,{element:o,evaluationLevel:r}=V();return(0,n.jsx)("div",{className:"absolute z-[9999]",style:{left:"".concat(s.x+7.5,"%"),top:"".concat(s.y-10,"%"),transform:"translate(-50%, -50%) ".concat(C),opacity:N,transition:"transform 0.1s ease-out, opacity 0.1s ease-out"},children:o},"hero-action-result")}return null})(),(()=>{var e,s,o,r,a;let l=null===(e=Object.entries(et).find(e=>{let[t]=e;return"SB"===t}))||void 0===e?void 0:e[1],c=null===(s=Object.entries(et).find(e=>{let[t]=e;return"BB"===t}))||void 0===s?void 0:s[1];null===(o=Object.entries(et).find(e=>{let[t,s]=e;return s.isHero}))||void 0===o||o[1];let i=t.openRaiserPosition,d=i?null===(r=Object.entries(et).find(e=>{let[t]=e;return t===i}))||void 0===r?void 0:r[1]:null,u=t.threeBetterPosition,g=[];console.log("\uD83C\uDFAF チップ表示条件チェック:",{heroPosition:t.heroPosition,openRaiserPos:i,threeBetterPos:u,sbExists:!!l,sbIsHero:null==l?void 0:l.isHero,stackSize:b,openRaiseSize:null==t?void 0:t.openRaiseSize,isBBHero:"BB"===t.heroPosition,isSBOpener:"SB"===i,isSBThreeBetter:"SB"===u});let h="BB"===t.heroPosition&&"SB"===i||"SB"===u;console.log("\uD83D\uDD0D Should hide 0.5BB chip?",h,{isBBHero:"BB"===t.heroPosition,isSBOpener:"SB"===i,isSBThreeBetter:"SB"===u,openRaiseSize:null==t?void 0:t.openRaiseSize}),h&&console.log("\uD83D\uDEAB SB chip hidden - reason:","SB"===u?"SB is 3-better":"BB hero + SB opener");let m="BB"===t.heroPosition&&"SB"===i;if(console.log("\uD83D\uDD0D Should hide 0.5BB chip?",m,{isBBHero:"BB"===t.heroPosition,isSBOpener:"SB"===i,openRaiseSize:null==t?void 0:t.openRaiseSize}),m)console.log("\uD83D\uDEAB BB hero + SB opener: 0.5BB chip hidden");else if(l&&!l.isHero&&!("BB"===t.heroPosition&&"SB"===i)&&"SB"!==t.threeBetterPosition){let e=50-l.x,t=35-l.y,s=Math.sqrt(e*e+t*t),o=l.x+e/s*10,r=l.y+t/s*10;g.push((0,n.jsx)("div",{className:"absolute z-10",style:{left:"".concat(o,"%"),top:"".concat(r,"%"),transform:"translate(-50%, -50%)"},children:(0,n.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,n.jsx)("div",{className:"bg-blue-400 w-3.5 h-3.5 rounded-full flex items-center justify-center shadow-md border-2 border-blue-300"}),(0,n.jsx)("span",{className:"text-white font-medium text-[13px]",children:"0.5"})]})},"sb-blind-chip"))}if(c&&"BB"!==t.threeBetterPosition){let e=50-c.x,t=35-c.y,s=Math.sqrt(e*e+t*t),o=c.x+e/s*10,r=c.y+t/s*10;g.push((0,n.jsx)("div",{className:"absolute z-10",style:{left:"".concat(o,"%"),top:"".concat(r,"%"),transform:"translate(-50%, -50%)"},children:(0,n.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,n.jsx)("div",{className:"bg-blue-600 w-3.5 h-3.5 rounded-full flex items-center justify-center shadow-md border-2 border-blue-500"}),(0,n.jsx)("span",{className:"text-white font-medium text-[13px]",children:"1"})]})},"bb-blind-chip-mobile"))}if("SB"===i&&"15"===b&&(null==t?void 0:t.openRaiseSize)===1||"BB"===t.heroPosition&&"SB"===i){let e=50-l.x,t=35-l.y,s=Math.sqrt(e*e+t*t),o=l.x+e/s*10,r=l.y+t/s*10;g.push((0,n.jsx)("div",{className:"absolute z-20",style:{left:"".concat(o,"%"),top:"".concat(r,"%"),transform:"translate(-50%, -50%)"},children:(0,n.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,n.jsx)("div",{className:"bg-green-600 w-3.5 h-3.5 rounded-full flex items-center justify-center shadow-md border-2 border-green-500"}),(0,n.jsx)("span",{className:"text-white font-medium text-[13px]",children:"1"})]})},"sb-limp-chip"))}if(d&&(null==t?void 0:t.openRaiseSize)&&!("SB"===i&&"15"===b&&(null==t?void 0:t.openRaiseSize)===1)&&!((null==c?void 0:c.isHero)&&"SB"===i)){let e=50-d.x,s=35-d.y,o=Math.sqrt(e*e+s*s),r=d.x+e/o*10,a=d.y+s/o*10;g.push((0,n.jsx)("div",{className:"absolute z-20",style:{left:"".concat(r,"%"),top:"".concat(a,"%"),transform:"translate(-50%, -50%)"},children:(0,n.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,n.jsx)("div",{className:"bg-red-600 w-3.5 h-3.5 rounded-full flex items-center justify-center shadow-md border-2 border-red-500"}),(0,n.jsx)("span",{className:"text-white font-medium text-[13px]",children:t.openRaiseSize})]})},"open-raiser-chips-dynamic"))}let x=t.threeBetterPosition?null===(a=Object.entries(et).find(e=>{let[s]=e;return s===t.threeBetterPosition}))||void 0===a?void 0:a[1]:null;if("vs3bet"===t.actionType&&"15BB"===t.stackDepth&&console.log("\uD83D\uDD0D PokerTable 3ベッター情報:",{threeBetterPosition:t.threeBetterPosition,threeBetSize:t.threeBetSize,actionType:t.actionType,stackDepth:t.stackDepth,threeBetterPositionFound:!!x}),x&&(null==t?void 0:t.threeBetSize)){let e=50-x.x,s=35-x.y,o=Math.sqrt(e*e+s*s),r=x.x+e/o*10,a=x.y+s/o*10;g.push((0,n.jsx)("div",{className:"absolute z-30",style:{left:"".concat(r,"%"),top:"".concat(a,"%"),transform:"translate(-50%, -50%)"},children:(0,n.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,n.jsx)("div",{className:"bg-orange-600 w-3.5 h-3.5 rounded-full flex items-center justify-center shadow-md border-2 border-orange-500"}),(0,n.jsx)("span",{className:"text-white font-medium text-[13px]",children:t.threeBetSize})]})},"three-better-chips-dynamic"))}return g})(),v&&(0,n.jsx)(d.Nn,{rangeData:M,title:"".concat(t.heroPosition||"BTN","ポジションからのオープンレイズレンジ (100BB)"),onClose:()=>A(!1)})]}),(0,n.jsx)("div",{className:"flex space-x-2 mt-3",children:eo().map(e=>{let{label:t,colorClass:o}="FOLD"===e?{label:"フォールド",colorClass:"bg-blue-600 hover:bg-blue-700"}:"CHECK"===e?{label:"チェック",colorClass:"bg-gray-600 hover:bg-gray-700"}:"CALL"===e?{label:"コール",colorClass:"bg-green-600 hover:bg-green-700"}:"RAISE"===e?{label:"レイズ",colorClass:"bg-red-600 hover:bg-red-700"}:"ALL IN"===e?{label:"オールイン",colorClass:"bg-purple-600 hover:bg-purple-700"}:{label:e,colorClass:"bg-gray-600 hover:bg-gray-700"};return(0,n.jsx)("button",{className:"px-4 py-2 rounded text-white font-medium ".concat(o," transition-colors"),onClick:()=>l&&l(e),disabled:!!s||p&&!R,children:t},e)})})]})};var g=s(7648),h=e=>{let{rangeData:t,title:s,onClose:o,position:r,stackSize:a,opponentPosition:l,actionType:c}=e,i=e=>{let s=t[e];if(!s)return{MIN:0,ALL_IN:0,CALL:0,FOLD:100};if(s.mixedFrequencies)return s.mixedFrequencies;{let e={MIN:0,ALL_IN:0,CALL:0,FOLD:0};switch(s.action){case"MIN":case"RAISE":case"3BB":e.MIN=s.frequency;break;case"ALL_IN":e.ALL_IN=s.frequency;break;case"CALL":e.CALL=s.frequency;break;default:e.FOLD=s.frequency}return e}},d=e=>{switch(e){case"MIN":case"RAISE":return"#F44336";case"ALL_IN":return"#7f1d1d";case"CALL":return"#4CAF50";case"FOLD":return"#4A90E2";default:return"#6b7280"}},u=e=>{let t=i(e),s=[{key:"ALL_IN",color:d("ALL_IN"),value:t.ALL_IN},{key:"MIN",color:d("MIN"),value:t.MIN},{key:"RAISE",color:d("RAISE"),value:t.MIN},{key:"CALL",color:d("CALL"),value:t.CALL},{key:"FOLD",color:d("FOLD"),value:t.FOLD}],n=s.filter(e=>e.value>0);if(0===t.MIN+t.ALL_IN+t.CALL)return{background:"#4A90E2 !important",backgroundColor:"#4A90E2 !important",border:"1px solid rgb(75, 85, 99) !important"};if(1===n.length&&100===n[0].value)return"FOLD"===n[0].key?{background:"#4A90E2 !important",backgroundColor:"#4A90E2 !important",border:"1px solid rgb(75, 85, 99) !important"}:{background:n[0].color};if(n.length>=2){let e=[],t=0;for(let n of s)n.value>0&&(e.push("".concat(n.color," ").concat(t,"% ").concat(t+n.value,"%")),t+=n.value);return{background:"linear-gradient(90deg, ".concat(e.join(", "),")"),border:"1px solid rgb(75, 85, 99)",boxShadow:"inset 0 0 0 1px rgba(255, 255, 255, 0.1)",backgroundSize:"100% 100%",backgroundRepeat:"no-repeat"}}return{background:"#4A90E2 !important",backgroundColor:"#4A90E2 !important",border:"1px solid rgb(75, 85, 99) !important"}},g=(()=>{let e={MIN:{count:0,percentage:0},ALL_IN:{count:0,percentage:0},CALL:{count:0,percentage:0},FOLD:{count:0,percentage:0},NONE:{count:0,percentage:0}},s=0,n=["A","K","Q","J","T","9","8","7","6","5","4","3","2"];for(let o=0;o<13;o++)for(let r=0;r<13;r++){let a=t[o===r?n[o]+n[r]:o<r?n[o]+n[r]+"s":n[r]+n[o]+"o"];if((null==a?void 0:a.action)==="MIXED"&&a.mixedFrequencies){let t=a.mixedFrequencies;e.MIN.percentage+=t.MIN||0,e.ALL_IN.percentage+=t.ALL_IN||0,e.CALL.percentage+=t.CALL||0,e.FOLD.percentage+=t.FOLD||0,s+=100}else if(a){let t=a.frequency||100;switch(a.action){case"MIN":case"RAISE":case"3BB":e.MIN.count+=1,e.MIN.percentage+=t;break;case"ALL_IN":e.ALL_IN.count+=1,e.ALL_IN.percentage+=t;break;case"CALL":e.CALL.count+=1,e.CALL.percentage+=t;break;case"FOLD":e.FOLD.count+=1,e.FOLD.percentage+=t;break;case"NONE":e.NONE.count+=1,e.NONE.percentage+=t}s+=100}else e.FOLD.count+=1,e.FOLD.percentage+=100,s+=100}return Object.keys(e).forEach(t=>{e[t].percentage=s>0?Math.round(e[t].percentage/s*1e3)/10:0}),e})(),h=(()=>{let e=["A","K","Q","J","T","9","8","7","6","5","4","3","2"],t=[];for(let s=0;s<13;s++){let n=[];for(let t=0;t<13;t++){let o="";o=s===t?e[s]+e[t]:s<t?e[s]+e[t]+"s":e[t]+e[s]+"o",n.push({hand:o,row:s,col:t})}t.push(n)}return t})();return(0,n.jsx)("div",{className:"fixed inset-0 bg-black/95 backdrop-blur-md flex items-center justify-center z-50 p-2 md:p-4",children:(0,n.jsxs)("div",{className:"bg-gray-900 rounded-3xl max-w-7xl w-full max-h-[98vh] overflow-hidden shadow-2xl border border-gray-800",children:[(0,n.jsx)("div",{className:"bg-gray-800 p-4 md:p-6 border-b border-gray-700",children:(0,n.jsxs)("div",{className:"flex justify-between items-center",children:[(0,n.jsxs)("div",{className:"flex items-center gap-3 md:gap-4",children:[(0,n.jsx)("div",{className:"w-10 h-10 md:w-12 md:h-12 bg-blue-600 rounded-xl flex items-center justify-center",children:(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 md:h-7 md:w-7 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h2",{className:"text-lg md:text-2xl font-bold text-white",children:s}),r&&a&&(0,n.jsxs)("div",{className:"flex items-center gap-2 md:gap-3 mt-1 flex-wrap",children:[(0,n.jsx)("span",{className:"bg-blue-600/20 px-2 md:px-3 py-1 rounded-full border border-blue-500/30 text-blue-300 text-xs md:text-sm font-medium",children:r}),(0,n.jsx)("span",{className:"bg-green-600/20 px-2 md:px-3 py-1 rounded-full border border-green-500/30 text-green-300 text-xs md:text-sm font-medium",children:a}),c&&"open"!==c&&"openraise"!==c&&(0,n.jsx)("span",{className:"bg-purple-600/20 px-2 md:px-3 py-1 rounded-full border border-purple-500/30 text-purple-300 text-xs md:text-sm font-medium",children:"vsopen"===c?"vsオープン":"vs3bet"===c?"vs3ベット":"vs4bet"===c?"vs4ベット":"vsオープン"}),l&&(0,n.jsxs)("span",{className:"bg-orange-600/20 px-2 md:px-3 py-1 rounded-full border border-orange-500/30 text-orange-300 text-xs md:text-sm font-medium",children:["vs ",l]}),(0,n.jsxs)("span",{className:"text-gray-400 text-xs md:text-sm",children:["総ハンド数: ",(0,n.jsx)("span",{className:"text-white font-semibold",children:Object.keys(t).length})]})]})]})]}),(0,n.jsx)("button",{onClick:o,className:"w-10 h-10 md:w-12 md:h-12 bg-gray-700 hover:bg-red-600 text-gray-300 hover:text-white rounded-xl flex items-center justify-center transition-all duration-200",children:(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 md:h-6 md:w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),(0,n.jsxs)("div",{className:"p-4 md:p-6 bg-gray-800 border-b border-gray-700",children:[(0,n.jsx)("h3",{className:"text-white font-bold mb-3 md:mb-4 text-base md:text-lg",children:"統計(頻度考慮):"}),(0,n.jsxs)("div",{className:"flex gap-2 md:gap-3 flex-wrap",children:[(0,n.jsxs)("div",{className:"bg-red-500 text-white px-3 md:px-4 py-2 md:py-3 rounded-lg text-xs md:text-sm font-medium",children:["RAISE: ",g.MIN.percentage,"%"]}),(0,n.jsxs)("div",{className:"bg-green-500 text-white px-3 md:px-4 py-2 md:py-3 rounded-lg text-xs md:text-sm font-medium",children:["CALL: ",g.CALL.percentage,"%"]}),(0,n.jsxs)("div",{className:"bg-red-900 text-white px-3 md:px-4 py-2 md:py-3 rounded-lg text-xs md:text-sm font-medium",children:["ALL IN: ",g.ALL_IN.percentage,"%"]}),(0,n.jsxs)("div",{className:"bg-blue-500 text-white px-3 md:px-4 py-2 md:py-3 rounded-lg text-xs md:text-sm font-medium",children:["FOLD: ",g.FOLD.percentage,"%"]}),(0,n.jsxs)("div",{className:"bg-gray-700 text-gray-300 px-3 md:px-4 py-2 md:py-3 rounded-lg text-xs md:text-sm font-medium",children:["NONE: ",g.NONE.percentage,"%"]})]})]}),(0,n.jsx)("div",{className:"p-4 md:p-6 overflow-auto max-h-[60vh] md:max-h-[65vh] bg-gradient-to-br from-gray-900 to-gray-800",children:(0,n.jsx)("div",{className:"grid grid-cols-13 gap-0.5 md:gap-1 max-w-4xl md:max-w-5xl mx-auto",children:h.map((e,s)=>e.map((e,o)=>(0,n.jsx)("div",{className:"text-white text-[10px] md:text-xs font-bold py-0.5 md:py-1 px-1 text-center rounded transition-all duration-200 hover:shadow-md min-h-[1.5rem] md:min-h-[2rem] flex items-center justify-center hand-range-viewer-cell",style:u(e.hand),"data-has-range":!!t[e.hand],children:e.hand},"".concat(s,"-").concat(o))))})}),(0,n.jsx)("div",{className:"p-4 md:p-6 bg-gray-800 border-t border-gray-700",children:(0,n.jsxs)("div",{className:"flex justify-between items-center",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2 md:gap-4 text-xs md:text-sm text-gray-300 flex-wrap",children:[(0,n.jsxs)("div",{className:"flex items-center gap-1 md:gap-2",children:[(0,n.jsx)("div",{className:"w-2 h-2 md:w-3 md:h-3 bg-green-600 rounded-full"}),(0,n.jsx)("span",{children:"CALL"})]}),(0,n.jsxs)("div",{className:"flex items-center gap-1 md:gap-2",children:[(0,n.jsx)("div",{className:"w-2 h-2 md:w-3 md:h-3 bg-blue-600 rounded-full"}),(0,n.jsx)("span",{children:"FOLD"})]}),(0,n.jsxs)("div",{className:"flex items-center gap-1 md:gap-2",children:[(0,n.jsx)("div",{className:"w-2 h-2 md:w-3 md:h-3 bg-red-600 rounded-full"}),(0,n.jsx)("span",{children:"RAISE"})]}),(0,n.jsxs)("div",{className:"flex items-center gap-1 md:gap-2",children:[(0,n.jsx)("div",{className:"w-2 h-2 md:w-3 md:h-3 bg-red-600 rounded-full"}),(0,n.jsx)("span",{children:"ALL IN"})]})]}),(0,n.jsx)("button",{onClick:o,className:"px-4 md:px-6 py-2 md:py-3 bg-gray-700 hover:bg-gray-600 text-white rounded-lg font-medium transition-all duration-200 text-sm md:text-base",children:"閉じる"})]})})]})})},m=s(7561);function x(e){let{onClose:t}=e,[s,r]=(0,o.useState)(""),[a,l]=(0,o.useState)(""),[c,i]=(0,o.useState)(!1),[d,u]=(0,o.useState)(""),{login:g}=(0,m.A)(),h=async e=>{if(e.preventDefault(),!s.trim()||!a.trim()){u("ユーザー名とパスワードを入力してください");return}i(!0),u(""),console.log("管理者ログイン試行:",{username:s,passwordLength:a.length,device:/Mobile|Android|iPhone/i.test(navigator.userAgent)?"mobile":"desktop"});try{let e=await g(s,a);console.log("ログイン結果:",e),e?setTimeout(()=>{t()},100):u("ユーザー名またはパスワードが間違っています")}catch(e){console.error("管理者ログインエラー:",e),u("ログイン中にエラーが発生しました。もう一度お試しください。")}finally{i(!1)}};return(0,n.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50",children:(0,n.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6 w-full max-w-md mx-4 border border-gray-600",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,n.jsx)("h2",{className:"text-xl font-bold text-white flex items-center",children:"\uD83D\uDD12 管理者ログイン"}),(0,n.jsx)("button",{onClick:t,className:"text-gray-400 hover:text-white text-xl",children:"✕"})]}),(0,n.jsxs)("form",{onSubmit:h,children:[(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"ユーザー名"}),(0,n.jsx)("input",{type:"text",value:s,onChange:e=>r(e.target.value),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:border-blue-500",placeholder:"管理者ユーザー名を入力",autoComplete:"off",autoCorrect:"off",spellCheck:"false",required:!0})]}),(0,n.jsxs)("div",{className:"mb-6",children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"パスワード"}),(0,n.jsx)("input",{type:"password",value:a,onChange:e=>l(e.target.value),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:border-blue-500",placeholder:"パスワードを入力",autoComplete:"off",autoCorrect:"off",spellCheck:"false",required:!0})]}),d&&(0,n.jsx)("div",{className:"mb-4 p-3 bg-red-900/50 border border-red-600 rounded-lg text-red-300 text-sm",children:d}),(0,n.jsxs)("div",{className:"flex gap-3",children:[(0,n.jsx)("button",{type:"button",onClick:t,className:"flex-1 py-2 px-4 bg-gray-600 hover:bg-gray-700 text-white rounded-lg transition-colors",children:"キャンセル"}),(0,n.jsx)("button",{type:"submit",disabled:c,className:"flex-1 py-2 px-4 bg-red-600 hover:bg-red-700 disabled:bg-gray-600 text-white rounded-lg transition-colors",children:c?"ログイン中...":"ログイン"})]})]}),(0,n.jsxs)("div",{className:"mt-4 text-xs text-gray-400 text-center bg-gray-700/30 p-2 rounded",children:[(0,n.jsx)("div",{className:"text-yellow-300 mb-1",children:"⚠️ セキュリティ注意"}),"このログインは重要なシステム管理機能へのアクセスを提供します。 認証情報は適切に管理してください。"]})]})})}var b=s(893),p=s(4362);let f=["UTG","UTG1","LJ","HJ","CO","BTN","SB","BB"],L=e=>f.indexOf(e),y=e=>{let t=L(e);return t<=0?[]:f.slice(0,t)},B=(e,t)=>{let s=L(e),n=L(t);return n<s&&n>=0&&s>=0},v=e=>{let t,s;if(!e||2!==e.length)return console.log("\uD83C\uDFAF normalizeHandType エラー: 無効なハンド",{hand:e}),"XX";let n=e[0],o=e[1];if(!n||!o||n.length<1||o.length<1)return console.log("\uD83C\uDFAF normalizeHandType エラー: 無効なカード形式",{card1:n,card2:o}),"XX";let r=n[0],a=o[0],l=n[1]||"",c=o[1]||"";if(console.log("\uD83C\uDFAF normalizeHandType 詳細入力:",{hand:e,card1:n,card2:o,rank1:r,rank2:a,suit1:l,suit2:c,rank1Length:null==r?void 0:r.length,rank2Length:null==a?void 0:a.length}),r===a){let e=r+a;return console.log("\uD83C\uDFAF normalizeHandType ペア結果:",{result:e,rank1:r,rank2:a}),e}let i={A:0,K:1,Q:2,J:3,T:4,9:5,8:6,7:7,6:8,5:9,4:10,3:11,2:12};if(void 0===i[r]||void 0===i[a])return console.log("\uD83C\uDFAF normalizeHandType エラー: 無効なランク",{rank1:r,rank2:a}),"XX";i[r]<=i[a]?(t=r,s=a):(t=a,s=r);let d=l===c?"s":"o",u=t+s+d;return console.log("\uD83C\uDFAF normalizeHandType 非ペア結果:",{result:u,firstRank:t,secondRank:s,suffix:d,rank1Order:i[r],rank2Order:i[a]}),u},A=()=>{let e=["2","3","4","5","6","7","8","9","T","J","Q","K","A"],t=["s","h","d","c"],s=[];for(;s.length<2;){let n=e[Math.floor(Math.random()*e.length)]+t[Math.floor(Math.random()*t.length)];s.includes(n)||s.push(n)}return s},D=(e,t,s,n,o,r,a)=>{console.log("\uD83C\uDFAF simulateMTTGTOData 開始:",{hand:e,position:t,stackSize:s,actionType:n,openerPosition:r,threeBetType:a,hasCustomRanges:!!o,customRangesKeys:o?Object.keys(o):[],customRangesCount:o?Object.keys(o).length:0});let l=v(e);console.log("\uD83C\uDFAF simulateMTTGTOData ハンド正規化:",{originalHand:e,normalizedHandType:l,handLength:e.length,actionType:n,position:t,stackSize:s});let c=e[0][0],i=e[1][0],u=e[0][1]===e[1][1];console.log("\uD83C\uDFAF ハンド正規化デバッグ:",{originalHand:e,normalizedHandType:l,rankA:c,rankB:i,suited:u});let g=parseInt(s.replace("BB","")),h={FOLD:0,CALL:0,RAISE:0,ALL_IN:0},m="FOLD",x={FOLD:0,CALL:-1.2,RAISE:-1.5,ALL_IN:-2};if("openraise"===n||"open"===n){let e;console.log("\uD83D\uDD0D オープンレイズ カスタムレンジ検索開始:",{position:t,stackSize:s,handType:l,hasCustomRanges:!!o,customRangesKeys:o?Object.keys(o):[]});let n=null;"15BB"===s?(e=t,n="".concat(t,"_15BB")):(e="".concat(t,"_").concat(s),n=t),console.log("\uD83D\uDD0D オープンレイズ レンジキー:",{rangeKey:e,fallbackRangeKey:n,stackSize:s,handType:l,hasThisRange:!!(o&&o[e]),hasFallbackRange:!!(o&&n&&o[n]),hasThisHand:!!(o&&(o[e]&&o[e][l]||n&&o[n]&&o[n][l])),availableRangeKeys:o?Object.keys(o):[],openRangeKeys:o?Object.keys(o).filter(s=>s===t||s.startsWith(t+"_")||s===e):[]});let r=null,a=e;if(o&&o[e]&&o[e][l]?(r=o[e][l],console.log("✅ オープンレイズ カスタムレンジ発見 (スタック固有):",{rangeKey:e,handType:l,customHandData:r})):n&&o&&o[n]&&o[n][l]?(r=o[n][l],a=n,console.log("✅ オープンレイズ フォールバックレンジ使用:",{fallbackRangeKey:n,handType:l,customHandData:r})):console.log("❌ オープンレイズ カスタムレンジ未発見:",{rangeKey:e,fallbackRangeKey:n,handType:l,hasCustomRanges:!!o,availableRangeKeys:o?Object.keys(o):[],hasRangeKey:!!(o&&o[e]),hasFallbackKey:!!(o&&n&&o[n]),rangeKeyData:o&&o[e]?Object.keys(o[e]):[],fallbackKeyData:o&&n&&o[n]?Object.keys(o[n]):[]}),r){console.log("\uD83C\uDFAF オープンレイズ カスタムレンジ適用:",{handType:l,customHandData:r,usedRangeKey:a});let e={FOLD:0,CALL:0,RAISE:0,ALL_IN:0},n="FOLD";if(r.mixedFrequencies){let t=r.mixedFrequencies;n=Object.entries(e={FOLD:t.FOLD||0,CALL:t.CALL||0,RAISE:(t.RAISE||0)+(t.MIN||0),ALL_IN:t.ALL_IN||0}).reduce((e,t)=>t[1]>e[1]?t:e)[0]}else n=({ALL_IN:"ALL_IN",ALLIN:"ALL_IN","ALL-IN":"ALL_IN",MIN:"RAISE",CALL:"CALL",FOLD:"FOLD",RAISE:"RAISE"})[r.action]||r.action,r.action.toUpperCase().includes("ALL")&&(n="ALL_IN"),e[n]=r.frequency,r.frequency<100&&(e.FOLD=100-r.frequency);let o={FOLD:0,CALL:"CALL"===n?1.5:-1,RAISE:"RAISE"===n?2.8:-1.2,ALL_IN:"ALL_IN"===n?3.5:-2};console.log("\uD83C\uDFAF オープンレイズ カスタム戦略決定:",{handType:l,primaryAction:n,frequencies:e});let c=j(t,n,g);return{correctAction:n,evData:o,frequencies:e,normalizedHandType:l,effectiveStackExplanation:"カスタムレンジ: ".concat(t,"ポジション").concat(s,"でのオープンレイズ戦略です。"),stackSizeStrategy:c,icmConsideration:N(g,n,t),recommendedBetSize:"ALL_IN"===n?g:"RAISE"===n?2.2:0,strategicAnalysis:"カスタム".concat(s,"オープンレイズ: ").concat(l,"は").concat(n,"が設定されています。"),exploitSuggestion:S(n,t,l),isCustomRange:!0,usedRangeKey:a}}}if("vsopen"===n&&r){let e;if(!B(t,r))return console.error("❌ 無効なvsオープン組み合わせ:",{heroPosition:t,openerPosition:r,validOpeners:y(t),reason:"オープンレイザーはヒーローより前のポジションである必要があります"}),{correctAction:m="FOLD",evData:x={FOLD:0,CALL:-5,RAISE:-5,ALL_IN:-5},frequencies:h={FOLD:100,CALL:0,RAISE:0,ALL_IN:0},normalizedHandType:l,effectiveStackExplanation:"❌ 無効なポジション組み合わせ: ".concat(r," → ").concat(t),stackSizeStrategy:"".concat(t,"ポジションに対して、").concat(r,"からのオープンは無効です。有効なオープンレイザー: ").concat(y(t).join(", ")),icmConsideration:"vs オープンでは、オープンレイザーはヒーローより前のポジションである必要があります。",recommendedBetSize:0,isInvalidCombination:!0,errorMessage:"".concat(r," から ").concat(t," への vs オープンは不可能です。"),validOpeners:y(t)};let n=null;"15BB"===s?(e="vsopen_".concat(t,"_vs_").concat(r),n="vsopen_".concat(t,"_vs_").concat(r,"_15BB")):e="vsopen_".concat(t,"_vs_").concat(r,"_").concat(s),console.log("\uD83D\uDD0D vs オープン分析:",{rangeKey:e,fallbackRangeKey:n,stackSize:s,handType:l,hasCustomRanges:!!o,hasThisRange:!!(o&&o[e]),hasFallbackRange:!!(o&&n&&o[n]),hasThisHand:!!(o&&(o[e]&&o[e][l]||n&&o[n]&&o[n][l])),availableRangeKeys:o?Object.keys(o):[],vsopenKeys:o?Object.keys(o).filter(e=>e.startsWith("vsopen_")):[],currentRangeData:o&&o[e]?Object.keys(o[e]):null,fallbackRangeData:o&&n&&o[n]?Object.keys(o[n]):null});let a=null,c=e;if(o&&o[e]&&o[e][l]?a=o[e][l]:n&&o&&o[n]&&o[n][l]&&(a=o[n][l],c=n,console.log("15BB互換性: 既存vsオープンレンジを使用",{fallbackRangeKey:n,handType:l})),a){console.log("✅ vs オープン カスタムレンジ使用:",{usedRangeKey:c,handType:l,customHandData:a});let n={FOLD:0,CALL:0,RAISE:0,ALL_IN:0},o="FOLD";if("MIXED"===a.action&&a.mixedFrequencies){let e=a.mixedFrequencies,t=Object.entries(n={FOLD:e.FOLD||0,CALL:e.CALL||0,RAISE:(e.RAISE||0)+(e.MIN||0),ALL_IN:e.ALL_IN||0}).reduce((e,t)=>t[1]>e[1]?t:e);o=t[0],"MIXED"===a.action&&(a.action=o,a.frequency=t[1]),console.log("\uD83C\uDFAF vs open MIXEDアクション処理（修正版）:",{mixedFreq:e,customFrequencies:n,customPrimaryAction:o,finalAction:a.action,finalFrequency:a.frequency})}else{let e=a.action;"MIN"===(o=e.replace("ALL_IN","ALL_IN"))&&(o="RAISE");let t=o;n[t]=a.frequency,a.frequency<100&&(n.FOLD=100-a.frequency),console.log("\uD83C\uDFAF vs3bet 単一アクション処理デバッグ:",{originalAction:e,convertedAction:o,frequency:a.frequency,actionKey:t,customFrequencies:n,handType:l})}let i={FOLD:0,CALL:"CALL"===o?.8:-1,RAISE:"RAISE"===o?1.5:-1.2,ALL_IN:"ALL_IN"===o?2.8:-2};console.log("\uD83C\uDFAF カスタムレンジ使用:",{rangeKey:e,handType:l,customHandData:a,primaryAction:o,frequencies:n,correctAction:o,finalFrequencies:n});let d=w(t,r,o,g),u="BTN"===r&&"15BB"===s?1:2.5;return{correctAction:o,evData:i,frequencies:n,normalizedHandType:l,effectiveStackExplanation:"カスタムレンジ: ".concat(r,"からのオープンに対する").concat(t,"ポジションでの設定済み戦略です。"),stackSizeStrategy:d,icmConsideration:N(g,o,t),recommendedBetSize:"ALL_IN"===o?g:"RAISE"===o?2.2:0,openerInfo:C(r),openRaiserPosition:r,openRaiseSize:u,isVsOpen:!0,isCustomRange:!0}}console.log("❌ vs オープン カスタムレンジ未発見:",{rangeKey:e,fallbackRangeKey:n,handType:l,hasCustomRanges:!!o,availableRangeKeys:o?Object.keys(o):[],vsopenKeys:o?Object.keys(o).filter(e=>e.startsWith("vsopen_")):[]});let i=F(l,t,r,g);if(i){m=i.primaryAction,h=i.frequencies,x=i.evData;let e=w(t,r,m,g),n="BTN"===r&&"15BB"===s?1:2;return{correctAction:m,evData:x,frequencies:h,normalizedHandType:l,effectiveStackExplanation:"".concat(r,"からのオープンに対する").concat(t,"ポジションでの最適戦略です。"),stackSizeStrategy:e,icmConsideration:N(g,m,t),recommendedBetSize:"ALL_IN"===m?g:"RAISE"===m?2.2:0,openerInfo:C(r),openRaiserPosition:r,openRaiseSize:n,isVsOpen:!0}}}if("vs3bet"===n){if(["27o","37o","47o","57o","67o","32o","42o","52o","62o","72o","82o","92o","T2o","J2o","Q2o","K2o","A2o","23o","24o","25o","26o","28o","29o","2To","2Jo","2Qo","2Ko","2Ao"].includes(l))return console.log("\uD83C\uDFAF レンジ外ハンド検出:",{actionType:n,normalizedHandType:l}),{correctAction:"FOLD",evData:{FOLD:0,CALL:-5,RAISE:-5,ALL_IN:-5},frequencies:{FOLD:100,CALL:0,RAISE:0,ALL_IN:0},normalizedHandType:l,effectiveStackExplanation:"このハンド(".concat(l,")は").concat(n,"のレンジに含まれていません。"),stackSizeStrategy:"レンジ外のハンドは通常フォールドが最適です。",icmConsideration:"レンジ外ハンドの頻度が設定されていません。FOLD 100%が推奨されます。",recommendedBetSize:0,isRangeOut:!0,exploitSuggestion:"このハンド(".concat(l,")は").concat(n,"のレンジに含まれていません。頻度が設定されていないため、FOLD 100%が推奨されます。")};let e=r;if(!e){let s=(e=>{let t=L(e);return t>=f.length-1?[]:f.slice(t+1)})(t);if(0===s.length)return{correctAction:"FOLD",evData:{FOLD:0,CALL:-3,RAISE:-3,ALL_IN:-3},frequencies:{FOLD:100,CALL:0,RAISE:0,ALL_IN:0},normalizedHandType:l,effectiveStackExplanation:"❌ 無効なvs3ベット設定: 有効な3ベッターが存在しません",stackSizeStrategy:"vs3ベットには、オープンレイザーより後のポジションの3ベッターが必要です。",icmConsideration:"ポジション設定を確認してください。",recommendedBetSize:0};e=s[Math.floor(Math.random()*s.length)]}let c="UTG+1"===t?"UTG1":t,i="UTG+1"===e?"UTG1":e,d="vs3bet_".concat(c,"_vs_").concat(i,"_").concat(s);if("20BB"===s&&a){let e="vs3bet_".concat(c,"_vs_").concat(i,"_").concat(a,"_20BB");d=e,console.log("\uD83C\uDFAF 20BB 3ベットタイプ別レンジ使用:",{threeBetType:a,typeSpecificRangeKey:e,handType:l})}let u="15BB"===s?"vs3bet_".concat(c,"_vs_").concat(i):null;console.log("\uD83C\uDFAF レンジキー正規化:",{originalPosition:t,originalThreeBetterPosition:e,normalizedPosition:c,normalizedThreeBetterPosition:i,rangeKey:d,fallbackRangeKey:u}),console.log("\uD83D\uDD0D vs 3ベット分析:",{rangeKey:d,fallbackRangeKey:u,stackSize:s,handType:l,hasCustomRanges:!!o,hasThisRange:!!(o&&o[d]),hasFallbackRange:!!(o&&u&&o[u]),hasThisHand:!!(o&&(o[d]&&o[d][l]||u&&o[u]&&o[u][l])),availableRangeKeys:o?Object.keys(o):[],rangeKeyExists:!!(o&&o[d]),rangeKeyData:o&&o[d]?Object.keys(o[d]):[],handInRangeKey:!!(o&&o[d]&&o[d][l]),fallbackKeyExists:!!(o&&u&&o[u]),fallbackKeyData:o&&u&&o[u]?Object.keys(o[u]):[],handInFallbackKey:!!(o&&u&&o[u]&&o[u][l])}),console.log("\uD83C\uDFAF カスタムレンジ詳細デバッグ:",{customRangesExists:!!o,customRangesKeys:o?Object.keys(o):[],targetRangeKey:d,targetHandType:l,hasTargetRange:!!(o&&o[d]),targetRangeData:o&&o[d]?Object.keys(o[d]):[],hasTargetHand:!!(o&&o[d]&&o[d][l])});let b=null,p=d;if(console.log("\uD83D\uDD0D Searching for custom range:",{rangeKey:d,fallbackRangeKey:u,handType:l,hasCustomRanges:!!o,customRangesKeys:o?Object.keys(o):[],targetRangeExists:!!(o&&o[d]),targetHandExists:!!(o&&o[d]&&o[d][l])}),o&&o[d]&&o[d][l])b=o[d][l],console.log("\uD83C\uDFAF vs3bet カスタムレンジ発見 (スタック固有):",{rangeKey:d,handType:l,customHandData:b});else if(u&&o&&o[u]&&o[u][l])b=o[u][l],p=u,console.log("\uD83C\uDFAF 15BB互換性: 既存vs3ベットレンジを使用",{fallbackRangeKey:u,handType:l,customHandData:b});else{if("20BB"===s&&a&&console.log("\uD83C\uDFAF 20BB タイプ別レンジ未発見の詳細デバッグ:",{threeBetType:a,rangeKey:d,normalizedHandType:l,availableRangeKeys:o?Object.keys(o).filter(e=>e.includes("20BB")):[],matchingRangeKeys:o?Object.keys(o).filter(e=>e.includes("20BB")&&e.includes(c)&&e.includes(i)):[],hasRangeKey:!!(o&&o[d]),rangeKeyData:o&&o[d]?Object.keys(o[d]):[],has20BBRaiseRanges:o?Object.keys(o).filter(e=>e.includes("20BB")&&e.includes("raise")).length:0,has20BBAllinRanges:o?Object.keys(o).filter(e=>e.includes("20BB")&&e.includes("allin")).length:0,twentyBBRaiseRanges:o?Object.keys(o).filter(e=>e.includes("20BB")&&e.includes("raise")):[],twentyBBAllinRanges:o?Object.keys(o).filter(e=>e.includes("20BB")&&e.includes("allin")):[],exactMatchExists:!!o&&Object.keys(o).includes(d),partialMatches:o?Object.keys(o).filter(e=>e.includes("20BB")&&e.includes(c)&&e.includes(i)):[]}),console.log("\uD83C\uDFAF vs3bet カスタムレンジ未発見:",{rangeKey:d,fallbackRangeKey:u,handType:l,hasCustomRanges:!!o,availableRangeKeys:o?Object.keys(o):[],hasRangeKey:!!(o&&o[d]),hasFallbackKey:!!(o&&u&&o[u]),rangeKeyData:o&&o[d]?Object.keys(o[d]):[],fallbackKeyData:o&&u&&o[u]?Object.keys(o[u]):[]}),!o||0===Object.keys(o).length){console.log("\uD83C\uDFAF カスタムレンジが空のため、ローカルストレージから強制読み込み");let e=localStorage.getItem("mtt-custom-ranges");if(e)try{let t=JSON.parse(e);console.log("\uD83C\uDFAF 強制読み込み成功:",{rangeKeys:Object.keys(t),hasTargetRange:!!t[d],hasTargetHand:!!(t[d]&&t[d][l])}),t[d]&&t[d][l]?(b=t[d][l],p=d,console.log("\uD83C\uDFAF 強制読み込みからカスタムレンジ発見:",{rangeKey:d,handType:l,customHandData:b})):u&&t[u]&&t[u][l]&&(b=t[u][l],p=u,console.log("\uD83C\uDFAF 強制読み込みからフォールバックレンジ発見:",{fallbackRangeKey:u,handType:l,customHandData:b})),Object.keys(t).length>0&&console.log("\uD83D\uDD04 強制読み込み成功: カスタムレンジが見つかりました")}catch(e){console.log("強制読み込みエラー:",e)}}b||(console.log("\uD83C\uDFAF カスタムレンジ未発見 - デフォルト戦略を使用:",{handType:l,rangeKey:d,hasCustomRanges:!!o,availableRanges:o?Object.keys(o):[]}),b=null)}if(b){let e={FOLD:0,CALL:0,RAISE:0,ALL_IN:0},o="FOLD";if("MIXED"===b.action&&b.mixedFrequencies){let t=b.mixedFrequencies,s=Object.entries(e={FOLD:t.FOLD||0,CALL:t.CALL||0,RAISE:(t.RAISE||0)+(t.MIN||0),ALL_IN:t.ALL_IN||0}).reduce((e,t)=>t[1]>e[1]?t:e);o=s[0],"MIXED"===b.action&&(b.action=o,b.frequency=s[1]),console.log("\uD83C\uDFAF MIXEDアクション処理（修正版）:",{mixedFreq:t,customFrequencies:e,customPrimaryAction:o,finalAction:b.action,finalFrequency:b.frequency,handType:l,maxFrequency:s[1],totalFreq:Object.values(e).reduce((e,t)=>e+t,0)})}else console.log("\uD83C\uDFAF カスタムレンジ設定を尊重:",{handType:l,originalAction:b.action,originalFrequency:b.frequency,isMixed:"MIXED"===b.action}),"MIN"===(o=b.action.replace("ALL_IN","ALL_IN"))&&(o="RAISE"),e[o]=b.frequency,b.frequency<100&&(e.FOLD=100-b.frequency);let r=Object.values(e).reduce((e,t)=>e+t,0);if(console.log("\uD83C\uDFAF カスタムレンジ頻度確認:",{frequencies:e,totalFreq:r,customPrimaryAction:o,handType:l}),100===e.FOLD)return console.log("\uD83C\uDFAF カスタムレンジFOLD 100%検出:",{actionType:n,normalizedHandType:l,rangeKey:d}),{correctAction:"FOLD",evData:{FOLD:0,CALL:-5,RAISE:-5,ALL_IN:-5},frequencies:{FOLD:100,CALL:0,RAISE:0,ALL_IN:0},normalizedHandType:l,effectiveStackExplanation:"このハンド(".concat(l,")はカスタムレンジでFOLD 100%に設定されています。"),stackSizeStrategy:"カスタムレンジでレンジ外として設定されたハンドです。",icmConsideration:"カスタムレンジでFOLD 100%に設定されているため、レンジ外として扱われます。",recommendedBetSize:0,isRangeOut:!0,exploitSuggestion:"このハンド(".concat(l,")はカスタムレンジでFOLD 100%に設定されています。レンジ外として扱われます。")};console.log("\uD83C\uDFAF vs3bet カスタムレンジ処理完了:",{originalAction:b.action,finalAction:o,frequencies:e,handType:l});let a={FOLD:0,CALL:"CALL"===o?1.2:-1.5,RAISE:"RAISE"===o?2.8:-2,ALL_IN:"ALL_IN"===o?4.5:-3};return console.log("\uD83C\uDFAF カスタムvs3ベットレンジ使用:",{rangeKey:p,handType:l,customHandData:b,primaryAction:o,frequencies:e,correctAction:o}),{correctAction:o,evData:a,frequencies:e,normalizedHandType:l,effectiveStackExplanation:"カスタムレンジ: ".concat(t,"ポジション").concat(s,"でのvs 3ベット戦略です。"),stackSizeStrategy:"vs 3ベット: カスタム設定により".concat(l,"は").concat(o,"が推奨されます。"),icmConsideration:N(g,o,t),recommendedBetSize:"ALL_IN"===o?g:"RAISE"===o?Math.min(.7*g,25):0,strategicAnalysis:"カスタムvs3ベット戦略: ".concat(l,"は").concat(o,"が設定されています。"),isCustomRange:!0}}console.log("\uD83C\uDFAF vs3bet カスタムレンジなし - デフォルト戦略使用:",{handType:l,stackSize:s,hasCustomRanges:!!o,availableRangeKeys:o?Object.keys(o):[]}),"AA"===l?console.log("\uD83C\uDFAF AAハンド強制ALL IN設定:",{handType:l,gtoAction:m="ALL_IN",frequencies:h={FOLD:0,CALL:0,RAISE:0,ALL_IN:100},correctAction:m,primaryFrequency:h[m]}):"KK"===l?console.log("\uD83C\uDFAF KKハンド強制ALL IN設定:",{handType:l,gtoAction:m="ALL_IN",frequencies:h={FOLD:0,CALL:0,RAISE:0,ALL_IN:100},correctAction:m,primaryFrequency:h[m]}):"QQ"===l?console.log("\uD83C\uDFAF QQハンド混合戦略設定:",{handType:l,gtoAction:m="ALL_IN",frequencies:h={FOLD:10,CALL:0,RAISE:0,ALL_IN:90},correctAction:m,primaryFrequency:h[m]}):["AKs","AKo"].includes(l)?console.log("\uD83C\uDFAF AKハンド強制ALL IN設定:",{handType:l,gtoAction:m="ALL_IN",frequencies:h={FOLD:0,CALL:0,RAISE:0,ALL_IN:100},correctAction:m,primaryFrequency:h[m]}):"JJ"===l?console.log("\uD83C\uDFAF JJハンド混合戦略設定:",{handType:l,gtoAction:m="CALL",frequencies:h={FOLD:0,CALL:70,RAISE:0,ALL_IN:30},correctAction:m,primaryFrequency:h[m]}):"TT"===l?console.log("\uD83C\uDFAF TTハンド混合戦略設定:",{handType:l,gtoAction:m="CALL",frequencies:h={FOLD:0,CALL:60,RAISE:0,ALL_IN:40},correctAction:m,primaryFrequency:h[m]}):["AQs","AQo"].includes(l)?console.log("\uD83C\uDFAF AQハンド混合戦略設定:",{handType:l,gtoAction:m="CALL",frequencies:h={FOLD:0,CALL:80,RAISE:0,ALL_IN:20},correctAction:m,primaryFrequency:h[m]}):"99"===l?console.log("\uD83C\uDFAF 99ハンド混合戦略設定:",{handType:l,gtoAction:m="CALL",frequencies:h={FOLD:0,CALL:50,RAISE:0,ALL_IN:50},correctAction:m,primaryFrequency:h[m]}):(m="FOLD",h={FOLD:100,CALL:0,RAISE:0,ALL_IN:0});let y=Object.values(h).reduce((e,t)=>e+t,0);return console.log("\uD83C\uDFAF デフォルト戦略頻度確認:",{handType:l,gtoAction:m,frequencies:h,totalFreq:y}),console.log("\uD83C\uDFAF vs3bet デフォルト戦略適用:",{handType:l,gtoAction:m,frequencies:h,stackSize:s}),x={FOLD:0,CALL:"CALL"===m?1.2:-1.5,RAISE:"RAISE"===m?2.8:-2,ALL_IN:"ALL_IN"===m?4.5:-3},{correctAction:m,evData:x,frequencies:h,normalizedHandType:l,effectiveStackExplanation:"".concat(s,"スタックでのvs 3ベット戦略です。"),stackSizeStrategy:"vs 3ベット: ".concat(l,"は").concat(m,"が推奨されます。"),icmConsideration:N(g,m,t),recommendedBetSize:"ALL_IN"===m?g:"RAISE"===m?Math.min(.7*g,25):0,strategicAnalysis:"vs3ベット戦略: ".concat(l,"は").concat(m,"が推奨されます。"),exploitSuggestion:"vs 3ベットでは、相手の3ベット頻度と4ベットに対する反応を観察して調整しましょう。"}}if("vs4bet"===n){if(["27o","37o","47o","57o","67o","32o","42o","52o","62o","72o","82o","92o","T2o","J2o","Q2o","K2o","A2o","23o","24o","25o","26o","28o","29o","2To","2Jo","2Qo","2Ko","2Ao"].includes(l))return console.log("\uD83C\uDFAF レンジ外ハンド検出:",{actionType:n,normalizedHandType:l}),{correctAction:"FOLD",evData:{FOLD:0,CALL:-5,RAISE:-5,ALL_IN:-5},frequencies:{FOLD:100,CALL:0,RAISE:0,ALL_IN:0},normalizedHandType:l,effectiveStackExplanation:"このハンド(".concat(l,")は").concat(n,"のレンジに含まれていません。"),stackSizeStrategy:"レンジ外のハンドは通常フォールドが最適です。",icmConsideration:"レンジ外ハンドの頻度が設定されていません。FOLD 100%が推奨されます。",recommendedBetSize:0,isRangeOut:!0,exploitSuggestion:"このハンド(".concat(l,")は").concat(n,"のレンジに含まれていません。頻度が設定されていないため、FOLD 100%が推奨されます。")};let e=r;if(!e){let s=(e=>{let t=L(e);return t<=0?[]:f.slice(0,t)})(t);if(0===s.length)return{correctAction:"FOLD",evData:{FOLD:0,CALL:-5,RAISE:-5,ALL_IN:-5},frequencies:{FOLD:100,CALL:0,RAISE:0,ALL_IN:0},normalizedHandType:l,effectiveStackExplanation:"❌ 無効なvs4ベット設定: 有効な4ベッターが存在しません",stackSizeStrategy:"vs4ベットには、3ベッターより前のポジション（通常オリジナルのオープンレイザー）の4ベッターが必要です。",icmConsideration:"ポジション設定を確認してください。",recommendedBetSize:0};e=s[Math.floor(Math.random()*s.length)]}let a="vs4bet_".concat(t,"_vs_").concat(e,"_").concat(s),c="15BB"===s?"vs4bet_".concat(t,"_vs_").concat(e):null;console.log("\uD83D\uDD0D vs 4ベット分析:",{rangeKey:a,fallbackRangeKey:c,stackSize:s,handType:l,hasCustomRanges:!!o,hasThisRange:!!(o&&o[a]),hasFallbackRange:!!(o&&c&&o[c]),hasThisHand:!!(o&&(o[a]&&o[a][l]||c&&o[c]&&o[c][l])),availableRangeKeys:o?Object.keys(o):[]});let i=null,d=a;if(o&&o[a]&&o[a][l]?i=o[a][l]:c&&o&&o[c]&&o[c][l]&&(i=o[c][l],d=c,console.log("15BB互換性: 既存vs4ベットレンジを使用",{fallbackRangeKey:c,handType:l})),i){let e={FOLD:0,CALL:0,RAISE:0,ALL_IN:0},o="FOLD";if("MIXED"===i.action&&i.mixedFrequencies){let t=i.mixedFrequencies;o=Object.entries(e={FOLD:t.FOLD||0,CALL:t.CALL||0,RAISE:(t.RAISE||0)+(t.MIN||0),ALL_IN:t.ALL_IN||0}).reduce((e,t)=>t[1]>e[1]?t:e)[0],console.log("\uD83C\uDFAF vs4bet MIXEDアクション処理:",{mixedFreq:t,customFrequencies:e,customPrimaryAction:o})}else"MIN"===(o=i.action.replace("ALL_IN","ALL_IN"))&&(o="RAISE"),e[o]=i.frequency,i.frequency<100&&(e.FOLD=100-i.frequency);if(100===e.FOLD)return console.log("\uD83C\uDFAF カスタムレンジFOLD 100%検出:",{actionType:n,normalizedHandType:l,rangeKey:a}),{correctAction:"FOLD",evData:{FOLD:0,CALL:-5,RAISE:-5,ALL_IN:-5},frequencies:{FOLD:100,CALL:0,RAISE:0,ALL_IN:0},normalizedHandType:l,effectiveStackExplanation:"このハンド(".concat(l,")はカスタムレンジでFOLD 100%に設定されています。"),stackSizeStrategy:"カスタムレンジでレンジ外として設定されたハンドです。",icmConsideration:"カスタムレンジでFOLD 100%に設定されているため、レンジ外として扱われます。",recommendedBetSize:0,isRangeOut:!0,exploitSuggestion:"このハンド(".concat(l,")はカスタムレンジでFOLD 100%に設定されています。レンジ外として扱われます。")};console.log("\uD83C\uDFAF vs4bet カスタムレンジ処理完了:",{originalAction:i.action,finalAction:o,frequencies:e,handType:l});let r={FOLD:0,CALL:"CALL"===o?2:-2.5,RAISE:"RAISE"===o?5.5:-4,ALL_IN:"ALL_IN"===o?8:-5};console.log("\uD83C\uDFAF カスタムvs4ベットレンジ使用:",{rangeKey:d,handType:l,customHandData:i,primaryAction:o,frequencies:e});let c={correctAction:o,evData:r,frequencies:e,normalizedHandType:l,effectiveStackExplanation:"カスタムレンジ: ".concat(t,"ポジション").concat(s,"でのvs 4ベット戦略です。"),stackSizeStrategy:"vs 4ベット: カスタム設定により".concat(l,"は").concat(o,"が推奨されます。"),icmConsideration:N(g,o,t),recommendedBetSize:"ALL_IN"===o?g:"RAISE"===o?g:0,strategicAnalysis:"カスタムvs4ベット戦略: ".concat(l,"は").concat(o,"が設定されています。"),isCustomRange:!0};return console.log("\uD83C\uDFAF vs4bet カスタムレンジ戻り値:",{normalizedHandType:c.normalizedHandType,originalNormalizedHandType:l,resultKeys:Object.keys(c)}),c}return console.log("\uD83C\uDFAF vs4bet カスタムレンジなし - デフォルト戦略使用:",{handType:l,stackSize:s,hasCustomRanges:!!o,availableRangeKeys:o?Object.keys(o):[]}),["AA","KK"].includes(l)?(m="ALL_IN",h={FOLD:0,CALL:0,RAISE:0,ALL_IN:100}):["QQ","AKs","AKo"].includes(l)?(m="CALL",h={FOLD:20,CALL:70,RAISE:0,ALL_IN:10}):(m="FOLD",h={FOLD:100,CALL:0,RAISE:0,ALL_IN:0}),console.log("\uD83C\uDFAF vs4bet デフォルト戦略適用:",{handType:l,gtoAction:m,frequencies:h,stackSize:s}),x={FOLD:0,CALL:"CALL"===m?2:-2.5,RAISE:"RAISE"===m?5.5:-4,ALL_IN:"ALL_IN"===m?8:-5},{correctAction:m,evData:x,frequencies:h,normalizedHandType:l,effectiveStackExplanation:"".concat(s,"スタックでのvs 4ベット戦略です。"),stackSizeStrategy:"vs 4ベット: ".concat(l,"は").concat(m,"が推奨されます。"),icmConsideration:N(g,m,t),recommendedBetSize:"ALL_IN"===m?g:"RAISE"===m?g:0,strategicAnalysis:"vs4ベット戦略: ".concat(l,"は").concat(m,"が推奨されます。"),exploitSuggestion:"vs 4ベットでは、プレミアムハンド以外はほぼフォールドが基本です。相手の4ベット頻度を観察しましょう。"}}if(g<=15){let e="".concat(t,"_").concat(s);if(console.log("\uD83D\uDD0D スタック固有レンジ分析:",{position:t,stackSize:s,stackSpecificRangeKey:e,handType:l,hasCustomRanges:!!o,hasStackSpecificRange:!!(o&&o[e]),hasGenericRange:!!(o&&o[t]),hasThisHand:!!(o&&(o[e]||o[t])&&(o[e]&&o[e][l]||o[t]&&o[t][l])),availablePositions:o?Object.keys(o):[]}),o&&o[e]&&o[e][l]){let n=o[e][l],r={FOLD:0,CALL:0,RAISE:0,ALL_IN:0},a="FOLD";if("MIXED"===n.action&&n.mixedFrequencies){let e=n.mixedFrequencies;a=Object.entries(r={FOLD:e.FOLD||0,CALL:e.CALL||0,RAISE:(e.RAISE||0)+(e.MIN||0),ALL_IN:e.ALL_IN||0}).reduce((e,t)=>t[1]>e[1]?t:e)[0],console.log("\uD83C\uDFAF RFI MIXEDアクション処理:",{mixedFreq:e,customFrequencies:r,customPrimaryAction:a})}else a=({ALL_IN:"ALL_IN",ALLIN:"ALL_IN","ALL-IN":"ALL_IN",MIN:"RAISE",CALL:"CALL",FOLD:"FOLD",RAISE:"RAISE"})[n.action]||n.action,n.action.toUpperCase().includes("ALL")&&(a="ALL_IN"),r[a]=n.frequency,n.frequency<100&&(r.FOLD=100-n.frequency);let c={FOLD:0,CALL:"CALL"===a?.8:-1,RAISE:"RAISE"===a?2.5:-1.2,ALL_IN:"ALL_IN"===a?3.2:-2};console.log("\uD83C\uDFAF スタック固有カスタムレンジ使用:",{rangeKey:e,handType:l,customHandData:n,primaryAction:a,frequencies:r});let i=j(t,a,g);return{correctAction:a,evData:c,frequencies:r,normalizedHandType:l,effectiveStackExplanation:"カスタムレンジ: ".concat(t,"ポジション").concat(s,"での設定済み戦略です。"),stackSizeStrategy:i,icmConsideration:N(g,a,t),recommendedBetSize:"ALL_IN"===a?g:"RAISE"===a?2.2:0,strategicAnalysis:"カスタム".concat(s,"戦略: ").concat(l,"は").concat(a,"が設定されています。"),exploitSuggestion:S(a,t,l),isCustomRange:!0}}if(o&&o[t]&&o[t][l]){let e=o[t][l],s={FOLD:0,CALL:0,RAISE:0,ALL_IN:0},n="FOLD";if("MIXED"===e.action&&e.mixedFrequencies){let t=e.mixedFrequencies;n=Object.entries(s={FOLD:t.FOLD||0,CALL:t.CALL||0,RAISE:(t.RAISE||0)+(t.MIN||0),ALL_IN:t.ALL_IN||0}).reduce((e,t)=>t[1]>e[1]?t:e)[0]}else n=({ALL_IN:"ALL_IN",ALLIN:"ALL_IN","ALL-IN":"ALL_IN",MIN:"RAISE",CALL:"CALL",FOLD:"FOLD",RAISE:"RAISE"})[e.action]||e.action,e.action.toUpperCase().includes("ALL")&&(n="ALL_IN"),s[n]=e.frequency,e.frequency<100&&(s.FOLD=100-e.frequency);let r={FOLD:0,CALL:"CALL"===n?.8:-1,RAISE:"RAISE"===n?2.5:-1.2,ALL_IN:"ALL_IN"===n?3.2:-2};console.log("\uD83C\uDFAF カスタムレンジ使用 (オープン):",{position:t,handType:l,customHandData:e,primaryAction:n,frequencies:s});let a=j(t,n,g);return{correctAction:n,evData:r,frequencies:s,normalizedHandType:l,effectiveStackExplanation:"カスタムレンジ: ".concat(t,"ポジションでの設定済み15BBオープン戦略です。"),stackSizeStrategy:a,icmConsideration:N(g,n,t),recommendedBetSize:"ALL_IN"===n?g:"RAISE"===n?2.2:0,strategicAnalysis:"カスタム15BB戦略: ".concat(l,"は").concat(n,"が設定されています。"),exploitSuggestion:S(n,t,l),isCustomRange:!0}}}if(g>15){let e="".concat(t,"_").concat(s);if(console.log("\uD83D\uDD0D 深いスタック固有レンジ分析:",{position:t,stackSize:s,stackSpecificRangeKey:e,handType:l,hasStackSpecificRange:!!(o&&o[e]),hasThisHand:!!(o&&o[e]&&o[e][l])}),o&&o[e]&&o[e][l]){let n=o[e][l],r={FOLD:0,CALL:0,RAISE:0,ALL_IN:0},a="FOLD";if("MIXED"===n.action&&n.mixedFrequencies){let e=n.mixedFrequencies;a=Object.entries(r={FOLD:e.FOLD||0,CALL:e.CALL||0,RAISE:(e.RAISE||0)+(e.MIN||0),ALL_IN:e.ALL_IN||0}).reduce((e,t)=>t[1]>e[1]?t:e)[0],console.log("\uD83C\uDFAF 3bet MIXEDアクション処理:",{mixedFreq:e,customFrequencies:r,customPrimaryAction:a})}else a=({ALL_IN:"ALL_IN",ALLIN:"ALL_IN","ALL-IN":"ALL_IN",MIN:"RAISE",CALL:"CALL",FOLD:"FOLD",RAISE:"RAISE"})[n.action]||n.action,n.action.toUpperCase().includes("ALL")&&(a="ALL_IN"),r[a]=n.frequency,n.frequency<100&&(r.FOLD=100-n.frequency);let c={FOLD:0,CALL:"CALL"===a?.8:-1,RAISE:"RAISE"===a?2.5:-1.2,ALL_IN:"ALL_IN"===a?3.2:-2};console.log("\uD83C\uDFAF 深いスタック固有カスタムレンジ使用:",{rangeKey:e,handType:l,customHandData:n,primaryAction:a,frequencies:r});let i=j(t,a,g);return{correctAction:a,evData:c,frequencies:r,normalizedHandType:l,effectiveStackExplanation:"カスタムレンジ: ".concat(t,"ポジション").concat(s,"での設定済み戦略です。"),stackSizeStrategy:i,icmConsideration:N(g,a,t),recommendedBetSize:"ALL_IN"===a?g:"RAISE"===a?2.2:0,strategicAnalysis:"カスタム".concat(s,"戦略: ").concat(l,"は").concat(a,"が設定されています。"),exploitSuggestion:S(a,t,l),isCustomRange:!0}}}console.log("\uD83D\uDCCA デフォルトMTTレンジ使用:",{position:t,stackDepthBB:g,handType:l});let b=(0,d.ox)(t,g)[l];if(b){if(b.mixedFrequencies){let e=b.mixedFrequencies;m=Object.entries(h={FOLD:e.FOLD||0,CALL:e.CALL||0,RAISE:(e.RAISE||0)+(e.MIN||0),ALL_IN:e.ALL_IN||0}).reduce((e,t)=>t[1]>e[1]?t:e)[0]}else h[m=({ALL_IN:"ALL_IN",MIN:"RAISE",CALL:"CALL",FOLD:"FOLD",RAISE:"RAISE"})[b.action]||b.action]=b.frequency,b.frequency<100&&(h.FOLD=100-b.frequency);x={FOLD:0,CALL:"CALL"===m?.8:-1,RAISE:"RAISE"===m?2.5:-1.2,ALL_IN:"ALL_IN"===m?3.2:-2}}else m="FOLD",h={FOLD:100,CALL:0,RAISE:0,ALL_IN:0},x={FOLD:0,CALL:-1.5,RAISE:-2,ALL_IN:-2.5};console.log("\uD83C\uDFAF デフォルト戦略使用:",{handType:v(e),position:t,stackSize:s,gtoAction:m,frequencies:h,hasCustomRanges:!!o,availableRangeKeys:o?Object.keys(o):[]});let p={correctAction:m,evData:x,frequencies:h,normalizedHandType:l,effectiveStackExplanation:"".concat(s,"スタックでのMTTレンジベース戦略です。"),stackSizeStrategy:"デフォルトMTTレンジ: ".concat(l,"は").concat(m,"が推奨されます。"),icmConsideration:"スタックに余裕があるため標準的な戦略を使用します。",recommendedBetSize:"RAISE"===m?2.5:0,strategicAnalysis:"".concat(s,"戦略: ").concat(l,"は").concat(m,"が推奨されます。"),exploitSuggestion:S(m,t,l)};return console.log("\uD83C\uDFAF simulateMTTGTOData 最終戻り値:",{originalHand:e,finalHandType:l,resultNormalizedHandType:p.normalizedHandType}),p},j=(e,t,s)=>{let n={UTG:"アーリーポジション",UTG1:"アーリーポジション",LJ:"ミドルポジション",HJ:"ミドルポジション",CO:"レイトポジション",BTN:"ボタン（最有利ポジション）",SB:"スモールブラインド",BB:"ビッグブラインド"}[e]||e;return"ALL_IN"===t?"".concat(n,"からの15BBオールインは、フォールドエクイティを最大化する戦略です。").concat("UTG"===e||"UTG1"===e?"アーリーポジションからのオールインは特にタイトなレンジが必要です。":"BTN"===e?"ボタンからのオールインは最も広いレンジで可能です。":"ポジションに応じた適切なレンジでプレイしましょう。"):"MIN"===t?"".concat(n,"からのミニレイズは、スタックを温存しながら主導権を握る戦略です。").concat(s,"BBでは、コミット率が高くなるため慎重に選択しましょう。"):"CALL"===t?"".concat(n,"からのコールは、ポストフロップでの判断を必要とします。15BBでは複雑な判断を避けるため、シンプルなプレイが推奨されます。"):"3BB"===t?"".concat(n,"からの3BBレイズは、ミニレイズよりも強い意思表示です。フォールドエクイティと価値の両方を狙います。"):"".concat(n,"からはフォールドが最適です。15BBという貴重なスタックを温存し、より有利な状況を待ちましょう。")},N=(e,t,s)=>e<=10?"".concat(e,"BBという極めて浅いスタックでは、ICMプレッシャーが最大となります。生存価値を最優先に考え、").concat("ALL_IN"===t?"確実に優位性のあるハンドでのみオールインしましょう。":"リスクを極力避けてプレイしましょう。"):e<=15?"15BBスタックでは中程度のICMプレッシャーがあります。".concat("FOLD"===t?"タイトなプレイで生存を優先しつつ、":"適度なアグレッションを保ちながら、","ペイアウトジャンプを意識したプレイが重要です。"):"スタックに余裕があるため、標準的なICM考慮でプレイできます。ただし、常にトーナメント状況を意識しましょう。",S=(e,t,s)=>"FOLD"===e?"".concat(s,"は").concat(t,"ポジションでは一般的にフォールドですが、対戦相手がタイトな場合は時折ブラフとして利用できる可能性があります。"):"RAISE"===e?"".concat(s,"での").concat(t,"からのレイズは、対戦相手の3ベット頻度に応じて調整しましょう。"):"ALL_IN"===e?"".concat(s,"でのオールインは15BBスタックでは標準的ですが、ICM状況を考慮して調整が必要な場合があります。"):"".concat(s,"は").concat(t,"ポジションで柔軟性のある戦略を要求します。"),C=e=>({UTG:"UTGからのオープンは最もタイトなレンジです。プレミアムハンドと強いブロードウェイを中心とした約9-12%のレンジ。",MP:"MPからのオープンは中程度のレンジです。UTGよりもやや緩く、約12-15%のハンドでオープンします。",CO:"COからのオープンは積極的なレンジです。約22-26%のハンドでオープンし、ポジション利用を重視します。",BTN:"BTNからのオープンは最も広いレンジです。約40-50%のハンドでオープンし、ポジション優位を最大限活用。",SB:"SBからのオープンは特殊な戦略です。BBとヘッズアップになることを考慮した約30-40%のレンジ。"})[e]||"このポジションからのオープンレンジを分析中...",F=(e,t,s,n)=>{if(n<=15){if(["AA","KK","QQ","AKs","AKo"].includes(e))return{frequencies:{FOLD:0,CALL:0,RAISE:0,ALL_IN:100},primaryAction:"ALL_IN",evData:{FOLD:0,CALL:-1,RAISE:1.5,ALL_IN:3.2}};if(["JJ","TT","99","AQs","AQo","AJs"].includes(e))return["UTG","MP"].includes(s)?{frequencies:{FOLD:30,CALL:20,RAISE:0,ALL_IN:50},primaryAction:"ALL_IN",evData:{FOLD:0,CALL:.8,RAISE:1.2,ALL_IN:2.5}}:{frequencies:{FOLD:10,CALL:30,RAISE:0,ALL_IN:60},primaryAction:"ALL_IN",evData:{FOLD:0,CALL:1,RAISE:1.5,ALL_IN:2.8}};if(["88","77","66","ATo","KQs","KQo"].includes(e))return{frequencies:{FOLD:60,CALL:25,RAISE:0,ALL_IN:15},primaryAction:"FOLD",evData:{FOLD:0,CALL:.3,RAISE:.8,ALL_IN:1.8}}}return{frequencies:{FOLD:100,CALL:0,RAISE:0,ALL_IN:0},primaryAction:"FOLD",evData:{FOLD:0,CALL:-1.5,RAISE:-2,ALL_IN:-2.5}}},w=(e,t,s,n)=>{let o="".concat(t,"のオープンに対して").concat(e,"ポジションから");return"ALL_IN"===s?"".concat(o,"のオールインは15BBスタックでは標準的な戦略です。ICM圧力を考慮して調整してください。"):"CALL"===s?"".concat(o,"のコールは、フロップでの戦略を事前に計画しておくことが重要です。"):"FOLD"===s?"".concat(o,"のフォールドは、オープンレイザーのレンジに対して適切な判断です。"):"".concat(o,"の戦略は、相手のレンジとポジション優位を考慮して決定されています。")};function I(){var e,t,s,a,l;let c,i;(0,r.useRouter)();let j=(0,r.useSearchParams)(),{isAdmin:N,token:S,user:C,logout:F,loading:w}=(0,m.A)(),{canPractice:I,practiceCount:O,maxPracticeCount:k,incrementPracticeCount:T}=(0,p.a)(),_=j.get("stack")||"75BB",R=j.get("position")||"BTN",E=j.get("action")||"openraise",z=j.get("hands")||"",q=z?decodeURIComponent(z).split(",").filter(e=>""!==e.trim()):[],H=j.get("opener")||j.get("threebetter")||j.get("fourbetter")||null,[M,P]=(0,o.useState)([]),[U,J]=(0,o.useState)(null),[K,W]=(0,o.useState)(!1),[G,Q]=(0,o.useState)(!1),[X,V]=(0,o.useState)(null),[Y,Z]=(0,o.useState)(null),[$,ee]=(0,o.useState)(0),[et,es]=(0,o.useState)(0),[en,eo]=(0,o.useState)(!1),[er,ea]=(0,o.useState)({}),[el,ec]=(0,o.useState)("UTG"),[ei,ed]=(0,o.useState)(!1),[eu,eg]=(0,o.useState)(""),[eh,em]=(0,o.useState)(!1),[ex,eb]=(0,o.useState)(0),[ep,ef]=(0,o.useState)(!1),[eL,ey]=(0,o.useState)("BTN"),[eB,ev]=(0,o.useState)("CO"),[eA,eD]=(0,o.useState)(!1),[ej,eN]=(0,o.useState)(!1),[eS,eC]=(0,o.useState)([]),[eF,ew]=(0,o.useState)(!1),[eI,eO]=(0,o.useState)(!1),[ek,eT]=(0,o.useState)(!1),e_=()=>{if(!Y)return null;let{actionType:e,heroPosition:t,stackDepth:s}=Y;return"open"===e||"openraise"===e?"15BB"===s?t||null:t&&s?"".concat(t,"_").concat(s):null:"vsopen"===e&&Y.openRaiserPosition?"15BB"===s?"vsopen_".concat(t,"_vs_").concat(Y.openRaiserPosition):"vsopen_".concat(t,"_vs_").concat(Y.openRaiserPosition,"_").concat(s):"vs3bet"===e&&Y.threeBetterPosition?"15BB"===s?"vs3bet_".concat(t,"_vs_").concat(Y.threeBetterPosition):"vs3bet_".concat(t,"_vs_").concat(Y.threeBetterPosition,"_").concat(s):null},eR=e=>{let t,s;console.log("\uD83C\uDFB2 ハンド生成デバッグ:",{handType:e});let n=e;if(3===e.length){let t=e[0],s=e[1],o=e[2],r=["2","3","4","5","6","7","8","9","T","J","Q","K","A"];r.indexOf(t)<r.indexOf(s)&&console.log("\uD83D\uDD04 ハンドタイプを正規化:",{original:e,normalized:n=s+t+o})}let o=["s","h","d","c"];if(2===n.length){let e=n[0],r=Math.floor(Math.random()*o.length);t=e+o[r],s=e+o[(r+1+Math.floor(3*Math.random()))%4]}else{if(3!==n.length)return console.log("⚠️ 不正なハンドタイプ:",n),A();let e=n[0],r=n[1],a=n[2];if(console.log("\uD83C\uDFB2 3文字ハンド処理:",{rank1:e,rank2:r,suitType:a}),"s"===a){let n=Math.floor(Math.random()*o.length);t=e+o[n],s=r+o[n]}else{let n=Math.floor(Math.random()*o.length);t=e+o[n],s=r+o[(n+1+Math.floor(3*Math.random()))%4]}}let r=[t,s];return console.log("\uD83C\uDFB2 生成されたハンド:",{originalHandType:e,normalizedHandType:n,result:r,finalNormalized:v(r)}),r},eE=()=>{let e,t,s,n;let o=localStorage.getItem("mtt-custom-ranges"),r=er;if(o)try{let e=JSON.parse(o);Object.keys(e).length>0&&(r=e,JSON.stringify(er)!==JSON.stringify(e)&&(ea(e),console.log("\uD83D\uDD04 シナリオ生成時にカスタムレンジを同期更新")))}catch(e){console.log("最新カスタムレンジ取得エラー:",e)}let a=j.get("hands")?decodeURIComponent(j.get("hands")):null;if(console.log("\uD83D\uDD0D generateNewScenario デバッグ:",{urlHands:a,selectedTrainingHandsLength:eS.length,selectedTrainingHands:eS,customHandsLength:q.length,customHands:q,customRangesCount:Object.keys(er).length,customRangesKeys:Object.keys(er).slice(0,5)}),a){let s=a.split(",").filter(e=>""!==e.trim());if(s.length>0){let n=s[Math.floor(Math.random()*s.length)];e=eR(n),t=n,console.log("\uD83C\uDFAF URLパラメータハンドを維持:",{urlHands:a,selectedHandType:n})}else t=v(e=A())}else if(eS.length>0){let s=eS[Math.floor(Math.random()*eS.length)];e=eR(s),t=s,console.log("✅ selectedTrainingHands使用:",{randomHandType:s,selectedTrainingHands:eS})}else if(q.length>0){let s=q[Math.floor(Math.random()*q.length)];e=eR(s),t=s}else t=v(e=A());if(P(e),"vsopen"===E){let e=j.get("opener");if(e&&B(R,e))s=e;else{let e=y(R);e.length>0&&(s=e[Math.floor(Math.random()*e.length)])}}else if("vs3bet"===E){let e=j.get("threebetter");if(e&&L(e)>L(R)&&(s=e),!s){let e=L(R);if(e<f.length-1){let t=f.slice(e+1);t.length>0&&(s=t[Math.floor(Math.random()*t.length)])}}}else if("vs4bet"===E){let e=j.get("fourbetter");if(e&&L(e)<L(R)&&(s=e),!s){let e=L(R);if(e>0){let t=f.slice(0,e);t.length>0&&(s=t[Math.floor(Math.random()*t.length)])}}}"vs3bet"===E&&"20BB"===_&&(console.log("\uD83C\uDFAF 20BB 3ベットタイプ決定:",{threeBetType:n=.7>Math.random()?"raise":"allin",probability:"raise"===n?"70%":"30%",handType:v(e)}),window.currentThreeBetType=n),console.log("\uD83C\uDFAF シナリオ生成デバッグ:",{newHand:e,handType:t,normalizedHandType:v(e),position:R,stackSize:_,actionType:E,openerPosition:s,threeBetType:n,hasCustomRanges:!!er,customRangesCount:er?Object.keys(er).length:0,customRangesKeys:er?Object.keys(er):[],..."20BB"===_&&{has20BBRanges:er?Object.keys(er).filter(e=>e.includes("20BB")).length:0,has20BBRaiseRanges:er?Object.keys(er).filter(e=>e.includes("20BB")&&e.includes("raise")).length:0,has20BBAllinRanges:er?Object.keys(er).filter(e=>e.includes("20BB")&&e.includes("allin")).length:0,twentyBBRanges:er?Object.keys(er).filter(e=>e.includes("20BB")):[],twentyBBRaiseRanges:er?Object.keys(er).filter(e=>e.includes("20BB")&&e.includes("raise")):[],twentyBBAllinRanges:er?Object.keys(er).filter(e=>e.includes("20BB")&&e.includes("allin")):[]},..."20BB"!==_&&{vs3betRangeKey:"vs3bet_".concat(R,"_vs_").concat(s,"_").concat(_),hasVs3betRange:!!(er&&er["vs3bet_".concat(R,"_vs_").concat(s,"_").concat(_)]),vs3betRangeData:er&&er["vs3bet_".concat(R,"_vs_").concat(s,"_").concat(_)]?Object.keys(er["vs3bet_".concat(R,"_vs_").concat(s,"_").concat(_)]):[]}});let l=D(e,R,_,E,r,s,n);console.log("\uD83C\uDFAF setGtoData直前:",{newHand:e,dataNormalizedHandType:l.normalizedHandType,dataFrequencies:l.frequencies,dataCorrectAction:l.correctAction,customRangesKeys:Object.keys(er),customRangesCount:Object.keys(er).length,isCustomRangeUsed:null==l?void 0:l.isCustomRange}),V(l);let c=l.recommendedBetSize,i=1.5,d="vs4bet"===E?30:2,u=6.3,g=0;if("SB"===R?g=-.5:"BB"===R&&(g=-1),"20BB"===_){if("openraise"===E)d=2.1,i=2.5;else if("vsopen"===E)i=(d=2.1)+1.5+1;else if("vs3bet"===E){d=2.1;let e=window.currentThreeBetType;console.log("\uD83C\uDFAF 20BB vs3bet 3ベットタイプ確認:",{currentThreeBetType:e,openerPosition:s}),"allin"===e?(u=20,console.log("\uD83C\uDFAF 20BB vs3bet オールイン設定:",{threeBetSize:20})):console.log("\uD83C\uDFAF 20BB vs3bet レイズ設定:",{threeBetSize:u="SB"===s?5.5:"BB"===s?6:5,openerPosition:s}),console.log("\uD83C\uDFAF 20BB vs3bet threeBetSize設定: ".concat(u," (").concat(s,")")),i="SB"===s?d+u+1+1:"BB"===s?d+u+.5+1:d+u+.5+1+1,"allin"===e&&console.log("\uD83C\uDFAF 20BB vs3bet オールインポット調整:",{originalPotSize:i,threeBetSize:u,actionType:"allin"}),i+=g,console.log("\uD83C\uDFAF 20BB vs3ベットポット計算:",{openerPosition:s,openRaiseSize:d,threeBetSize:u,sbInPot:"SB"===s?0:.5,bbInPot:"BB"===s?0:1,ante:1,total:i=Math.round(10*i)/10}),console.log("\uD83C\uDFAF 20BB vs3ベット最終ポットサイズ: ".concat(i,"BB (Ante含む)"));let t="SB"===s?d+u+1+1:"BB"===s?d+u+.5+1:d+u+.5+1+1;console.log("\uD83C\uDFAF 20BB vs3ベット期待ポットサイズ: ".concat(t,"BB (計算: ").concat(d," + ").concat(u," + ").concat("SB"===s?"1":"BB"===s?"0.5":"0.5+1"," + 1)"))}else"vs4bet"===E&&(console.log("\uD83C\uDFAF 20BB vs4ベット計算開始:",{stackSize:_,position:R,actionType:E}),i=Math.round(10*(i=("SB"===R?26:"BB"===R?26.5:27.5)+g))/10,console.log("\uD83C\uDFAF 20BB vs4ベットポット計算:",{stackSize:_,heroPosition:R,threeBetChip:5,fourBetChip:20,smallBlindChip:"SB"===R?0:.5,ante:1,total:i}))}else"30BB"===_?"openraise"===E?(d=2.1,i=2.5):"vsopen"===E?i=(d=2.1)+1.5+1:"vs3bet"===E?(d=2.1,u="SB"===s?7.5:"BB"===s?8.2:6.3,i=Math.round(10*(i=("SB"===s?d+u+1:"BB"===s?d+u+1:d+u+.5+1)+g))/10,console.log("\uD83C\uDFAF 30BB vs3ベットポット計算:",{openerPosition:s,openRaiseSize:d,threeBetSize:u,sbRemaining:"SB"===s?0:.5,bbRemaining:"BB"===s?0:1,ante:1,total:i})):"vs4bet"===E&&(console.log("\uD83C\uDFAF vs4ベット計算開始:",{stackSize:_,position:R,actionType:E}),"SB"===R?i=37.3:"BB"===R?(console.log("\uD83C\uDFAF BBの場合の計算:",{stackSize:_,position:R}),console.log("\uD83C\uDFAF BB計算結果:",{calculation:"6.3 + 30 + 0.5 + 1",result:i=37.8})):i=38.8,i+=g,i=Math.round(10*i)/10,console.log("\uD83C\uDFAF ".concat(_," vs4ベットポット計算:"),{stackSize:_,heroPosition:R,threeBetChip:6.3,fourBetChip:30,smallBlindChip:"SB"===R?0:.5,ante:1,total:i})):"40BB"===_?"openraise"===E?(d=2.1,i=2.5):"vsopen"===E?i=(d=2.1)+1.5+1:"vs3bet"===E?(d=2.1,u="SB"===s?7.5:"BB"===s?8.2:6.3,i=Math.round(10*(i=("SB"===s?d+u+1:"BB"===s?d+u+1:2.5+d+u)+g))/10,console.log("\uD83C\uDFAF 40BB vs3ベットポット計算:",{openerPosition:s,openRaiseSize:d,threeBetSize:u,sbRemaining:"SB"===s?0:.5,bbRemaining:"BB"===s?0:1,ante:1,total:i})):"vs4bet"===E&&(console.log("\uD83C\uDFAF 40BB vs4ベット計算開始:",{stackSize:_,position:R,actionType:E}),"SB"===R?i=37.3:"BB"===R?(console.log("\uD83C\uDFAF 40BB BBの場合の計算:",{stackSize:_,position:R}),console.log("\uD83C\uDFAF 40BB BB計算結果:",{calculation:"6.3 + 30 + 0.5 + 1",result:i=37.8})):i=38.8,i+=g,i=Math.round(10*i)/10,console.log("\uD83C\uDFAF ".concat(_," vs4ベットポット計算:"),{stackSize:_,heroPosition:R,threeBetChip:6.3,fourBetChip:30,smallBlindChip:"SB"===R?0:.5,ante:1,total:i})):"vsopen"===E&&"BTN"===s&&"15BB"===_?i=(d=1)+1+1:"vsopen"===E&&"SB"===s&&"15BB"===_?i=(d=1)+1+1:"vsopen"===E?i=d+1.5+1:"openraise"===E?i=2.5:"vs3bet"===E?"15BB"===_?("SB"===s?console.log("\uD83C\uDFAF vs3bet 15BB SB 3ベッター計算:",{stackSize:_,threeBetterPosition:s,calculation:"1 + 1 + 2 + 15",potSize:i=19}):"BB"===s?console.log("\uD83C\uDFAF vs3bet 15BB BB 3ベッター計算:",{stackSize:_,threeBetterPosition:s,calculation:"0.5 + 1 + 2 + 15",potSize:i=18.5}):console.log("\uD83C\uDFAF vs3bet 15BB その他 3ベッター計算:",{stackSize:_,threeBetterPosition:s,calculation:"0.5 + 1 + 1 + 2 + 15",potSize:i=19.5}),i+=g):"40BB"===_?("SB"===s?console.log("\uD83C\uDFAF vs3bet 40BB SB 3ベッター計算:",{stackSize:_,threeBetterPosition:s,calculation:"1 + 1 + 2.1 + 7.5",potSize:i=11.6}):"BB"===s?console.log("\uD83C\uDFAF vs3bet 40BB BB 3ベッター計算:",{stackSize:_,threeBetterPosition:s,calculation:"0.5 + 1 + 2.1 + 8.2",potSize:i=3.6+8.2}):console.log("\uD83C\uDFAF vs3bet 40BB その他 3ベッター計算:",{stackSize:_,threeBetterPosition:s,calculation:"0.5 + 1 + 1 + 2.1 + 6.3",potSize:i=10.899999999999999}),i=Math.round(10*i)/10):"SB"===s?console.log("\uD83C\uDFAF vs3bet SB 3ベッター計算:",{stackSize:_,threeBetterPosition:s,calculation:"1 + 1 + 2 + 15",potSize:i=19}):"BB"===s?console.log("\uD83C\uDFAF vs3bet BB 3ベッター計算:",{stackSize:_,threeBetterPosition:s,calculation:"0.5 + 1 + 2 + 15",potSize:i=18.5}):console.log("\uD83C\uDFAF vs3bet その他 3ベッター計算:",{stackSize:_,threeBetterPosition:s,calculation:"0.5 + 1 + 1 + 2 + 15",potSize:i=19.5}):"vs4bet"===E?(console.log("\uD83C\uDFAF vs4ベット計算開始（その他）:",{stackSize:_,position:R,actionType:E}),"40BB"===_?"SB"===R?i=38.3:"BB"===R?(console.log("\uD83C\uDFAF 40BB BBの場合の計算（その他）:",{stackSize:_,position:R}),console.log("\uD83C\uDFAF 40BB BB計算結果（その他）:",{calculation:"6.3 + 30 + 0.5 + 1 - 1",result:i=37.8})):i=38.8:"SB"===R?i=38.3:"BB"===R?(console.log("\uD83C\uDFAF BBの場合の計算（その他）:",{stackSize:_,position:R}),console.log("\uD83C\uDFAF BB計算結果（その他）:",{calculation:"6.3 + 30 + 0.5 + 1 - 1",result:i=37.8})):i=38.8,i=Math.round(10*i)/10,console.log("\uD83C\uDFAF ".concat(_," vs4ベットポット計算（その他）:"),{stackSize:_,heroPosition:R,threeBetChip:6.3,fourBetChip:30,smallBlindChip:"SB"===R?0:.5,ante:1,total:i})):"vs5bet"===E&&(i=71);console.log("\uD83C\uDFAF スポット作成開始:",{actionType:E,stackSize:_,position:R,openerPosition:s,newHand:e,dataCorrectAction:l.correctAction,dataFrequencies:l.frequencies,dataIsCustomRange:l.isCustomRange,dataNormalizedHandType:l.normalizedHandType});let h={id:Math.random().toString(),description:"エフェクティブスタック:".concat(_," - ").concat("openraise"===E?"30BB"===_?"オープンレイズ(2.1BB)":"オープンレイズ":"vsopen"===E?"BTN"===s&&"15BB"===_?"vs ".concat(s||"UTG","のリンプ(1BB)"):"30BB"===_?"vs ".concat(s||"UTG","のオープン(2.1BB)"):"vs ".concat(s||"UTG","のオープン(2.5BB)"):"vs3bet"===E?"20BB"===_&&s&&window.currentThreeBetType?"vs ".concat(s,"の3ベット(").concat("allin"===window.currentThreeBetType?"オールイン":"".concat(u,"BB"),")"):"30BB"===_&&s?"vs ".concat(s,"の3ベット(").concat(u,"BB)"):"vs 3ベット":"vs4bet"===E?"vs 4ベット":"vs5bet"===E?"vs 5ベット":"ランダム"),heroPosition:R,heroHand:e,potSize:i,..."vs3bet"===E&&{_debug:{actionType:E,stackSize:_,openRaiseSize:d,threeBetSize:u,calculatedPotSize:i,expectedPotSize:d+u+.5+1}},correctAction:l.correctAction,evData:l.evData,frequencies:l.frequencies,correctBetSize:c,stackDepth:_,actionType:E,openRaiserPosition:"vs3bet"===E?R:s,openRaiseSize:d,threeBetSize:(()=>{if("vs3bet"===E||"vs4bet"===E)return"vs3bet"===E&&"15BB"===_?(console.log("\uD83C\uDFAF 15BB 3ベットサイズ設定: 15"),15):"vs3bet"!==E||"20BB"!==_?(console.log("\uD83C\uDFAF その他 3ベットサイズ設定: ".concat(u)),u):"allin"===window.currentThreeBetType?(console.log("\uD83C\uDFAF 20BB 3ベットサイズ設定: オールイン"),20):(console.log("\uD83C\uDFAF 20BB 3ベットサイズ設定: 5"),5);console.log("\uD83C\uDFAF 3ベットサイズ設定なし: undefined")})(),threeBetterPosition:"vs3bet"===E?s:"vs4bet"===E?R:void 0,threeBetType:"vs3bet"===E&&"20BB"===_?window.currentThreeBetType:void 0,positions:(()=>{var e;let t=parseInt(_),n=t;if("vs3bet"===E&&s){if("15BB"===_)n=0;else if("20BB"===_){let e;"allin"===window.currentThreeBetType?(e=20,n=0,console.log("\uD83C\uDFAF 20BB オールイン 3ベッター: スタック = 0 (オールイン完了)")):(e="SB"===s?5.5:"BB"===s?6:5,console.log("\uD83C\uDFAF 20BB 3ベッタースタック計算開始: threeBetAmount=".concat(e," (").concat(s,")")),"SB"===s?(n=19.5-e,console.log("\uD83C\uDFAF 20BB SB 3ベッター: 20 - 0.5 - ".concat(e," = ").concat(n))):"BB"===s?(n=20-e,console.log("\uD83C\uDFAF 20BB BB 3ベッター: 20 - ".concat(e," = ").concat(n))):(n=20-e,console.log("\uD83C\uDFAF 20BB その他 3ベッター: 20 - ".concat(e," = ").concat(n))))}else"30BB"===_&&(n="SB"===s?29.5-u:"BB"===s?29-u:30-u)}let o={UTG:{active:!0,stack:"UTG"===s?n:t,isHero:"UTG"===R},UTG1:{active:!0,stack:"UTG1"===s?n:t,isHero:"UTG1"===R},LJ:{active:!0,stack:"LJ"===s?n:t,isHero:"LJ"===R},HJ:{active:!0,stack:"HJ"===s?n:t,isHero:"HJ"===R},CO:{active:!0,stack:"CO"===s?n:t,isHero:"CO"===R},BTN:{active:!0,stack:"BTN"===s?n:t,isHero:"BTN"===R},SB:{active:!0,stack:"SB"===s?n:t-.5,isHero:"SB"===R},BB:{active:!0,stack:"BB"===s?n:t-1,isHero:"BB"===R}};return console.log("\uD83C\uDFAF 根本的実装: actionType=".concat(E,", openerPosition=").concat(s,", threeBetterStack=").concat(n,", threeBetSize=").concat(u,", stackSize=").concat(_)),console.log("\uD83C\uDFAF ".concat(s,"のスタック: ").concat((null===(e=o[s])||void 0===e?void 0:e.stack)||"N/A")),console.log("\uD83C\uDFAF 20BB vs3bet デバッグ: stackSize=".concat(_,", actionType=").concat(E,", threeBetSize=").concat(u,", threeBetterStack=").concat(n)),console.log("\uD83C\uDFAF 20BB vs3bet 詳細デバッグ:",{stackSize:_,actionType:E,threeBetSize:u,threeBetterStack:n,openerPosition:s,stackValue:t,condition:"vs3bet"===E&&s,stackCondition:"20BB"===_}),o})()};if("vs3bet"===E&&"20BB"===_){let e=window.currentThreeBetType;console.log("\uD83C\uDFAF 20BB vs3bet 強制設定開始: threeBetType=".concat(e,", openerPosition=").concat(s)),"allin"===e?(h.threeBetSize=20,console.log("\uD83C\uDFAF 強制設定: newSpot.threeBetSize = 20 (オールイン)"),"SB"===s?h.potSize=24.1:"BB"===s?h.potSize=23.6:h.potSize=24.6):("SB"===s?h.threeBetSize=5.5:"BB"===s?h.threeBetSize=6:h.threeBetSize=5,console.log("\uD83C\uDFAF 強制設定: newSpot.threeBetSize = ".concat(h.threeBetSize," (").concat(s,")")),h.potSize=9.6),h.potSize=Math.round(10*h.potSize)/10,console.log("\uD83C\uDFAF 強制設定: newSpot.potSize = ".concat(h.potSize,"BB (Ante含む, ").concat(s,", ").concat(e,")"))}let m={...h,id:Date.now().toString()};console.log("\uD83C\uDFAF 最終スポット設定:",{spotId:m.id,spotCorrectAction:m.correctAction,spotFrequencies:m.frequencies,heroHand:m.heroHand,actionType:m.actionType,stackSize:m.stackDepth}),V(l),console.log("\uD83C\uDFAF gtoData同期設定:",{gtoDataCorrectAction:l.correctAction,gtoDataFrequencies:l.frequencies,gtoDataIsCustomRange:l.isCustomRange,spotCorrectAction:m.correctAction,spotFrequencies:m.frequencies,dataMatch:l.correctAction===m.correctAction&&JSON.stringify(l.frequencies)===JSON.stringify(m.frequencies),actionMatch:l.correctAction===m.correctAction,frequencyMatch:JSON.stringify(l.frequencies)===JSON.stringify(m.frequencies),dataSource:"simulateMTTGTOData",timestamp:Date.now()}),Z(m),eO(!1),eT(!1)};(0,o.useEffect)(()=>{let e=()=>{eD(window.innerWidth<768)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,o.useEffect)(()=>{if(console.log("\uD83D\uDD04 初期化 useEffect 実行:",{isInitialized:ep,position:R,stackSize:_,actionType:E,customHandsString:z,lastRangeUpdate:ex,customRangesCount:Object.keys(er).length}),!ep){let e=localStorage.getItem("mtt-custom-ranges");if(e)try{let t=JSON.parse(e);if(Object.keys(t).length>0&&0===Object.keys(er).length){console.log("\uD83D\uDD04 カスタムレンジ読み込み待機中 - 初期化を遅延"),ea(t),setTimeout(()=>{eE(),ef(!0)},50);return}}catch(e){console.log("カスタムレンジ確認エラー:",e)}eE(),ef(!0)}},[R,_,E,z,ep,er]),(0,o.useEffect)(()=>{let e=j.get("hands")?decodeURIComponent(j.get("hands")):null;console.log("\uD83D\uDD04 selectedTrainingHands useEffect実行:",{selectedTrainingHandsLength:eS.length,selectedTrainingHands:eS,isInitialized:ep,urlHands:e,willGenerateScenario:eS.length>0&&ep&&!e}),eS.length>0&&ep&&!e&&eE()},[eS,ep,j]),(0,o.useEffect)(()=>{if(Y&&"vs3bet"===Y.actionType&&Y.threeBetterPosition&&Y.positions){let e;console.log("\uD83D\uDD0D useEffect: vs3ベットスタック監視開始"),console.log("\uD83D\uDD0D spot詳細:",{actionType:Y.actionType,threeBetterPosition:Y.threeBetterPosition,stackDepth:Y.stackDepth,threeBetSize:Y.threeBetSize,currentStack:Y.positions[Y.threeBetterPosition].stack}),"15BB"===Y.stackDepth?e=0:"20BB"===Y.stackDepth?"allin"===window.currentThreeBetType?(e=0,console.log("\uD83D\uDD0D 20BB オールイン: expectedStack = 0")):(e="SB"===Y.threeBetterPosition?19.5-(Y.threeBetSize||0):"BB"===Y.threeBetterPosition?19-(Y.threeBetSize||0):20-(Y.threeBetSize||0),console.log("\uD83D\uDD0D 20BB レイズ: expectedStack = ".concat(e))):e="30BB"===Y.stackDepth?"SB"===Y.threeBetterPosition?29.5-(Y.threeBetSize||0):"BB"===Y.threeBetterPosition?29-(Y.threeBetSize||0):30-(Y.threeBetSize||0):30-(Y.threeBetSize||0);let t=Y.positions[Y.threeBetterPosition].stack;if(console.log("\uD83D\uDD0D 計算詳細: stackDepth=".concat(Y.stackDepth,", threeBetSize=").concat(Y.threeBetSize,", threeBetterPosition=").concat(Y.threeBetterPosition,", expectedStack=").concat(e)),t!==e){console.log("\uD83D\uDEA8 スタック不一致を検出: 期待値=".concat(e,", 現在値=").concat(t));let s={...Y,positions:{...Y.positions,[Y.threeBetterPosition]:{...Y.positions[Y.threeBetterPosition],stack:e}}};console.log("\uD83D\uDD27 スタックを修正: ".concat(Y.threeBetterPosition," = ").concat(e)),console.log("\uD83D\uDD27 修正後のspot確認:",{threeBetterPosition:s.threeBetterPosition,stack:s.positions[s.threeBetterPosition].stack}),Z(s)}else console.log("✅ スタックは正しい: ".concat(Y.threeBetterPosition," = ").concat(t))}},[Y]),(0,o.useEffect)(()=>{console.log("\uD83D\uDD04 カスタムレンジ読み込み useEffect 実行:",{lastRangeUpdate:ex,isInitialized:ep});let e=localStorage.getItem("mtt-custom-ranges");if(e)try{let t=JSON.parse(e);if("object"!=typeof t||null===t){console.error("❌ 無効なカスタムレンジデータ: オブジェクトではありません"),localStorage.removeItem("mtt-custom-ranges");return}console.log("\uD83D\uDCC2 localStorageからカスタムレンジを読み込み:",{rangeCount:Object.keys(t).length,rangeKeys:Object.keys(t).slice(0,5),lastRangeUpdate:ex}),ea(e=>(JSON.stringify(e)!==JSON.stringify(t)&&(console.log("\uD83D\uDD04 カスタムレンジが変更されました - 新しいシナリオを生成予定"),setTimeout(()=>{ep&&(console.log("\uD83D\uDD04 カスタムレンジ読み込み後に新しいシナリオを生成"),eE())},100)),t))}catch(e){console.error("カスタムレンジの読み込みに失敗しました:",e)}else console.log("\uD83D\uDCC2 localStorageにカスタムレンジが見つかりません")},[ex,ep]),(0,o.useEffect)(()=>{let e=e=>{if("mtt-custom-ranges"===e.key&&e.newValue){console.log("\uD83D\uDD04 他のタブでカスタムレンジが更新されました");try{let t=JSON.parse(e.newValue);ea(t),eb(Date.now()),console.log("✅ 他のタブからの変更を反映しました")}catch(e){console.error("他のタブからのレンジ更新の反映に失敗:",e)}}};return window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)},[]),(0,o.useEffect)(()=>{let e=async()=>{let e=!localStorage.getItem("mtt-ranges-timestamp");if(e&&console.log("\uD83C\uDFAF 新しい端末での初回アクセスを検出"),console.log("\uD83C\uDFAF カスタムレンジ読み込み開始"),!eF){let e=localStorage.getItem("mtt-custom-ranges");if(localStorage.getItem("mtt-ranges-timestamp"),e)try{let t=JSON.parse(e);Object.keys(t).length>0&&(ea(t),console.log("\uD83C\uDFAF ローカルストレージのデータを一時設定:",{rangeKeys:Object.keys(t),rangeCount:Object.keys(t).length,vsopenKeys:Object.keys(t).filter(e=>e.startsWith("vsopen_")),vs3betKeys:Object.keys(t).filter(e=>e.startsWith("vs3bet_")),vs4betKeys:Object.keys(t).filter(e=>e.startsWith("vs4bet_")),sampleVsopenRange:Object.keys(t).filter(e=>e.startsWith("vsopen_"))[0]?Object.keys(t[Object.keys(t).filter(e=>e.startsWith("vsopen_"))[0]]):null}))}catch(e){console.log("ローカルストレージ解析エラー:",e)}}try{console.log("\uD83C\uDFAF システムAPIからの読み込みを試行");let t=await fetch("/api/mtt-ranges");if(t.ok){let s=await t.json();if(s.ranges&&Object.keys(s.ranges).length>0){let t=localStorage.getItem("mtt-custom-ranges"),n=localStorage.getItem("mtt-ranges-timestamp"),o=!1;if(console.log("\uD83C\uDFAF システムAPIデータ確認:",{systemRangeCount:Object.keys(s.ranges).length,systemLastUpdated:s.lastUpdated,localRangeCount:t?Object.keys(JSON.parse(t)).length:0,localTimestamp:n}),!t||e?(o=!0,console.log("\uD83C\uDFAF ローカルデータがないか初回アクセスのため更新")):!n||s.lastUpdated&&s.lastUpdated>n?(o=!0,console.log("\uD83C\uDFAF タイムスタンプが新しいため更新")):Object.keys(s.ranges).length>Object.keys(JSON.parse(t)).length?(o=!0,console.log("\uD83C\uDFAF システムデータの方が多いため更新")):console.log("\uD83C\uDFAF システムデータは最新です"),o){let e=Object.keys(s.ranges).filter(e=>e.startsWith("vs3bet_")&&e.includes("_40BB"));e.forEach(e=>{s.ranges[e].QQ||(console.log("\uD83C\uDFAF システムAPIからQQ設定を復元: ".concat(e)),s.ranges[e].QQ={action:"MIXED",mixedFrequencies:{FOLD:0,CALL:0,MIN:10,ALL_IN:90}})}),ea(s.ranges),localStorage.setItem("mtt-custom-ranges",JSON.stringify(s.ranges)),localStorage.setItem("mtt-ranges-timestamp",s.lastUpdated||new Date().toISOString()),console.log("✅ システムAPIからレンジデータを自動同期しました（QQ復元済み）"),console.log("\uD83C\uDFAF システムAPIレンジ詳細:",{rangeKeys:Object.keys(s.ranges),rangeCount:Object.keys(s.ranges).length,qqRestored:e.filter(e=>s.ranges[e].QQ).length,sampleRange:Object.keys(s.ranges)[0]?s.ranges[Object.keys(s.ranges)[0]]:null});return}console.log("\uD83D\uDCCB システムレンジは最新です")}else console.log("❌ システムAPIにレンジデータがありません")}else console.log("❌ システムAPIからの読み込みに失敗:",t.status,t.statusText);console.log("❌ APIからの読み込みに失敗しました。ローカルデータまたはファイルデータを使用します。"),console.log("ローカルデータがないため、データファイルから読み込みます...");let s=await fetch("/data/mtt-ranges.json");if(s.ok){let e=await s.json();if(e.ranges&&Object.keys(e.ranges).length>0){let t=localStorage.getItem("mtt-custom-ranges"),s=localStorage.getItem("mtt-ranges-timestamp"),n=!1;if(t?!s||e.lastUpdated&&e.lastUpdated>s?n=!0:Object.keys(e.ranges).length>Object.keys(JSON.parse(t)).length&&(n=!0):n=!0,n){let t=Object.keys(e.ranges).filter(e=>e.startsWith("vs3bet_")&&e.includes("_40BB"));t.forEach(t=>{e.ranges[t].QQ||(console.log("\uD83C\uDFAF ファイルからQQ設定を復元: ".concat(t)),e.ranges[t].QQ={action:"MIXED",mixedFrequencies:{FOLD:0,CALL:0,RAISE:10,ALL_IN:90}})}),ea(e.ranges),localStorage.setItem("mtt-custom-ranges",JSON.stringify(e.ranges)),localStorage.setItem("mtt-ranges-timestamp",e.lastUpdated||new Date().toISOString()),console.log("✅ データファイルからレンジデータを自動同期しました（QQ復元済み、".concat(Object.keys(e.ranges).length,"ポジション）")),console.log("\uD83C\uDFAF ファイルレンジ詳細:",{rangeKeys:Object.keys(e.ranges),rangeCount:Object.keys(e.ranges).length,qqRestored:t.filter(t=>e.ranges[t].QQ).length,sampleRange:Object.keys(e.ranges)[0]?e.ranges[Object.keys(e.ranges)[0]]:null})}else console.log("\uD83D\uDCCB ファイルレンジは最新です")}}}catch(t){console.log("自動レンジ読み込みエラー:",t.message);let e=localStorage.getItem("mtt-custom-ranges");if(e)try{let t=JSON.parse(e),s=Object.keys(t).filter(e=>e.startsWith("vs3bet_")&&e.includes("_40BB"));s.forEach(e=>{t[e].QQ||(console.log("\uD83C\uDFAF QQ設定を復元: ".concat(e)),t[e].QQ={action:"MIXED",mixedFrequencies:{FOLD:0,CALL:0,RAISE:10,ALL_IN:90}})}),ea(t),console.log("\uD83C\uDFAF ローカルストレージからレンジ読み込み（QQ復元済み）:",{rangeKeys:Object.keys(t),hasVs3betRange:!!t.vs3bet_HJ_vs_CO_40BB,vs3betRangeData:t.vs3bet_HJ_vs_CO_40BB?Object.keys(t.vs3bet_HJ_vs_CO_40BB):[],qqRestored:s.filter(e=>t[e].QQ).length})}catch(e){console.log("ローカルストレージ解析エラー:",e)}else{console.log("緊急フォールバック: 基本レンジを設定します");let e={vs3bet_HJ_vs_CO_40BB:{QQ:{action:"MIXED",frequency:100,mixedFrequencies:{FOLD:0,CALL:0,MIN:10,ALL_IN:90}}},vs3bet_UTG1_vs_SB_40BB:{QQ:{action:"MIXED",frequency:100,mixedFrequencies:{FOLD:0,CALL:0,MIN:10,ALL_IN:90}}},vs3bet_LJ_vs_BB_40BB:{QQ:{action:"MIXED",frequency:100,mixedFrequencies:{FOLD:0,CALL:0,MIN:10,ALL_IN:90}}}};ea(e),console.log("\uD83C\uDFAF 緊急フォールバックレンジ設定:",e)}}};e(),console.log("\uD83C\uDFAF カスタムレンジ読み込み状況確認:",{hasCustomRanges:!!er,customRangesKeys:er?Object.keys(er):[],customRangesCount:er?Object.keys(er).length:0,localStorageRanges:localStorage.getItem("mtt-custom-ranges")?"存在":"なし",localStorageTimestamp:localStorage.getItem("mtt-ranges-timestamp")||"なし",vs3betKeys:er?Object.keys(er).filter(e=>e.startsWith("vs3bet_")):[],vs3betCount:er?Object.keys(er).filter(e=>e.startsWith("vs3bet_")).length:0}),console.log("\uD83C\uDFAF カスタムレンジ変更監視開始:",{currentRanges:Object.keys(er),currentCount:Object.keys(er).length});let t=setInterval(()=>{if(eF){console.log("保存中のため、自動更新をスキップします");return}let t=localStorage.getItem("mtt-ranges-timestamp");if(t&&Date.now()-new Date(t).getTime()<3e4){console.log("保存直後のため、自動更新をスキップします");return}e()},3e4);return()=>clearInterval(t)},[]),(0,o.useEffect)(()=>{Object.keys(er).length>0&&console.log("\uD83C\uDFAF カスタムレンジ変更検出:",{rangeKeys:Object.keys(er),rangeCount:Object.keys(er).length,timestamp:new Date().toISOString()})},[er]),(0,o.useEffect)(()=>{let e=e=>{if("mtt-custom-ranges"===e.key&&e.newValue)try{let t=JSON.parse(e.newValue);console.log("\uD83D\uDCC2 他のタブからカスタムレンジ更新を検知:",t),ea(t),eb(Date.now())}catch(e){console.error("ストレージ変更の解析に失敗しました:",e)}};return window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)},[]),(0,o.useEffect)(()=>{let e=()=>{let e=localStorage.getItem("mtt-custom-ranges");if(e&&Object.keys(JSON.parse(e)).length>0)try{let t=new Date().toISOString().replace(/[:.]/g,"-"),s="mtt-custom-ranges-auto-backup-".concat(t);localStorage.setItem(s,e);let n=Object.keys(localStorage).filter(e=>e.startsWith("mtt-custom-ranges-auto-backup-")).sort().reverse();n.length>5&&n.slice(5).forEach(e=>{localStorage.removeItem(e),console.log("\uD83D\uDDD1️ 古い自動バックアップを削除:",e)}),console.log("\uD83D\uDCBE 自動バックアップを作成:",s)}catch(e){console.error("自動バックアップ作成に失敗:",e)}};e();let t=setInterval(e,36e5);return()=>clearInterval(t)},[]);let ez=e=>{try{if(!e||"object"!=typeof e)return console.error("レンジデータが無効です: データがオブジェクトではありません"),!1;for(let[t,s]of Object.entries(e)){if(!s||"object"!=typeof s)return console.error("レンジデータが無効です: ".concat(t,"のデータが無効です")),!1;if("string"!=typeof s.action||"number"!=typeof s.frequency||s.frequency<0||s.frequency>100)return console.error("レンジデータが無効です: ".concat(t,"のaction(").concat(s.action,")またはfrequency(").concat(s.frequency,")が無効です")),!1}return!0}catch(e){return console.error("レンジデータのバリデーション中にエラーが発生しました:",e),!1}},eq=async(e,t)=>{if(!ez(t)){console.error("❌ レンジデータのバリデーションに失敗しました"),ew(!1);return}console.log("\uD83C\uDFAF 保存開始:",{position:e,rangeDataKeys:Object.keys(t),rangeDataSize:Object.keys(t).length,is20BB:e.includes("20BB"),threeBetType:e.includes("raise")?"raise":e.includes("allin")?"allin":"none"}),ew(!0);let s={...er,[e]:t};if(e.endsWith("_15BB")){let n=e.replace("_15BB","");s[n]=t,console.log("15BB互換性: 既存レンジキーも更新",{basePosition:n,position:e})}else if(e.includes("vsopen_")&&e.endsWith("_15BB")){let n=e.replace("_15BB","");s[n]=t,console.log("15BB互換性: 既存vsオープンレンジキーも更新",{baseVsOpenKey:n,position:e})}else if(e.includes("vsopen_")&&!e.includes("_15BB")&&"15BB"===_){let n="".concat(e,"_15BB");s[n]=t,console.log("15BB互換性: 新しいvsオープンレンジキーも更新",{newVsOpenKey:n,position:e})}else if(e.startsWith("vs3bet_")&&e.endsWith("_15BB")){let n=e.replace("_15BB","");s[n]=t,console.log("15BB互換性: 既存vs3ベットレンジキーも更新",{baseVs3BetKey:n,position:e})}else if(e.startsWith("vs4bet_")&&e.endsWith("_15BB")){let n=e.replace("_15BB","");s[n]=t,console.log("15BB互換性: 既存vs4ベットレンジキーも更新",{baseVs4BetKey:n,position:e})}else if(!e.includes("_")&&!e.startsWith("vsopen_")&&"15BB"!==_){let n="".concat(e,"_").concat(_);s[n]=t,delete s[e],console.log("スタック固有レンジ保存",{position:e,stackSpecificKey:n})}ea(s),eb(Date.now());try{let n=JSON.stringify(s);n.length>5242880&&console.warn("⚠️ データサイズが大きすぎます:",n.length,"bytes"),localStorage.setItem("mtt-custom-ranges",n),localStorage.setItem("mtt-ranges-timestamp",new Date().toISOString()),console.log("✅ ".concat(e,"ポジションのカスタムレンジを保存しました")),console.log("\uD83C\uDFAF 保存詳細:",{position:e,rangeKeys:Object.keys(s),savedRangeKeys:Object.keys(t),localStorageSize:JSON.stringify(s).length,timestamp:new Date().toISOString(),has20BBRanges:Object.keys(s).filter(e=>e.includes("20BB")).length,twentyBBRanges:Object.keys(s).filter(e=>e.includes("20BB")),has20BBRaiseRanges:Object.keys(s).filter(e=>e.includes("20BB")&&e.includes("raise")).length,has20BBAllinRanges:Object.keys(s).filter(e=>e.includes("20BB")&&e.includes("allin")).length,twentyBBRaiseRanges:Object.keys(s).filter(e=>e.includes("20BB")&&e.includes("raise")),twentyBBAllinRanges:Object.keys(s).filter(e=>e.includes("20BB")&&e.includes("allin"))}),setTimeout(()=>{ew(!1),console.log("\uD83C\uDFAF 保存フラグをリセットしました")},2e3)}catch(e){console.error("❌ カスタムレンジの保存に失敗しました:",e),ew(!1)}if(N&&S)try{let e=await fetch("/api/mtt-ranges",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(S)},body:JSON.stringify({ranges:s,metadata:{creator:"MTT Admin System",timestamp:new Date().toISOString()}})});if(e.ok){let t=await e.json();console.log("✅ システム全体に自動保存完了: ".concat(t.metadata.totalPositions,"ポジション、").concat(t.metadata.totalHands,"ハンド"))}else{let t=await e.json();console.error("システム保存エラー:",t.error||"保存に失敗しました")}}catch(e){console.error("システム保存エラー:",e)}},eH=async()=>{if(console.log("\uD83C\uDFAF システム保存開始:",{isAdmin:N,hasToken:!!S,customRangesCount:Object.keys(er).length,sampleRange:Object.keys(er)[0]?er[Object.keys(er)[0]]:null}),!N||!S){alert("❌ 管理者権限が必要です。");return}if(0===Object.keys(er).length){alert("保存するレンジデータがありません。");return}try{let e={ranges:er,metadata:{creator:"MTT Admin System",timestamp:new Date().toISOString()}};console.log("\uD83C\uDFAF リクエストボディ:",e);let t=await fetch("/api/mtt-ranges",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(S)},body:JSON.stringify(e)});if(console.log("\uD83C\uDFAF レスポンス:",{status:t.status,statusText:t.statusText,ok:t.ok}),t.ok){let e=await t.json();console.log("\uD83C\uDFAF システム保存完了（ローカルストレージは保持）:",{savedRangeKeys:Object.keys(er),savedRangeCount:Object.keys(er).length,systemMetadata:e.metadata}),alert("✅ システム全体に保存完了！\n".concat(e.metadata.totalPositions,"ポジション、").concat(e.metadata.totalHands,"ハンドを保存しました。\n（ローカルデータは保持されます）"))}else{let e=await t.json();throw console.error("\uD83C\uDFAF エラーレスポンス:",e),Error(e.error||"保存に失敗しました")}}catch(e){console.error("システム保存エラー:",e),alert("❌ システムへの保存に失敗しました: ".concat(e.message))}},eM=async()=>{if(!N||!S){alert("❌ 管理者権限が必要です。");return}try{console.log("\uD83C\uDFAF システム読み込み開始（強制同期）");let e=await fetch("/api/mtt-ranges",{headers:{Authorization:"Bearer ".concat(S)}});if(console.log("\uD83C\uDFAF システム読み込みレスポンス:",{status:e.status,statusText:e.statusText,ok:e.ok,headers:Object.fromEntries(e.headers.entries())}),e.ok){let t=await e.json();console.log("\uD83C\uDFAF システムデータ詳細:",{hasRanges:!!t.ranges,rangesType:typeof t.ranges,rangesKeys:t.ranges?Object.keys(t.ranges):[],rangesCount:t.ranges?Object.keys(t.ranges).length:0,metadata:t.metadata,lastUpdated:t.lastUpdated,version:t.version}),t.ranges&&Object.keys(t.ranges).length>0?confirm("システムデータを読み込みますか？\n".concat(t.metadata.totalPositions,"ポジション、").concat(t.metadata.totalHands,"ハンドが存在します。\n現在のローカルデータは上書きされます。"))&&(localStorage.removeItem("mtt-custom-ranges"),localStorage.removeItem("mtt-ranges-timestamp"),ea(t.ranges),localStorage.setItem("mtt-custom-ranges",JSON.stringify(t.ranges)),localStorage.setItem("mtt-ranges-timestamp",t.lastUpdated||new Date().toISOString()),eb(Date.now()),console.log("\uD83C\uDFAF システムデータ読み込み後のlastRangeUpdate更新:",{newTimestamp:Date.now(),systemRangeCount:Object.keys(t.ranges).length}),console.log("\uD83C\uDFAF システムデータを読み込み完了:",{systemRangeKeys:Object.keys(t.ranges),systemRangeCount:Object.keys(t.ranges).length,localStorageUpdated:!0,lastRangeUpdate:Date.now()}),setTimeout(()=>{let e=localStorage.getItem("mtt-custom-ranges");console.log("\uD83C\uDFAF 読み込み後1秒の状態確認:",{localStorageRanges:e?"存在":"なし",customRangesState:Object.keys(er).length,lastRangeUpdate:ex})},1e3),alert("✅ システムデータを正常に読み込みました！\n\n\uD83D\uDCBE ローカルストレージにも保存されました。")):alert("❌ システムに保存されたレンジデータが見つかりません。")}else{let t=await e.json();throw Error(t.error||"データの読み込みに失敗しました")}}catch(e){console.error("システム読み込みエラー:",e),alert("❌ システムからの読み込みに失敗しました: ".concat(e.message))}},eP=async()=>{if(!N||!S){alert("❌ 管理者権限が必要です。");return}if(confirm("⚠️ システム全体のレンジデータを削除しますか？\nこの操作は全てのユーザーに影響し、取り消せません。"))try{let e=await fetch("/api/mtt-ranges",{method:"DELETE",headers:{Authorization:"Bearer ".concat(S)}});if(e.ok)alert("✅ システム全体のレンジデータを削除しました。");else{let t=await e.json();throw Error(t.error||"削除に失敗しました")}}catch(e){console.error("システム削除エラー:",e),alert("❌ システムデータの削除に失敗しました: ".concat(e.message))}},eU=e=>{console.log("レンジエディターボタン押下:",e);let t=e;if(e.endsWith("_15BB")){let s=e.replace("_15BB","");er[s]&&!er[e]&&(t=s,console.log("15BB互換性: 既存レンジキーを使用",{basePosition:s,targetPosition:t}))}else if(e.startsWith("vsopen_")&&e.endsWith("_15BB")){let s=e.replace("_15BB","");er[s]&&!er[e]&&(t=s,console.log("15BB互換性: 既存vsオープンレンジキーを使用",{baseVsOpenKey:s,targetPosition:t}))}else if(e.startsWith("vsopen_")&&!e.includes("_15BB")&&"15BB"===_){let s="".concat(e,"_15BB");er[s]&&!er[e]&&(t=s,console.log("15BB互換性: 新しいvsオープンレンジキーを使用",{newVsOpenKey:s,targetPosition:t}))}else if(e.startsWith("vs3bet_")&&e.endsWith("_15BB")){let s=e.replace("_15BB","");er[s]&&!er[e]&&(t=s,console.log("15BB互換性: 既存vs3ベットレンジキーを使用",{baseVs3BetKey:s,targetPosition:t}))}else if(e.startsWith("vs4bet_")&&e.endsWith("_15BB")){let s=e.replace("_15BB","");er[s]&&!er[e]&&(t=s,console.log("15BB互換性: 既存vs4ベットレンジキーを使用",{baseVs4BetKey:s,targetPosition:t}))}ec(t),eo(!0),setTimeout(()=>{console.log("showRangeEditor:",en,"selectedEditPosition:",t)},100)},eJ=e=>{var t,s,n;J(e);let o=e.split(" ")[0],r=(null==X?void 0:null===(t=X.correctAction)||void 0===t?void 0:t.split(" ")[0])||"";if("NONE"===r){console.log("\uD83C\uDFAF NONEアクション検出:",{selectedAction:e,correctAction:r,message:"このハンドはアクションが設定されていません"}),Q(!0),W(!1);return}let a="MIN"===r?"RAISE":r,l=o===a;if(console.log("\uD83C\uDFAF 頻度判定開始:",{action:e,frequencies:null==X?void 0:X.frequencies,frequencyKeys:(null==X?void 0:X.frequencies)?Object.keys(X.frequencies):[],hasAction:null!=X&&!!X.frequencies&&e in X.frequencies,isCustomRange:null==X?void 0:X.isCustomRange}),(null==X?void 0:X.frequencies)&&e in X.frequencies){let t=X.frequencies[e];(null==X?void 0:X.isCustomRange)?(console.log("\uD83C\uDFAF カスタムレンジ判定:",{selectedAction:e,selectedFrequency:t,threshold:10,isCorrect:t>=10}),l=t>=10):l=t>=30||t>=10}else if(null==X?void 0:X.frequencies){let t={ALL_IN:["ALL_IN","ALLIN","ALL-IN"],"ALL IN":["ALL IN","ALL_IN","ALLIN","ALL-IN"],RAISE:["RAISE","MIN"],CALL:["CALL"],FOLD:["FOLD"]}[e]||[e],s=0;for(let n of(console.log("\uD83C\uDFAF オールインアクション変形検索:",{originalAction:e,variants:t,availableKeys:Object.keys(X.frequencies),isCustomRange:null==X?void 0:X.isCustomRange}),t))if(n in X.frequencies){s=X.frequencies[n],console.log("\uD83C\uDFAF アクション変形発見:",{action:e,variant:n,frequency:s});break}if(("ALL_IN"===e||"ALL IN"===e)&&0===s){let t=Object.keys(X.frequencies).filter(e=>e.toUpperCase().includes("ALL")||e.toUpperCase().includes("ALLIN"));t.length>0?(s=X.frequencies[t[0]],t[0],console.log("\uD83C\uDFAF オールイン特別検索成功:",{foundKey:t[0],frequency:s,isCustomRange:null==X?void 0:X.isCustomRange})):(null==X?void 0:X.isCustomRange)&&console.log("\uD83D\uDD0D カスタムレンジでオールイン未発見 - 詳細調査:",{action:e,frequencies:X.frequencies,allKeys:Object.keys(X.frequencies)})}s>0?(null==X?void 0:X.isCustomRange)?(console.log("\uD83C\uDFAF カスタムレンジ判定（変形）:",{selectedAction:e,foundFrequency:s,threshold:10,isCorrect:s>=10}),l=s>=10):l=s>=30||s>=10:console.log("\uD83C\uDFAF 頻度情報なし - 基本アクションで判定:",{selectedAction:e,selectedBase:o,correctBase:r,normalizedCorrectBase:a,isCorrect:o===a})}else console.log("\uD83C\uDFAF 頻度情報なし - 基本アクションで判定:",{selectedAction:e,selectedBase:o,correctBase:r,normalizedCorrectBase:a,isCorrect:o===a});console.log("\uD83C\uDFAF アクション選択デバッグ:",{selectedAction:e,selectedBase:o,correctBase:r,normalizedCorrectBase:a,isCorrect:l,isCustomRange:null==X?void 0:X.isCustomRange,frequencies:null==X?void 0:X.frequencies,selectedFrequency:null==X?void 0:null===(s=X.frequencies)||void 0===s?void 0:s[e],correctAction:null==X?void 0:X.correctAction,hasFrequencies:!!(null==X?void 0:X.frequencies),frequencyKeys:(null==X?void 0:X.frequencies)?Object.keys(X.frequencies):[],isAllInAction:"ALL_IN"===e||"ALL IN"===e,allInFrequency:null==X?void 0:null===(n=X.frequencies)||void 0===n?void 0:n.ALL_IN,allInRelatedKeys:(null==X?void 0:X.frequencies)?Object.keys(X.frequencies).filter(e=>e.toUpperCase().includes("ALL")||e.toUpperCase().includes("ALLIN")):[]}),W(l),Q(!0),ee(e=>e+1),l&&es(e=>e+1)},eK=()=>{console.log("\uD83C\uDFAF 次のスポットに進む:",{currentHand:M,currentHandType:v(M),urlHands:j.get("hands")}),T(),J(null),W(!1),Q(!1),eE()},eW=()=>{console.log("\uD83C\uDFAF 同じスポットを繰り返し:",{currentHand:M,currentHandType:v(M),urlHands:j.get("hands")}),J(null),W(!1),Q(!1),Y&&Z({...Y,id:Math.random().toString()})};return Y?(0,n.jsx)(b.a,{children:(0,n.jsxs)("div",{className:"relative",children:[eh&&(0,n.jsx)(x,{onClose:()=>em(!1)}),!I&&(0,n.jsx)("div",{className:"fixed top-4 left-1/2 transform -translate-x-1/2 z-50 bg-red-600 text-white px-6 py-3 rounded-lg shadow-lg border border-red-500",children:(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("span",{className:"text-xl",children:"⚠️"}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"font-semibold",children:"今日の練習上限に達しました"}),(0,n.jsx)("div",{className:"text-sm",children:"プランアップグレードで無制限練習が可能です"})]})]})}),k!==1/0&&(0,n.jsx)("div",{className:"fixed top-4 left-4 z-50 bg-blue-600 text-white px-4 py-2 rounded-lg shadow-lg",children:(0,n.jsxs)("div",{className:"text-sm",children:[(0,n.jsx)("span",{className:"font-semibold",children:"練習回数:"})," ",O,"/",k]})}),(0,n.jsx)("div",{className:"min-h-screen bg-black md:bg-gray-900 text-white p-4",children:(0,n.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,n.jsxs)("div",{className:"mb-4 flex justify-between items-center",children:[(0,n.jsxs)("div",{className:"flex items-center gap-1 md:gap-2 text-xs md:text-sm text-gray-300",children:[(0,n.jsx)("span",{className:"bg-blue-600/20 px-2 md:px-3 py-1 rounded-full border border-blue-500/30",children:_}),(0,n.jsx)("span",{className:"bg-green-600/20 px-2 md:px-3 py-1 rounded-full border border-green-500/30",children:R}),(0,n.jsx)("span",{className:"bg-purple-600/20 px-2 md:px-3 py-1 rounded-full border border-purple-500/30",children:"open"===E||"openraise"===E?"オープンレイズ":"vsopen"===E?"vsオープン":"vs3bet"===E?"vs3ベット":"vs4bet"===E?"vs4ベット":"オープンレイズ"}),("vsopen"===E||"vs3bet"===E||"vs4bet"===E)&&(0,n.jsx)("span",{className:"bg-orange-600/20 px-2 md:px-3 py-1 rounded-full border border-orange-500/30",children:H?"vs".concat(H):"vsランダム"})]}),(0,n.jsxs)(g.default,{href:"/trainer/mtt?".concat(new URLSearchParams({stack:_,position:R,action:E,...q.length>0?{hands:encodeURIComponent(q.join(","))}:{}}).toString()),className:"px-3 md:px-4 py-1 md:py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-xs md:text-sm font-medium transition-colors duration-200 flex items-center gap-1 md:gap-2",children:[(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3 md:h-4 md:w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),(0,n.jsx)("span",{className:"hidden md:inline",children:"戻る"})]})]}),N&&(0,n.jsxs)("div",{className:"bg-gradient-to-r from-purple-900/30 to-blue-900/30 rounded-lg p-3 md:p-4 mb-4 border border-purple-700/50",children:[(0,n.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-3",children:[(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsxs)("h3",{className:"text-base md:text-lg font-semibold text-white mb-1",children:["レンジをカスタマイズ ",(0,n.jsx)("span",{className:"text-xs bg-red-600 px-2 py-1 rounded",children:"管理者限定"})]}),(0,n.jsxs)("p",{className:"text-xs md:text-sm text-gray-300",children:["各ポジションの",_,"オープンレイズレンジを設定できます"]}),(0,n.jsx)("p",{className:"text-xs text-blue-300 mt-1",children:"\uD83D\uDCA1 ハンド形式: K9s, ATo, QQ など（9Ks → K9s に自動変換されます）"}),Object.keys(er).filter(e=>e.endsWith("_".concat(_))||!e.includes("_")).length>0&&(0,n.jsxs)("div",{className:"text-xs text-green-400 mt-1",children:[_,"カスタムレンジ設定済み: ",Object.keys(er).filter(e=>e.endsWith("_".concat(_))||!e.includes("_")&&"15BB"===_).length,"レンジ"]})]}),(0,n.jsx)("div",{className:"flex gap-1 md:gap-2 flex-wrap",children:["UTG","UTG1","LJ","HJ","CO","BTN","SB"].map(e=>{let t="".concat(e,"_").concat(_),s=er[t]||"15BB"===_&&er[e];return(0,n.jsxs)("button",{onClick:()=>eU(t),className:"px-2 md:px-3 py-1.5 md:py-2 rounded-lg text-xs md:text-sm font-semibold transition-all duration-200 ".concat(s?"bg-green-600 hover:bg-green-700 text-white border-2 border-green-400":"bg-purple-600 hover:bg-purple-700 text-white border-2 border-transparent"),title:"".concat(e,"ポジション ").concat(_,"スタックのレンジ設定"),children:[e,s&&" ✓"]},e)})})]}),(0,n.jsxs)("div",{className:"mt-4 pt-4 border-t border-purple-600/30",children:[(0,n.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-3",children:[(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsx)("h4",{className:"text-xs md:text-sm font-semibold text-white mb-1",children:"\uD83D\uDCBE データ永続保存"}),(0,n.jsx)("p",{className:"text-xs text-gray-400",children:"レンジデータをファイルで保存・復元できます（ブラウザに依存しない永続保存）"})]}),(0,n.jsxs)("div",{className:"flex gap-1 md:gap-2 flex-wrap",children:[(0,n.jsxs)("button",{onClick:()=>{try{let e=JSON.stringify(er,null,2),t=new Blob([e],{type:"application/json"}),s=URL.createObjectURL(t),n=document.createElement("a");n.href=s,n.download="mtt-custom-ranges-".concat(new Date().toISOString().split("T")[0],".json"),document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(s)}catch(e){console.error("レンジのエクスポートに失敗しました:",e),alert("エクスポートに失敗しました。")}},disabled:0===Object.keys(er).length,className:"px-2 md:px-3 py-1.5 md:py-2 rounded-lg text-xs font-medium transition-all duration-200 flex items-center gap-1 ".concat(Object.keys(er).length>0?"bg-blue-600 hover:bg-blue-700 text-white border border-blue-500":"bg-gray-600 text-gray-400 cursor-not-allowed border border-gray-500"),children:[(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M9 19l3 3m0 0l3-3m3 3V10"})}),(0,n.jsx)("span",{className:"hidden md:inline",children:"エクスポート"}),(0,n.jsx)("span",{className:"md:hidden",children:"出力"})]}),(0,n.jsxs)("label",{className:"px-2 md:px-3 py-1.5 md:py-2 rounded-lg text-xs font-medium bg-green-600 hover:bg-green-700 text-white border border-green-500 cursor-pointer transition-all duration-200 flex items-center gap-1",children:[(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),(0,n.jsx)("span",{className:"hidden md:inline",children:"インポート"}),(0,n.jsx)("span",{className:"md:hidden",children:"入力"}),(0,n.jsx)("input",{type:"file",accept:".json",onChange:e=>{var t;let s=null===(t=e.target.files)||void 0===t?void 0:t[0];if(!s)return;let n=new FileReader;n.onload=e=>{try{var t;let s=JSON.parse(null===(t=e.target)||void 0===t?void 0:t.result);if("object"==typeof s&&null!==s)ea(s),localStorage.setItem("mtt-custom-ranges",JSON.stringify(s)),eb(Date.now()),alert("レンジを正常にインポートしました。");else throw Error("無効なファイル形式です。")}catch(e){console.error("レンジのインポートに失敗しました:",e),alert("ファイルの読み込みに失敗しました。正しいフォーマットのファイルか確認してください。")}},n.readAsText(s),e.target.value=""},className:"hidden"})]}),(0,n.jsxs)("button",{onClick:()=>{let e=Object.keys(localStorage).filter(e=>e.startsWith("mtt-custom-ranges-backup-")).sort().reverse();if(0===e.length){alert("❌ 利用可能なバックアップが見つかりません。");return}let t=e[0],s=localStorage.getItem(t);if(!s){alert("❌ バックアップデータの読み込みに失敗しました。");return}try{let e=JSON.parse(s);ea(e),localStorage.setItem("mtt-custom-ranges",s),eb(Date.now());let n=Object.keys(e).length;alert("✅ バックアップから復元しました！\n\n\uD83D\uDCCA 復元されたレンジ数: ".concat(n,"\n\uD83D\uDCC5 バックアップ日時: ").concat(t.replace("mtt-custom-ranges-backup-","")))}catch(e){console.error("バックアップ復元エラー:",e),alert("❌ バックアップの復元に失敗しました。")}},className:"px-2 md:px-3 py-1.5 md:py-2 rounded-lg text-xs font-medium bg-blue-600 hover:bg-blue-700 text-white border border-blue-500 transition-all duration-200 flex items-center gap-1",children:[(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),(0,n.jsx)("span",{className:"hidden md:inline",children:"バックアップ復元"}),(0,n.jsx)("span",{className:"md:hidden",children:"復元"})]}),(0,n.jsxs)("button",{onClick:()=>{if(confirm("全てのカスタムレンジを削除しますか？この操作は取り消せません。\n\n⚠️ 注意: この操作は元に戻せません。")){let e=localStorage.getItem("mtt-custom-ranges");if(e)try{let t=new Date().toISOString().replace(/[:.]/g,"-");localStorage.setItem("mtt-custom-ranges-backup-".concat(t),e),console.log("\uD83C\uDFAF 削除前にバックアップを作成:","mtt-custom-ranges-backup-".concat(t))}catch(e){console.error("バックアップ作成に失敗:",e)}ea({}),localStorage.removeItem("mtt-custom-ranges"),eb(Date.now()),alert("全てのカスタムレンジを削除しました。\n\n\uD83D\uDCBE バックアップが自動的に作成されました。")}},disabled:0===Object.keys(er).length,className:"px-2 md:px-3 py-1.5 md:py-2 rounded-lg text-xs font-medium transition-all duration-200 flex items-center gap-1 ".concat(Object.keys(er).length>0?"bg-red-600 hover:bg-red-700 text-white border border-red-500":"bg-gray-600 text-gray-400 cursor-not-allowed border border-gray-500"),children:[(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),(0,n.jsx)("span",{className:"hidden md:inline",children:"全削除"}),(0,n.jsx)("span",{className:"md:hidden",children:"削除"})]})]})]}),N&&(0,n.jsx)("div",{className:"mt-4 pt-3 border-t border-red-600/30 bg-red-900/10 rounded-lg p-3",children:(0,n.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-3",children:[(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsx)("h4",{className:"text-xs md:text-sm font-semibold text-red-300 mb-1 flex items-center",children:"\uD83D\uDD12 管理者専用システム管理"}),(0,n.jsx)("p",{className:"text-xs text-gray-400",children:"重要なシステム - 全てのweb・環境で共有される永続データ保存"})]}),(0,n.jsxs)("div",{className:"flex gap-1 md:gap-2 flex-wrap",children:[(0,n.jsxs)("button",{onClick:eH,disabled:0===Object.keys(er).length,className:"px-2 md:px-3 py-1.5 md:py-2 rounded-lg text-xs font-medium transition-all duration-200 flex items-center gap-1 ".concat(Object.keys(er).length>0?"bg-red-600 hover:bg-red-700 text-white border border-red-500":"bg-gray-600 text-gray-400 cursor-not-allowed border border-gray-500"),children:[(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4"})}),(0,n.jsx)("span",{className:"hidden md:inline",children:"システム保存"}),(0,n.jsx)("span",{className:"md:hidden",children:"保存"})]}),(0,n.jsxs)("button",{onClick:eM,className:"px-2 md:px-3 py-1.5 md:py-2 rounded-lg text-xs font-medium bg-orange-600 hover:bg-orange-700 text-white border border-orange-500 transition-all duration-200 flex items-center gap-1",children:[(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),(0,n.jsx)("span",{className:"hidden md:inline",children:"システム読み込み"}),(0,n.jsx)("span",{className:"md:hidden",children:"読み込み"})]}),(0,n.jsxs)("button",{onClick:()=>{fetch("/data/mtt-ranges.json").then(e=>e.json()).then(e=>{e.ranges?(ea(e.ranges),localStorage.setItem("mtt-custom-ranges",JSON.stringify(e.ranges)),alert("✅ データファイルから読み込み完了！\n".concat(Object.keys(e.ranges).length,"ポジション分のレンジを読み込みました。")),window.location.reload()):alert("❌ データファイルの形式が正しくありません")}).catch(e=>{console.error("データファイル読み込みエラー:",e),alert("❌ データファイルの読み込みに失敗しました: ".concat(e.message))})},className:"px-2 md:px-3 py-1.5 md:py-2 rounded-lg text-xs font-medium bg-green-600 hover:bg-green-700 text-white border border-green-500 transition-all duration-200 flex items-center gap-1",children:[(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),(0,n.jsx)("span",{className:"hidden md:inline",children:"データファイル読み込み"}),(0,n.jsx)("span",{className:"md:hidden",children:"ファイル読み込み"})]}),(0,n.jsxs)("button",{onClick:eP,className:"px-2 md:px-3 py-1.5 md:py-2 rounded-lg text-xs font-medium bg-red-800 hover:bg-red-900 text-white border border-red-700 transition-all duration-200 flex items-center gap-1",children:[(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),(0,n.jsx)("span",{className:"hidden md:inline",children:"システム削除"}),(0,n.jsx)("span",{className:"md:hidden",children:"削除"})]})]})]})})]})]}),N&&"vsopen"===E&&(0,n.jsxs)("div",{className:"bg-gradient-to-r from-green-900/30 to-blue-900/30 rounded-lg p-4 mb-4 border border-green-700/50",children:[(0,n.jsx)("div",{className:"flex items-center justify-between",children:(0,n.jsxs)("div",{children:[(0,n.jsxs)("h3",{className:"text-lg font-semibold text-white mb-1",children:["vs オープンレンジをカスタマイズ (",_,") ",(0,n.jsx)("span",{className:"text-xs bg-red-600 px-2 py-1 rounded",children:"管理者限定"})]}),(0,n.jsxs)("p",{className:"text-sm text-gray-300",children:["現在の",_,"スタックでのヒーローポジションとオープンレイザーの組み合わせでレンジを設定できます"]}),(0,n.jsx)("p",{className:"text-xs text-green-300 mt-1",children:"\uD83D\uDCA1 オープンに対してFOLD/CALL/RAISE/ALL INの頻度を設定します"}),Object.keys(er).filter(e=>e.startsWith("vsopen_")&&e.endsWith("_".concat(_))).length>0&&(0,n.jsxs)("div",{className:"text-xs text-green-400 mt-1",children:[_,"カスタムvsオープンレンジ設定済み: ",Object.keys(er).filter(e=>e.startsWith("vsopen_")&&e.endsWith("_".concat(_))).length,"レンジ"]})]})}),(0,n.jsxs)("div",{className:"mt-4",children:[(0,n.jsxs)("h4",{className:"text-sm font-semibold text-white mb-3",children:[_,"スタックでのヒーローポジション別vsオープンレンジ設定："]}),(0,n.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:["UTG1","LJ","HJ","CO","BTN","SB","BB"].map(e=>{let t=y(e);return 0===t.length?null:(0,n.jsxs)("div",{className:"bg-gray-800/50 rounded-lg p-3 border border-gray-600",children:[(0,n.jsxs)("div",{className:"text-sm font-semibold text-green-400 mb-2",children:[e," (ヒーロー)"]}),(0,n.jsx)("div",{className:"text-xs text-gray-300 mb-2",children:"SB"===e||"BB"===e?"BTNからのアクションに対する設定:":"vs オープンレイザー:"}),(0,n.jsx)("div",{className:"flex flex-wrap gap-1",children:t.map(t=>{let s;let o=null;"15BB"===_?(s="vsopen_".concat(e,"_vs_").concat(t),o="vsopen_".concat(e,"_vs_").concat(t,"_15BB")):s="vsopen_".concat(e,"_vs_").concat(t,"_").concat(_);let r=er[s]||o&&er[o],a="BTN"===t&&"15BB"===_&&("SB"===e||"BB"===e)?"".concat(t,"がリンプ→").concat(e,"（あなた）のアクション"):t;return(0,n.jsxs)("button",{onClick:()=>eU(s),className:"px-2 py-1 rounded text-xs font-medium transition-all duration-200 ".concat(r?"bg-green-600 hover:bg-green-700 text-white border-2 border-green-400":"bg-blue-600 hover:bg-blue-700 text-white border-2 border-transparent"),title:"".concat(e," vs ").concat(t,"の{stackSize}スタックレンジ設定"),children:[a,r&&" ✓"]},t)})})]},e)})}),(0,n.jsxs)("div",{className:"mt-4 p-3 bg-blue-900/20 border border-blue-600/30 rounded text-xs",children:[(0,n.jsxs)("div",{className:"text-blue-400 font-semibold mb-1",children:["\uD83D\uDCA1 vs オープンレンジの特徴 (",_,"スタック固有)"]}),(0,n.jsxs)("div",{className:"text-gray-300",children:["• ",(0,n.jsx)("strong",{children:"スタック依存:"})," ",_,"スタック専用のレンジ設定",(0,n.jsx)("br",{}),"• ",(0,n.jsx)("strong",{children:"ポジション依存:"})," ヒーローより前のポジションからのオープンのみ対応",(0,n.jsx)("br",{}),"• ",(0,n.jsx)("strong",{children:"アクション選択:"})," FOLD（フォールド）、CALL（コール）、RAISE（レイズ）、ALL IN（オールイン）",(0,n.jsx)("br",{}),"• ",(0,n.jsx)("strong",{children:"混合戦略:"})," 右クリックで詳細な頻度設定（例：CALL 60%, FOLD 40%）"]})]})]})]}),N&&"vs4bet"===E&&(0,n.jsxs)("div",{className:"bg-gradient-to-r from-red-900/30 to-pink-900/30 rounded-lg p-4 mb-4 border border-red-700/50",children:[(0,n.jsx)("div",{className:"flex items-center justify-between",children:(0,n.jsxs)("div",{children:[(0,n.jsxs)("h3",{className:"text-lg font-semibold text-white mb-1",children:["vs 4ベットレンジをカスタマイズ (",_,") ",(0,n.jsx)("span",{className:"text-xs bg-red-600 px-2 py-1 rounded",children:"管理者限定"})]}),(0,n.jsxs)("p",{className:"text-sm text-gray-300",children:["現在の",_,"スタックでの3ベッターと4ベッターの組み合わせでレンジを設定できます"]}),(0,n.jsx)("p",{className:"text-xs text-red-300 mt-1",children:"\uD83D\uDCA1 4ベットに対してFOLD/CALL/ALL IN(5bet)の頻度を設定します"}),Object.keys(er).filter(e=>e.startsWith("vs4bet_")&&e.endsWith("_".concat(_))).length>0&&(0,n.jsxs)("div",{className:"text-xs text-red-400 mt-1",children:[_,"カスタムvs4ベットレンジ設定済み: ",Object.keys(er).filter(e=>e.startsWith("vs4bet_")&&e.endsWith("_".concat(_))).length,"レンジ"]})]})}),(0,n.jsxs)("div",{className:"mt-4",children:[(0,n.jsxs)("h4",{className:"text-sm font-semibold text-white mb-3",children:[_,"スタックでの3ベッター別vs4ベットレンジ設定："]}),(0,n.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:["UTG1","LJ","HJ","CO","BTN","SB","BB"].map(e=>{let t=(e=>{let t=L(e);return t<=0?[]:f.slice(0,t)})(e);return 0===t.length?null:(0,n.jsxs)("div",{className:"bg-gray-800/50 rounded-lg p-3 border border-gray-600",children:[(0,n.jsxs)("div",{className:"text-sm font-semibold text-red-400 mb-2",children:[e," (3ベッター)"]}),(0,n.jsx)("div",{className:"text-xs text-gray-300 mb-2",children:"4ベッターからの攻撃に対する対応:"}),(0,n.jsx)("div",{className:"flex flex-wrap gap-1",children:t.map(t=>{let s="vs4bet_".concat(e,"_vs_").concat(t,"_").concat(_),o="15BB"===_?"vs4bet_".concat(e,"_vs_").concat(t):null,r=er[s]||o&&er[o];return(0,n.jsxs)("button",{onClick:()=>eU(s),className:"px-2 py-1 rounded text-xs font-medium transition-all duration-200 ".concat(r?"bg-red-600 hover:bg-red-700 text-white border-2 border-red-400":"bg-gray-600 hover:bg-gray-700 text-white border-2 border-transparent"),title:"".concat(e," vs ").concat(t,"の").concat(_,"スタックvs4ベットレンジ設定"),children:[t,r&&" ✓"]},t)})})]},e)})}),(0,n.jsxs)("div",{className:"mt-4 p-3 bg-red-900/20 border border-red-600/30 rounded text-xs",children:[(0,n.jsxs)("div",{className:"text-red-400 font-semibold mb-1",children:["\uD83D\uDCA1 vs 4ベットレンジの特徴 (",_,"スタック固有)"]}),(0,n.jsxs)("div",{className:"text-gray-300",children:["• ",(0,n.jsx)("strong",{children:"スタック依存:"})," ",_,"スタック専用のレンジ設定",(0,n.jsx)("br",{}),"• ",(0,n.jsx)("strong",{children:"ポジション依存:"})," 3ベッターが前のポジション（通常オリジナルのオープンレイザー）からの4ベットに対する反応戦略",(0,n.jsx)("br",{}),"• ",(0,n.jsx)("strong",{children:"アクション選択:"})," FOLD（フォールド）、CALL（コール）、ALL IN（5ベット/オールイン）",(0,n.jsx)("br",{}),"• ",(0,n.jsx)("strong",{children:"混合戦略:"})," 右クリックで詳細な頻度設定（例：FOLD 80%, ALL IN 20%）"]})]})]})]}),N&&"vs3bet"===E&&"20BB"!==_&&(0,n.jsxs)("div",{className:"bg-gradient-to-r from-orange-900/30 to-red-900/30 rounded-lg p-4 mb-4 border border-orange-700/50",children:[(0,n.jsx)("div",{className:"flex items-center justify-between",children:(0,n.jsxs)("div",{children:[(0,n.jsxs)("h3",{className:"text-lg font-semibold text-white mb-1",children:["vs 3ベットレンジをカスタマイズ (",_,") ",(0,n.jsx)("span",{className:"text-xs bg-red-600 px-2 py-1 rounded",children:"管理者限定"})]}),(0,n.jsxs)("p",{className:"text-sm text-gray-300",children:["現在の",_,"スタックでのオープンレイザーと3ベッターの組み合わせでレンジを設定できます"]}),(0,n.jsx)("p",{className:"text-xs text-orange-300 mt-1",children:"\uD83D\uDCA1 3ベットに対してFOLD/CALL/RAISE(4bet)/ALL INの頻度を設定します"}),Object.keys(er).filter(e=>e.startsWith("vs3bet_")&&e.endsWith("_".concat(_))).length>0&&(0,n.jsxs)("div",{className:"text-xs text-orange-400 mt-1",children:[_,"カスタムvs3ベットレンジ設定済み: ",Object.keys(er).filter(e=>e.startsWith("vs3bet_")&&e.endsWith("_".concat(_))).length,"レンジ"]})]})}),(0,n.jsxs)("div",{className:"mt-4",children:[(0,n.jsxs)("h4",{className:"text-sm font-semibold text-white mb-3",children:[_,"スタックでのオープンレイザー別vs3ベットレンジ設定："]}),(0,n.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:["UTG","UTG1","LJ","HJ","CO","BTN","SB"].map(e=>{let t=(e=>{let t=L(e);return t>=f.length-1?[]:f.slice(t+1)})(e);return 0===t.length?null:(0,n.jsxs)("div",{className:"bg-gray-800/50 rounded-lg p-3 border border-gray-600",children:[(0,n.jsxs)("div",{className:"text-sm font-semibold text-orange-400 mb-2",children:[e," (オープンレイザー)"]}),(0,n.jsx)("div",{className:"text-xs text-gray-300 mb-2",children:"3ベッターからの攻撃に対する対応:"}),(0,n.jsx)("div",{className:"flex flex-wrap gap-1",children:t.map(t=>{let s="vs3bet_".concat(e,"_vs_").concat(t,"_").concat(_),o="15BB"===_?"vs3bet_".concat(e,"_vs_").concat(t):null,r=er[s]||o&&er[o];return(0,n.jsxs)("button",{onClick:()=>eU(s),className:"px-2 py-1 rounded text-xs font-medium transition-all duration-200 ".concat(r?"bg-orange-600 hover:bg-orange-700 text-white border-2 border-orange-400":"bg-gray-600 hover:bg-gray-700 text-white border-2 border-transparent"),title:"".concat(e," vs ").concat(t,"の").concat(_,"スタックvs3ベットレンジ設定"),children:[t,r&&" ✓"]},t)})})]},e)})}),(0,n.jsxs)("div",{className:"mt-4 p-3 bg-orange-900/20 border border-orange-600/30 rounded text-xs",children:[(0,n.jsxs)("div",{className:"text-orange-400 font-semibold mb-1",children:["\uD83D\uDCA1 vs 3ベットレンジの特徴 (",_,"スタック固有)"]}),(0,n.jsxs)("div",{className:"text-gray-300",children:["• ",(0,n.jsx)("strong",{children:"スタック依存:"})," ",_,"スタック専用のレンジ設定",(0,n.jsx)("br",{}),"• ",(0,n.jsx)("strong",{children:"ポジション依存:"})," オープンレイザーが後のポジションからの3ベットに対する反応戦略",(0,n.jsx)("br",{}),"• ",(0,n.jsx)("strong",{children:"アクション選択:"})," FOLD（フォールド）、CALL（コール）、RAISE（4ベット）、ALL IN（オールイン）",(0,n.jsx)("br",{}),"• ",(0,n.jsx)("strong",{children:"混合戦略:"})," 右クリックで詳細な頻度設定（例：CALL 70%, FOLD 30%）"]})]})]})]}),N&&"20BB"===_&&"vs3bet"===E&&(0,n.jsxs)("div",{className:"bg-gradient-to-r from-purple-900/30 to-indigo-900/30 rounded-lg p-4 mb-4 border border-purple-700/50",children:[(0,n.jsx)("div",{className:"flex items-center justify-between",children:(0,n.jsxs)("div",{children:[(0,n.jsxs)("h3",{className:"text-lg font-semibold text-white mb-1",children:["20BB専用: 3ベットタイプ別レンジカスタマイズ ",(0,n.jsx)("span",{className:"text-xs bg-purple-600 px-2 py-1 rounded",children:"管理者限定"})]}),(0,n.jsx)("p",{className:"text-sm text-gray-300",children:"20BBスタックでの3ベットレイズ（5bb）と3ベットオールイン（20bb）を区別してレンジを設定できます"}),(0,n.jsx)("p",{className:"text-xs text-purple-300 mt-1",children:"\uD83D\uDCA1 例：UTGオープン→LJが3ベットレイズ(5bb)、UTGオープン→LJが3ベットオールイン(20bb)の2種類"}),Object.keys(er).filter(e=>e.startsWith("vs3bet_")&&(e.includes("_raise_20BB")||e.includes("_allin_20BB"))).length>0&&(0,n.jsxs)("div",{className:"text-xs text-purple-400 mt-1",children:["20BB 3ベットタイプ別レンジ設定済み: ",Object.keys(er).filter(e=>e.startsWith("vs3bet_")&&(e.includes("_raise_20BB")||e.includes("_allin_20BB"))).length,"レンジ"]})]})}),(0,n.jsxs)("div",{className:"mt-4",children:[(0,n.jsx)("h4",{className:"text-sm font-semibold text-white mb-3",children:"20BBスタックでのオープンレイザー別3ベットタイプ別レンジ設定："}),(0,n.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:["UTG","UTG1","LJ","HJ","CO","BTN","SB"].map(e=>{let t=(e=>{let t=L(e);return t>=f.length-1?[]:f.slice(t+1)})(e);return 0===t.length?null:(0,n.jsxs)("div",{className:"bg-gray-800/50 rounded-lg p-3 border border-gray-600",children:[(0,n.jsxs)("div",{className:"text-sm font-semibold text-purple-400 mb-2",children:[e," (オープンレイザー)"]}),(0,n.jsx)("div",{className:"text-xs text-gray-300 mb-2",children:"3ベッターからの攻撃に対する対応（タイプ別）:"}),(0,n.jsx)("div",{className:"flex flex-wrap gap-1",children:t.map(t=>{let s="vs3bet_".concat(e,"_vs_").concat(t,"_raise_20BB"),o="vs3bet_".concat(e,"_vs_").concat(t,"_allin_20BB"),r=er[s],a=er[o];return(0,n.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,n.jsx)("div",{className:"text-xs text-gray-400 text-center",children:t}),(0,n.jsxs)("div",{className:"flex gap-1",children:[(0,n.jsxs)("button",{onClick:()=>eU(s),className:"px-2 py-1 rounded text-xs font-medium transition-all duration-200 ".concat(r?"bg-blue-600 hover:bg-blue-700 text-white border-2 border-blue-400":"bg-gray-600 hover:bg-gray-700 text-white border-2 border-transparent"),title:"".concat(e," vs ").concat(t,"の20BBスタックvs3ベットレイズ(5bb)レンジ設定"),children:["レイズ(5bb)",r&&" ✓"]}),(0,n.jsxs)("button",{onClick:()=>eU(o),className:"px-2 py-1 rounded text-xs font-medium transition-all duration-200 ".concat(a?"bg-red-600 hover:bg-red-700 text-white border-2 border-red-400":"bg-gray-600 hover:bg-gray-700 text-white border-2 border-transparent"),title:"".concat(e," vs ").concat(t,"の20BBスタックvs3ベットオールイン(20bb)レンジ設定"),children:["オールイン(20bb)",a&&" ✓"]})]})]},t)})})]},e)})}),(0,n.jsxs)("div",{className:"mt-4 p-3 bg-purple-900/20 border border-purple-600/30 rounded text-xs",children:[(0,n.jsx)("div",{className:"text-purple-400 font-semibold mb-1",children:"\uD83D\uDCA1 20BB 3ベットタイプ別レンジの特徴"}),(0,n.jsxs)("div",{className:"text-gray-300",children:["• ",(0,n.jsx)("strong",{children:"20BB専用:"})," 20BBスタックでのみ有効な詳細設定",(0,n.jsx)("br",{}),"• ",(0,n.jsx)("strong",{children:"3ベットタイプ別:"})," 3ベットレイズ（5bb）と3ベットオールイン（20bb）を区別",(0,n.jsx)("br",{}),"• ",(0,n.jsx)("strong",{children:"独立した設定:"})," 他のレンジ設定とは独立して動作",(0,n.jsx)("br",{}),"• ",(0,n.jsx)("strong",{children:"優先順位:"})," タイプ別レンジが設定されている場合は優先、未設定の場合はデフォルトレンジを使用",(0,n.jsx)("br",{}),"• ",(0,n.jsx)("strong",{children:"アクション選択:"})," FOLD（フォールド）、CALL（コール）、RAISE（4ベット）、ALL IN（オールイン）"]})]})]})]}),(0,n.jsxs)("div",{className:"flex flex-col lg:flex-row ".concat(eA?"gap-2":"gap-4"),children:[(0,n.jsx)("div",{className:"w-full lg:w-3/5 ".concat(eA?"h-[500px] overflow-hidden":"h-[550px] bg-gray-800 rounded-xl overflow-hidden"),children:Y&&(0,n.jsx)(u,{currentSpot:{...Y,correctAction:X.correctAction,frequencies:X.frequencies},selectedAction:U,isCorrect:K,showResults:G,onActionSelect:eJ,availableActions:Y&&"vs3bet"===Y.actionType&&"allin"===Y.threeBetType?["FOLD","CALL"]:["FOLD","CALL","RAISE","ALL IN"],onNextSpot:eK,onRepeatSpot:eW,stackSize:_.replace("BB",""),backButtonUrl:"/trainer/mtt?".concat(new URLSearchParams({stack:_,position:R,action:E,...q.length>0?{hands:encodeURIComponent(q.join(","))}:{}}).toString())})}),(0,n.jsx)("div",{className:"w-full lg:w-2/5",children:(0,n.jsxs)("div",{className:"w-full ".concat(eA?"":"bg-gray-800 rounded-xl"," ").concat(eA?"p-2":"p-4"," ").concat(eA?"":"h-[550px] flex flex-col"),children:[!eA&&(0,n.jsx)("h2",{className:"text-xl font-bold mb-4",children:G?"結果分析":"アクションを選択"}),!eA&&(0,n.jsx)("div",{className:"mb-4 h-[60px]",children:G?(0,n.jsx)("div",{className:"p-3 rounded-lg text-center font-bold ".concat(K?"bg-green-900/50 text-green-400":"bg-red-900/50 text-red-400"),children:K?"✓ 正解！ 最適なプレイです":"✗ 不正解 - 最適なプレイではありません"}):(0,n.jsx)("div",{className:"p-3 rounded-lg text-center text-gray-400 bg-gray-700/30",children:"GTOの観点から最適なプレイを選びましょう"})}),!eA&&(0,n.jsx)("div",{className:"border-t border-gray-700 pt-4 mb-4 h-[80px] flex items-center",children:G?(0,n.jsxs)("div",{className:"flex justify-center gap-4",children:[(0,n.jsxs)("button",{onClick:eW,className:"py-3 px-6 bg-gray-600 hover:bg-gray-700 text-white rounded-lg font-bold text-base flex items-center justify-center shadow-lg transition-all flex-1 whitespace-nowrap",children:[(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),(0,n.jsx)("span",{children:"繰り返す"})]}),(0,n.jsxs)("button",{onClick:eK,className:"py-3 px-6 bg-green-600 hover:bg-green-700 text-white rounded-lg font-bold text-base flex items-center justify-center shadow-lg transition-all flex-1 whitespace-nowrap",children:[(0,n.jsx)("span",{children:"次のハンド"}),(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 ml-2",viewBox:"0 0 20 20",fill:"currentColor",children:(0,n.jsx)("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})})]})]}):(0,n.jsxs)("div",{className:"grid gap-2 w-full ".concat(Y&&"vs3bet"===Y.actionType&&"allin"===Y.threeBetType?"grid-cols-2":"grid-cols-4"),children:[(0,n.jsx)("button",{className:"py-3 rounded-lg font-bold text-lg shadow-lg bg-blue-600 hover:bg-blue-700 text-white transition-all border border-gray-700",onClick:()=>eJ("FOLD"),children:"FOLD"}),(0,n.jsx)("button",{className:"py-3 rounded-lg font-bold text-lg shadow-lg bg-green-600 hover:bg-green-700 text-white transition-all border border-gray-700",onClick:()=>eJ("CALL"),children:"CALL"}),Y&&"vs3bet"===Y.actionType&&"allin"===Y.threeBetType?null:(0,n.jsx)("button",{className:"py-3 rounded-lg font-bold text-lg shadow-lg bg-red-600 hover:bg-red-700 text-white transition-all border border-gray-700",onClick:()=>eJ("RAISE"),children:"RAISE"}),(!Y||"vs3bet"!==Y.actionType||"allin"!==Y.threeBetType)&&(80>=parseInt(_)||X&&X.frequencies&&X.frequencies.ALL_IN>0)?(0,n.jsx)("button",{className:"py-3 rounded-lg font-bold text-lg shadow-lg bg-purple-600 hover:bg-purple-700 text-white transition-all border border-gray-700",onClick:()=>eJ("ALL_IN"),children:"ALL IN"}):null]})}),(0,n.jsxs)("div",{className:"".concat(eA?"pt-0":"pt-4"," ").concat(eA?"h-auto":"flex-1 overflow-y-auto border-t border-gray-700"),children:[!G&&(0,n.jsx)("div",{className:"flex flex-col items-center justify-center h-full text-center text-gray-500",children:(0,n.jsxs)("div",{className:"mb-2",children:[(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-10 w-10 mx-auto mb-2 opacity-30",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,n.jsxs)("p",{className:"text-lg",children:["アクションを選択すると",(0,n.jsx)("br",{}),"GTO分析が表示されます"]})]})}),G&&X&&(0,n.jsxs)("div",{children:[X.isInvalidCombination&&(0,n.jsxs)("div",{className:"bg-red-900/20 border border-red-600 rounded-lg p-4 mb-4",children:[(0,n.jsxs)("h4",{className:"text-red-400 font-semibold mb-2 flex items-center",children:[(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"ポジション組み合わせエラー"]}),(0,n.jsx)("div",{className:"text-red-300 text-sm mb-3",children:X.effectiveStackExplanation}),(0,n.jsx)("div",{className:"text-gray-300 text-sm mb-2",children:X.stackSizeStrategy}),(0,n.jsxs)("div",{className:"text-blue-300 text-sm bg-blue-900/20 p-3 rounded border-l-4 border-blue-500",children:[(0,n.jsx)("strong",{children:"\uD83D\uDCA1 解決方法:"}),(0,n.jsx)("br",{}),X.icmConsideration]}),(0,n.jsxs)("div",{className:"text-yellow-300 text-xs mt-3 bg-yellow-900/20 p-2 rounded",children:[(0,n.jsx)("strong",{children:"ポジション順序:"})," ",X.exploitSuggestion]})]}),X.isRangeOut&&(0,n.jsxs)("div",{className:"bg-yellow-900/20 border border-yellow-600 rounded-lg p-4 mb-4",children:[(0,n.jsxs)("h4",{className:"text-yellow-400 font-semibold mb-2 flex items-center",children:[(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})}),"レンジ外ハンド"]}),(0,n.jsx)("div",{className:"text-yellow-300 text-sm mb-3",children:X.effectiveStackExplanation}),(0,n.jsx)("div",{className:"text-gray-300 text-sm mb-2",children:X.stackSizeStrategy}),(0,n.jsxs)("div",{className:"text-blue-300 text-sm bg-blue-900/20 p-3 rounded border-l-4 border-blue-500",children:[(0,n.jsx)("strong",{children:"\uD83D\uDCA1 推奨アクション:"}),(0,n.jsx)("br",{}),X.icmConsideration]})]}),!X.isInvalidCombination&&(0,n.jsxs)(n.Fragment,{children:[X.frequencies&&(0,n.jsxs)("div",{className:"".concat(eA?"bg-gray-700/10":"bg-gray-700/30"," p-4 rounded mb-4"),children:[(console.log("\uD83C\uDFAF 結果表示デバッグ:",{normalizedHandType:null==X?void 0:X.normalizedHandType,frequencies:null==X?void 0:X.frequencies,correctAction:null==X?void 0:X.correctAction,isCustomRange:null==X?void 0:X.isCustomRange,gtoDataKeys:X?Object.keys(X):[],gtoDataType:typeof(null==X?void 0:X.normalizedHandType),gtoDataExists:!!X}),null),(0,n.jsx)("div",{className:"grid grid-cols-2 gap-2 text-sm",children:"NONE"===X.correctAction?(0,n.jsxs)("div",{className:"col-span-2 p-4 bg-yellow-600/30 border border-yellow-500 rounded text-center",children:[(0,n.jsx)("div",{className:"text-yellow-300 font-bold mb-2",children:"⚠️ アクション未設定"}),(0,n.jsxs)("div",{className:"text-gray-300 text-sm",children:["このハンドはアクションが設定されていません。",(0,n.jsx)("br",{}),"注意してください。"]})]}):Object.entries(X.frequencies).filter(e=>{let[t]=e;return["FOLD","CALL","RAISE","ALL_IN","ALL IN","ALLIN","ALL-IN"].includes(t)}).map(e=>{let[t,s]=e,o=["ALL_IN","ALLIN","ALL-IN"].includes(t)?"ALL_IN":t,r=t===X.correctAction||"ALL_IN"===o&&"ALL_IN"===X.correctAction||"MIN"===X.correctAction&&"RAISE"===t;return(0,n.jsxs)("div",{className:"flex justify-between p-2 rounded ".concat(t===U?"bg-blue-600/30 border border-blue-500":r?"bg-green-600/30 border border-green-500":"bg-gray-600/30"),children:[(0,n.jsxs)("span",{className:"font-medium ".concat(t===U?"text-blue-300":r?"text-green-300":"text-gray-300"),children:["ALL_IN"===o?"ALL_IN":t,r&&" (推奨)"]}),(0,n.jsxs)("span",{className:"font-bold ".concat(Number(s)>0?"text-white":"text-gray-500"),children:[Number(s),"%"]})]},t)})}),(0,n.jsx)("div",{className:"mt-4",children:(0,n.jsxs)("button",{onClick:()=>eT(!0),className:"w-full py-3 md:py-4 px-4 md:px-6 bg-gradient-to-r from-purple-600 via-purple-700 to-purple-600 hover:from-purple-500 hover:via-purple-600 hover:to-purple-500 text-white rounded-xl font-semibold transition-all duration-300 flex items-center justify-center gap-2 md:gap-3 shadow-lg hover:shadow-xl border border-purple-500/30 hover:border-purple-400/50 transform hover:scale-105",children:[(0,n.jsx)("div",{className:"w-5 h-5 md:w-6 md:h-6 bg-white/20 rounded-lg flex items-center justify-center",children:(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3 md:h-4 md:w-4 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),(0,n.jsx)("span",{className:"text-sm md:text-base",children:"ハンドレンジを表示"})]})})]}),(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[(0,n.jsxs)("div",{className:"".concat(eA?"bg-gray-700/20":"bg-gray-700/40"," p-3 rounded"),children:[(0,n.jsx)("h4",{className:"text-gray-400 text-xs mb-1",children:"最適なアクション"}),(0,n.jsx)("div",{className:"text-lg font-bold text-green-400",children:(()=>{var e,t,s,n,o;let r="MIN"===X.correctAction?"RAISE":X.correctAction,a=0;a="ALL_IN"===r?(null===(e=X.frequencies)||void 0===e?void 0:e.ALL_IN)||(null===(t=X.frequencies)||void 0===t?void 0:t["ALL IN"])||(null===(s=X.frequencies)||void 0===s?void 0:s.ALLIN)||(null===(n=X.frequencies)||void 0===n?void 0:n["ALL-IN"])||0:(null===(o=X.frequencies)||void 0===o?void 0:o[r])||0;let l="ALL_IN"===r?"ALL IN":r,c=100===a?l:"".concat(l," ").concat(a,"%");return console.log("\uD83C\uDFAF 最適アクション表示（修正版）:",{gtoDataCorrectAction:X.correctAction,actionKey:r,frequency:a,displayText:c,gtoDataFrequencies:X.frequencies,allFrequencyKeys:Object.keys(X.frequencies||{}),timestamp:Date.now()}),c})()}),X.frequencies&&(0,n.jsxs)("div",{className:"text-xs text-green-300 mt-1",children:["推奨頻度: ",(c="MIN"===X.correctAction?"RAISE":X.correctAction,i=0,i="ALL_IN"===c?(null===(e=X.frequencies)||void 0===e?void 0:e.ALL_IN)||(null===(t=X.frequencies)||void 0===t?void 0:t["ALL IN"])||(null===(s=X.frequencies)||void 0===s?void 0:s.ALLIN)||(null===(a=X.frequencies)||void 0===a?void 0:a["ALL-IN"])||0:(null===(l=X.frequencies)||void 0===l?void 0:l[c])||0,console.log("\uD83C\uDFAF 推奨頻度表示（修正版）:",{gtoDataCorrectAction:X.correctAction,actionKey:c,frequency:i,gtoDataFrequencies:X.frequencies,allFrequencyKeys:Object.keys(X.frequencies||{}),timestamp:Date.now()}),i),"%"]})]}),(0,n.jsxs)("div",{className:"".concat(eA?"bg-gray-700/20":"bg-gray-700/40"," p-3 rounded"),children:[(0,n.jsx)("h4",{className:"text-gray-400 text-xs mb-1",children:"あなたの選択"}),(0,n.jsx)("div",{className:"text-lg font-bold",children:U}),X.frequencies&&U&&(()=>{let e={ALL_IN:["ALL_IN","ALL_IN"],RAISE:["RAISE","MIN"],CALL:["CALL"],FOLD:["FOLD"]}[U]||[U],t=0,s="";for(let n of e)if(void 0!==X.frequencies[n]){t=X.frequencies[n],s=n;break}return console.log("\uD83C\uDFAF 正解頻度計算デバッグ:",{selectedAction:U,variants:e,foundKey:s,frequency:t,gtoDataFrequencies:X.frequencies,allKeys:Object.keys(X.frequencies)}),(0,n.jsxs)("div",{className:"text-xs mt-1 ".concat(t>0?"text-blue-300":"text-red-300"),children:["正解頻度: ",t,"%",0===t&&" (推奨されません)"]})})()]})]})]})]})]})]})})]})]})}),en&&(console.log("MTTRangeEditor描画",{showRangeEditor:en,selectedEditPosition:el,stackSize:_,initialRange:er[el]}),null),en&&(()=>{let e=el,t=parseInt(_.replace("BB","")),s=er[el];if(el.includes("_")&&el.includes("BB")){let n=el.split("_");2===n.length&&(e=n[0],t=parseInt(n[1].replace("BB","")),"15BB"===n[1]&&!s&&er[n[0]]&&(s=er[n[0]],console.log("15BB互換性: 既存レンジを使用",{position:n[0],range:s})))}else if(el.startsWith("vsopen_")){let n=el.split("_");if(n.length>=4&&(e=el,t=parseInt(_.replace("BB","")),"15BB"===_&&!s)){let e=n.slice(0,4).join("_");er[e]&&(s=er[e],console.log("15BB互換性: 既存vsオープンレンジを使用",{baseVsOpenKey:e,range:s}))}}else if(el.startsWith("vs3bet_")){if(e=el,t=parseInt(_.replace("BB","")),"15BB"===_&&!s){let e=el.replace("_15BB","");er[e]&&(s=er[e],console.log("15BB互換性: 既存vs3ベットレンジを使用",{baseVs3BetKey:e,range:s}))}}else if(el.startsWith("vs4bet_")&&(e=el,t=parseInt(_.replace("BB","")),"15BB"===_&&!s)){let e=el.replace("_15BB","");er[e]&&(s=er[e],console.log("15BB互換性: 既存vs4ベットレンジを使用",{baseVs4BetKey:e,range:s}))}return(0,n.jsx)(d.Tc,{position:e,stackSize:t,onSaveRange:eq,onClose:()=>eo(!1),initialRange:s})})(),ej&&(0,n.jsx)(d.jq,{onClose:()=>{eN(!1)},onSelectHands:e=>{eC(e),console.log("選択されたトレーニングハンド:",e)},initialSelectedHands:eS,onTemplateSelect:e=>{let t=d.em[e];t&&(eC(t),console.log("テンプレート「".concat(e,"」を選択:"),t.length,"ハンド"))}}),ek&&(()=>{let e=e_(),t=e?er[e]:null;if(!t&&e){let s=localStorage.getItem("mtt-custom-ranges");if(s)try{t=JSON.parse(s)[e]||null,console.log("\uD83C\uDFAF ハンドレンジビューアー: ローカルストレージから直接取得:",{rangeKey:e,found:!!t,rangeDataSize:t?Object.keys(t).length:0})}catch(e){console.error("ローカルストレージからの直接取得に失敗:",e)}}if(console.log("\uD83C\uDFAF ハンドレンジビューアーデバッグ:",{showHandRangeViewer:ek,rangeKey:e,rangeData:t?Object.keys(t).length:null,spot:Y?{actionType:Y.actionType,heroPosition:Y.heroPosition,stackDepth:Y.stackDepth}:null,customRangesKeys:Object.keys(er).filter(e=>e.includes("40BB")),hasRangeData:!!t}),!e)return(0,n.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",children:(0,n.jsxs)("div",{className:"bg-gray-800 rounded-lg max-w-md w-full p-6",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,n.jsx)("h2",{className:"text-xl font-bold text-white",children:"エラー"}),(0,n.jsx)("button",{onClick:()=>eT(!1),className:"text-gray-400 hover:text-white text-2xl",children:"\xd7"})]}),(0,n.jsx)("div",{className:"text-gray-300 mb-4",children:"このスポットのレンジキーを特定できませんでした。"}),(0,n.jsx)("button",{onClick:()=>eT(!1),className:"w-full px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded transition-colors",children:"閉じる"})]})});if(!t)return(0,n.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",children:(0,n.jsxs)("div",{className:"bg-gray-800 rounded-lg max-w-md w-full p-6",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,n.jsx)("h2",{className:"text-xl font-bold text-white",children:"レンジ未設定"}),(0,n.jsx)("button",{onClick:()=>eT(!1),className:"text-gray-400 hover:text-white text-2xl",children:"\xd7"})]}),(0,n.jsxs)("div",{className:"text-gray-300 mb-4",children:[(0,n.jsxs)("div",{className:"mb-2",children:["レンジキー: ",(0,n.jsx)("code",{className:"bg-gray-700 px-2 py-1 rounded",children:e})]}),(0,n.jsx)("div",{children:"このスポットのカスタムレンジは設定されていません。"})]}),(0,n.jsx)("button",{onClick:()=>eT(!1),className:"w-full px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded transition-colors",children:"閉じる"})]})});let s=H||(null==Y?void 0:Y.openRaiserPosition)||(null==Y?void 0:Y.threeBetterPosition)||void 0;return(0,n.jsx)(h,{rangeData:t,title:"現在のスポットのハンドレンジ",onClose:()=>eT(!1),position:R,stackSize:_,actionType:E,opponentPosition:s})})(),N&&(0,n.jsxs)("div",{className:"bg-yellow-900/20 rounded-lg p-4 mb-4 border border-yellow-700/50",children:[(0,n.jsxs)("h3",{className:"text-lg font-semibold text-yellow-300 mb-2",children:["\uD83D\uDD0D レンジ読み込み状況デバッグ (",_,")"]}),(0,n.jsxs)("div",{className:"text-xs space-y-1",children:[(0,n.jsxs)("div",{children:["カスタムレンジ総数: ",Object.keys(er).length]}),(0,n.jsxs)("div",{children:["vsオープンレンジ数: ",Object.keys(er).filter(e=>e.startsWith("vsopen_")&&e.endsWith("_".concat(_))).length]}),(0,n.jsxs)("div",{children:["vs3ベットレンジ数: ",Object.keys(er).filter(e=>e.startsWith("vs3bet_")&&e.endsWith("_".concat(_))).length]}),(0,n.jsxs)("div",{children:["vs4ベットレンジ数: ",Object.keys(er).filter(e=>e.startsWith("vs4bet_")&&e.endsWith("_".concat(_))).length]}),(0,n.jsxs)("div",{children:[_,"スタック固有レンジ数: ",Object.keys(er).filter(e=>e.endsWith("_".concat(_))||!e.includes("_")&&"15BB"===_&&!e.startsWith("vsopen_")&&!e.startsWith("vs3bet_")&&!e.startsWith("vs4bet_")).length]}),Object.keys(er).filter(e=>e.startsWith("vsopen_")&&e.endsWith("_".concat(_))).length>0&&(0,n.jsxs)("div",{className:"mt-2",children:[(0,n.jsxs)("div",{className:"text-yellow-300 mb-1",children:["設定済み",_,"vsオープンレンジ:"]}),(0,n.jsxs)("div",{className:"max-h-32 overflow-y-auto",children:[Object.keys(er).filter(e=>e.startsWith("vsopen_")&&e.endsWith("_".concat(_))).slice(0,10).map(e=>(0,n.jsxs)("div",{className:"text-xs text-gray-300",children:["• ",e]},e)),Object.keys(er).filter(e=>e.startsWith("vsopen_")&&e.endsWith("_".concat(_))).length>10&&(0,n.jsxs)("div",{className:"text-xs text-gray-400",children:["...他",Object.keys(er).filter(e=>e.startsWith("vsopen_")&&e.endsWith("_".concat(_))).length-10,"レンジ"]})]})]}),Object.keys(er).filter(e=>e.startsWith("vs3bet_")&&e.endsWith("_".concat(_))).length>0&&(0,n.jsxs)("div",{className:"mt-2",children:[(0,n.jsxs)("div",{className:"text-yellow-300 mb-1",children:["設定済み",_,"vs3ベットレンジ:"]}),(0,n.jsx)("div",{className:"max-h-20 overflow-y-auto",children:Object.keys(er).filter(e=>e.startsWith("vs3bet_")&&e.endsWith("_".concat(_))).map(e=>(0,n.jsxs)("div",{className:"text-xs text-gray-300",children:["• ",e]},e))})]}),Object.keys(er).filter(e=>e.startsWith("vs4bet_")&&e.endsWith("_".concat(_))).length>0&&(0,n.jsxs)("div",{className:"mt-2",children:[(0,n.jsxs)("div",{className:"text-yellow-300 mb-1",children:["設定済み",_,"vs4ベットレンジ:"]}),(0,n.jsx)("div",{className:"max-h-20 overflow-y-auto",children:Object.keys(er).filter(e=>e.startsWith("vs4bet_")&&e.endsWith("_".concat(_))).map(e=>(0,n.jsxs)("div",{className:"text-xs text-gray-300",children:["• ",e]},e))})]}),Object.keys(er).filter(e=>e.endsWith("_".concat(_))||!e.includes("_")&&"15BB"===_&&!e.startsWith("vsopen_")&&!e.startsWith("vs3bet_")&&!e.startsWith("vs4bet_")).length>0&&(0,n.jsxs)("div",{className:"mt-2",children:[(0,n.jsxs)("div",{className:"text-yellow-300 mb-1",children:["設定済み",_,"レンジ:"]}),(0,n.jsx)("div",{className:"max-h-20 overflow-y-auto",children:Object.keys(er).filter(e=>e.endsWith("_".concat(_))||!e.includes("_")&&"15BB"===_&&!e.startsWith("vsopen_")&&!e.startsWith("vs3bet_")&&!e.startsWith("vs4bet_")).map(e=>(0,n.jsxs)("div",{className:"text-xs text-gray-300",children:["• ",e]},e))})]}),"vsopen"===E&&(0,n.jsxs)("div",{className:"mt-2 p-2 bg-blue-900/20 rounded",children:[(0,n.jsx)("div",{className:"text-blue-300",children:"現在のvsオープン設定:"}),(0,n.jsxs)("div",{children:["ポジション: ",R]}),(0,n.jsxs)("div",{children:["スタック: ",_]}),(null==Y?void 0:Y.openRaiserPosition)&&(0,n.jsxs)("div",{children:["オープンレイザー: ",Y.openRaiserPosition]}),(null==Y?void 0:Y.openRaiserPosition)&&(0,n.jsxs)("div",{children:["レンジキー: vsopen_",R,"_vs_",Y.openRaiserPosition,"_",_]})]})]})]}),(0,n.jsxs)("div",{className:"fixed bottom-4 left-4 z-50 hidden md:block",children:[!N&&(0,n.jsxs)("button",{onClick:()=>em(!0),className:"px-3 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg text-sm font-medium transition-colors duration-200 flex items-center gap-2 shadow-lg",children:[(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),"管理者ログイン"]}),N&&(0,n.jsxs)("div",{className:"flex items-center gap-3 bg-green-600/20 px-3 py-2 rounded-lg border border-green-500/30 shadow-lg",children:[(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-yellow-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),(0,n.jsxs)("div",{className:"text-sm",children:[(0,n.jsx)("div",{className:"text-green-400 font-medium",children:"gto-admin"}),(0,n.jsx)("div",{className:"text-green-300 text-xs",children:"管理者でログイン中"})]}),(0,n.jsx)("button",{onClick:()=>{localStorage.removeItem("admin-token"),window.location.reload()},className:"px-3 py-1 bg-red-600 hover:bg-red-700 text-white rounded text-xs font-medium transition-colors duration-200",children:"ログアウト"})]})]}),(0,n.jsxs)("div",{className:"fixed bottom-2 right-2 z-50 md:hidden",children:[!N&&(0,n.jsxs)("button",{onClick:()=>em(!0),className:"px-2 py-1 bg-red-600 hover:bg-red-700 text-white rounded text-xs font-medium transition-colors duration-200 flex items-center gap-1 shadow-lg",children:[(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),"管理"]}),N&&(0,n.jsxs)("div",{className:"flex items-center gap-1 bg-green-600/20 px-2 py-1 rounded border border-green-500/30 shadow-lg",children:[(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3 text-yellow-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),(0,n.jsx)("div",{className:"text-xs",children:(0,n.jsx)("div",{className:"text-green-400 font-medium",children:"管理"})}),(0,n.jsx)("button",{onClick:()=>{localStorage.removeItem("admin-token"),window.location.reload()},className:"px-1 py-0.5 bg-red-600 hover:bg-red-700 text-white rounded text-xs font-medium transition-colors duration-200",children:"出"})]})]})]})}):(0,n.jsx)("div",{className:"min-h-screen bg-black md:bg-gray-900 text-white flex items-center justify-center",children:"ローディング中..."})}function O(){return(0,n.jsx)(o.Suspense,{children:(0,n.jsx)(I,{})})}},7561:function(e,t,s){"use strict";s.d(t,{A:function(){return l},AdminProvider:function(){return a}});var n=s(7437),o=s(2265);let r=(0,o.createContext)(void 0);function a(e){let{children:t}=e,[s,a]=(0,o.useState)(!1),[l,c]=(0,o.useState)(null),[i,d]=(0,o.useState)(null),[u,g]=(0,o.useState)(!0),h=async e=>{let t=new AbortController,s=setTimeout(()=>t.abort(),1e4);try{let n=await fetch("/api/admin/auth",{headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json",Accept:"application/json","Cache-Control":"no-cache"},signal:t.signal});if(clearTimeout(s),!n.ok)return localStorage.removeItem("admin-token"),a(!1),c(null),d(null),!1;{let t=await n.json();return a(!0),c(t.user),d(e),!0}}catch(e){return clearTimeout(s),console.error("トークン検証エラー:",e),localStorage.removeItem("admin-token"),a(!1),c(null),d(null),!1}};(0,o.useEffect)(()=>{(async()=>{{let e=localStorage.getItem("admin-token");e&&await h(e)}g(!1)})()},[]);let m=async(e,t)=>{let s=new AbortController,n=setTimeout(()=>s.abort(),15e3);try{let o=await fetch("/api/admin/auth",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","Cache-Control":"no-cache"},body:JSON.stringify({username:e,password:t}),signal:s.signal});if(clearTimeout(n),o.ok){let e=await o.json();return a(!0),c(e.user),d(e.token),localStorage.setItem("admin-token",e.token),!0}{let e=await o.json().catch(()=>({}));return console.warn("管理者ログイン失敗:",o.status,e),!1}}catch(e){return clearTimeout(n),e instanceof Error&&"AbortError"===e.name?console.error("管理者ログインタイムアウト"):console.error("管理者ログインエラー:",e),!1}};return(0,n.jsx)(r.Provider,{value:{isAdmin:s,user:l,token:i,login:m,logout:()=>{a(!1),c(null),d(null),localStorage.removeItem("admin-token")},loading:u},children:t})}function l(){let e=(0,o.useContext)(r);if(void 0===e)throw Error("useAdmin must be used within an AdminProvider");return e}}},function(e){e.O(0,[972,790,971,117,744],function(){return e(e.s=7375)}),_N_E=e.O()}]);