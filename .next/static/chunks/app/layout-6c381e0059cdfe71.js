(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{4742:function(e,t,r){Promise.resolve().then(r.t.bind(r,9974,23)),Promise.resolve().then(r.t.bind(r,2778,23)),Promise.resolve().then(r.bind(r,8947)),Promise.resolve().then(r.bind(r,9295)),Promise.resolve().then(r.bind(r,7561)),Promise.resolve().then(r.bind(r,4362))},8947:function(e,t,r){"use strict";r.d(t,{ChakraWrapper:function(){return i}});var n=r(7437),o=r(5233),s=r(58);function i(e){let{children:t}=e,r=(0,o.F)({});return(0,n.jsx)(s.x,{value:r,children:t})}},9295:function(e,t,r){"use strict";var n=r(7437),o=r(2265),s=r(7648),i=r(9376),l=r(4362);t.default=()=>{let{user:e,logout:t}=(0,l.a)(),[r,a]=(0,o.useState)(!1),c=(0,i.usePathname)();return(0,n.jsx)("header",{className:"bg-blue-700 text-white p-4 shadow-md",children:(0,n.jsxs)("div",{className:"container mx-auto flex flex-wrap items-center justify-between",children:[(0,n.jsx)(s.default,{href:"/",className:"text-xl font-bold",children:"GTO Vantage"}),(0,n.jsx)("button",{className:"md:hidden p-2 text-white focus:outline-none",onClick:()=>a(!r),"aria-label":"メニュー",children:r?(0,n.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}):(0,n.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),(0,n.jsx)("nav",{className:"w-full md:w-auto md:flex ".concat(r?"block":"hidden"," mt-4 md:mt-0"),children:(0,n.jsxs)("ul",{className:"flex flex-col md:flex-row md:items-center md:space-x-6",children:[(0,n.jsx)("li",{children:(0,n.jsx)(s.default,{href:"/",className:"block py-2 md:py-0 ".concat("/"===c?"font-bold":"hover:text-blue-200"),children:"ホーム"})}),e&&(0,n.jsx)("li",{children:(0,n.jsx)(s.default,{href:"/trainer/mtt",className:"block py-2 md:py-0 ".concat(c.startsWith("/trainer")?"font-bold":"hover:text-blue-200"),children:"GTOトレーナー"})}),e&&(0,n.jsx)("li",{children:(0,n.jsx)(s.default,{href:"/subscription",className:"block py-2 md:py-0 ".concat("/subscription"===c?"font-bold":"hover:text-blue-200"),children:"サブスクリプション"})}),e&&(0,n.jsx)("li",{children:(0,n.jsx)(s.default,{href:"/mypage",className:"block py-2 md:py-0 ".concat("/mypage"===c?"font-bold":"hover:text-blue-200"),children:"マイページ"})}),e?(0,n.jsx)("li",{className:"mt-4 md:mt-0 md:ml-6",children:(0,n.jsx)("button",{onClick:t,className:"block bg-transparent border border-white text-white px-4 py-1 rounded hover:bg-blue-600",children:"ログアウト"})}):(0,n.jsxs)("li",{className:"mt-4 md:mt-0 md:ml-6 flex flex-col md:flex-row",children:[(0,n.jsx)(s.default,{href:"/login",className:"block bg-transparent border border-white text-white px-4 py-1 rounded mb-2 md:mb-0 md:mr-2 text-center hover:bg-blue-600",children:"ログイン"}),(0,n.jsx)(s.default,{href:"/register",className:"block bg-white text-blue-700 px-4 py-1 rounded text-center hover:bg-gray-100",children:"新規登録"})]})]})})]})})}},7561:function(e,t,r){"use strict";r.d(t,{A:function(){return l},AdminProvider:function(){return i}});var n=r(7437),o=r(2265);let s=(0,o.createContext)(void 0);function i(e){let{children:t}=e,[r,i]=(0,o.useState)(!1),[l,a]=(0,o.useState)(null),[c,d]=(0,o.useState)(null),[u,m]=(0,o.useState)(!0),h=async e=>{try{let t=await fetch("/api/admin/auth",{headers:{Authorization:"Bearer ".concat(e)}});if(!t.ok)return localStorage.removeItem("admin-token"),i(!1),a(null),d(null),!1;{let r=await t.json();return i(!0),a(r.user),d(e),!0}}catch(e){return console.error("トークン検証エラー:",e),localStorage.removeItem("admin-token"),i(!1),a(null),d(null),!1}};(0,o.useEffect)(()=>{(async()=>{let e=localStorage.getItem("admin-token");e&&await h(e),m(!1)})()},[]);let f=async(e,t)=>{try{let r=await fetch("/api/admin/auth",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:t})});if(!r.ok)return!1;{let e=await r.json();return i(!0),a(e.user),d(e.token),localStorage.setItem("admin-token",e.token),!0}}catch(e){return console.error("ログインエラー:",e),!1}};return(0,n.jsx)(s.Provider,{value:{isAdmin:r,user:l,token:c,login:f,logout:()=>{i(!1),a(null),d(null),localStorage.removeItem("admin-token")},loading:u},children:t})}function l(){let e=(0,o.useContext)(s);if(void 0===e)throw Error("useAdmin must be used within an AdminProvider");return e}},4362:function(e,t,r){"use strict";r.d(t,{AuthProvider:function(){return a},a:function(){return i}});var n=r(7437),o=r(2265);let s=(0,o.createContext)(void 0),i=()=>{let e=(0,o.useContext)(s);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e},l={id:"dummy",email:"admin@gtovantage.com",name:"Admin",createdAt:new Date().toISOString(),emailVerified:!0,isMasterUser:!0,subscriptionStatus:"master",practiceCount:0},a=e=>{let{children:t}=e,[r,i]=(0,o.useState)(!0);(0,o.useEffect)(()=>{{let e=localStorage.getItem("isLoggedIn"),t=sessionStorage.getItem("isLoggedIn");"true"===e||"true"===t?(i(!0),localStorage.setItem("isLoggedIn","true"),sessionStorage.setItem("isLoggedIn","true")):null===e&&null===t?(localStorage.setItem("isLoggedIn","true"),sessionStorage.setItem("isLoggedIn","true"),i(!0)):i(!1)}},[]);let a=async(e,t,r)=>!0,c=async(e,t)=>(i(!0),localStorage.setItem("isLoggedIn","true"),sessionStorage.setItem("isLoggedIn","true"),!0);return(0,n.jsx)(s.Provider,{value:{user:r?l:null,isLoading:!1,register:a,login:c,logout:()=>{i(!1),localStorage.removeItem("isLoggedIn"),sessionStorage.removeItem("isLoggedIn")},isAuthenticated:r,isEmailVerified:r,isMasterUser:r,hasActiveSubscription:r,canPractice:r,practiceCount:0,maxPracticeCount:1/0,incrementPracticeCount:()=>{},canUseStackSize:()=>!0,getAllowedStackSizes:()=>["10BB","15BB","20BB","30BB","40BB","50BB","75BB"]},children:t})}},2778:function(){}},function(e){e.O(0,[635,972,618,971,117,744],function(){return e(e.s=4742)}),_N_E=e.O()}]);