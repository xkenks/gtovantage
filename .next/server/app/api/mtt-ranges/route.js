"use strict";(()=>{var e={};e.id=421,e.ids=[421],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},8893:e=>{e.exports=require("buffer")},4770:e=>{e.exports=require("crypto")},2048:e=>{e.exports=require("fs")},5315:e=>{e.exports=require("path")},6162:e=>{e.exports=require("stream")},1764:e=>{e.exports=require("util")},4017:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>k,patchFetch:()=>q,requestAsyncStorage:()=>R,routeModule:()=>S,serverHooks:()=>N,staticGenerationAsyncStorage:()=>T});var s={};r.r(s),r.d(s,{DELETE:()=>h,GET:()=>f,POST:()=>v});var n=r(9303),o=r(8716),a=r(670),i=r(7070),u=r(2048),c=r.n(u),p=r(5315),l=r.n(p),d=r(1482),g=r.n(d);let m=l().join(process.cwd(),"data"),x=l().join(m,"mtt-ranges.json"),y=process.env.JWT_SECRET||"gto-vantage-admin-secret-key-2024";function j(e){try{let t=e.headers.get("authorization");if(!t||!t.startsWith("Bearer "))return!1;let r=t.substring(7),s=g().verify(r,y);return"admin"===s.role}catch(e){return!1}}async function f(e){try{if(!c().existsSync(x)){let e={version:"1.0.0",lastUpdated:new Date().toISOString(),ranges:{},metadata:{totalPositions:0,totalHands:0,creator:"System",environment:"production"}};return i.NextResponse.json(e)}let e=c().readFileSync(x,"utf8"),t=JSON.parse(e);return i.NextResponse.json(t)}catch(e){return console.error("MTTãƒ¬ãƒ³ã‚¸ãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼:",e),i.NextResponse.json({error:"ãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸ"},{status:500})}}async function v(e){if(!j(e))return i.NextResponse.json({error:"ç®¡ç†è€…æ¨©é™ãŒå¿…è¦ã§ã™"},{status:403});try{let{ranges:t,metadata:r}=await e.json();if(!t||"object"!=typeof t)return i.NextResponse.json({error:"ç„¡åŠ¹ãªãƒ¬ãƒ³ã‚¸ãƒ‡ãƒ¼ã‚¿ã§ã™"},{status:400});let s=Object.keys(t).length,n=Object.values(t).reduce((e,t)=>e+Object.keys(t).length,0),o={version:"1.0.0",lastUpdated:new Date().toISOString(),ranges:t,metadata:{totalPositions:s,totalHands:n,creator:r?.creator||"Admin",environment:"production"}};return c().writeFileSync(x,JSON.stringify(o,null,2)),console.log(`ðŸ”’ ç®¡ç†è€…ãŒMTTãƒ¬ãƒ³ã‚¸ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜: ${s}ãƒã‚¸ã‚·ãƒ§ãƒ³, ${n}ãƒãƒ³ãƒ‰`),i.NextResponse.json({success:!0,message:"ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“ã«ãƒ¬ãƒ³ã‚¸ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜ã—ã¾ã—ãŸ",metadata:o.metadata})}catch(e){return console.error("MTTãƒ¬ãƒ³ã‚¸ãƒ‡ãƒ¼ã‚¿ã®ä¿å­˜ã‚¨ãƒ©ãƒ¼:",e),i.NextResponse.json({error:"ãƒ‡ãƒ¼ã‚¿ã®ä¿å­˜ã«å¤±æ•—ã—ã¾ã—ãŸ"},{status:500})}}async function h(e){if(!j(e))return i.NextResponse.json({error:"ç®¡ç†è€…æ¨©é™ãŒå¿…è¦ã§ã™"},{status:403});try{return c().existsSync(x)&&c().unlinkSync(x),console.log("\uD83D\uDD12 ç®¡ç†è€…ãŒã‚·ã‚¹ãƒ†ãƒ å…¨ä½“ã®ãƒ¬ãƒ³ã‚¸ãƒ‡ãƒ¼ã‚¿ã‚’å‰Šé™¤ã—ã¾ã—ãŸ"),i.NextResponse.json({success:!0,message:"ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“ã®ãƒ¬ãƒ³ã‚¸ãƒ‡ãƒ¼ã‚¿ã‚’å‰Šé™¤ã—ã¾ã—ãŸ"})}catch(e){return console.error("MTTãƒ¬ãƒ³ã‚¸ãƒ‡ãƒ¼ã‚¿ã®å‰Šé™¤ã‚¨ãƒ©ãƒ¼:",e),i.NextResponse.json({error:"ãƒ‡ãƒ¼ã‚¿ã®å‰Šé™¤ã«å¤±æ•—ã—ã¾ã—ãŸ"},{status:500})}}c().existsSync(m)||c().mkdirSync(m,{recursive:!0});let S=new n.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/mtt-ranges/route",pathname:"/api/mtt-ranges",filename:"route",bundlePath:"app/api/mtt-ranges/route"},resolvedPagePath:"/Users/kensuke/Desktop/gtovantage/src/app/api/mtt-ranges/route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:R,staticGenerationAsyncStorage:T,serverHooks:N}=S,k="/api/mtt-ranges/route";function q(){return(0,a.patchFetch)({serverHooks:N,staticGenerationAsyncStorage:T})}}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[276,972,482],()=>r(4017));module.exports=s})();