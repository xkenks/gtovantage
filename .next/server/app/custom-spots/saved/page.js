(()=>{var e={};e.id=863,e.ids=[863],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},39491:e=>{"use strict";e.exports=require("assert")},50852:e=>{"use strict";e.exports=require("async_hooks")},14300:e=>{"use strict";e.exports=require("buffer")},96206:e=>{"use strict";e.exports=require("console")},6113:e=>{"use strict";e.exports=require("crypto")},67643:e=>{"use strict";e.exports=require("diagnostics_channel")},9523:e=>{"use strict";e.exports=require("dns")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},85158:e=>{"use strict";e.exports=require("http2")},41808:e=>{"use strict";e.exports=require("net")},15673:e=>{"use strict";e.exports=require("node:events")},84492:e=>{"use strict";e.exports=require("node:stream")},47261:e=>{"use strict";e.exports=require("node:util")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},4074:e=>{"use strict";e.exports=require("perf_hooks")},77282:e=>{"use strict";e.exports=require("process")},63477:e=>{"use strict";e.exports=require("querystring")},12781:e=>{"use strict";e.exports=require("stream")},35356:e=>{"use strict";e.exports=require("stream/web")},71576:e=>{"use strict";e.exports=require("string_decoder")},24404:e=>{"use strict";e.exports=require("tls")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},29830:e=>{"use strict";e.exports=require("util/types")},71267:e=>{"use strict";e.exports=require("worker_threads")},59796:e=>{"use strict";e.exports=require("zlib")},48756:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>d.a,__next_app__:()=>u,originalPathname:()=>x,pages:()=>o,routeModule:()=>p,tree:()=>n});var r=s(67096),a=s(16132),i=s(37284),d=s.n(i),c=s(32564),l={};for(let e in c)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>c[e]);s.d(t,l);let n=["",{children:["custom-spots",{children:["saved",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,60067)),"/Users/kensuke/Desktop/gto-vantage/src/app/custom-spots/saved/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,85532)),"/Users/kensuke/Desktop/gto-vantage/src/app/layout.tsx"],error:[()=>Promise.resolve().then(s.bind(s,16097)),"/Users/kensuke/Desktop/gto-vantage/src/app/error.tsx"],loading:[()=>Promise.resolve().then(s.bind(s,68056)),"/Users/kensuke/Desktop/gto-vantage/src/app/loading.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,9291,23)),"next/dist/client/components/not-found-error"]}],o=["/Users/kensuke/Desktop/gto-vantage/src/app/custom-spots/saved/page.tsx"],x="/custom-spots/saved/page",u={require:s,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/custom-spots/saved/page",pathname:"/custom-spots/saved",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:n}})},21369:(e,t,s)=>{Promise.resolve().then(s.bind(s,79578))},79578:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>SavedCustomSpotsPage});var r=s(30784),a=s(9885),i=s(57114),d=s(67240),c=s(2167),l=s(72373),n=s(40858);function SavedCustomSpotsPage(){let e=(0,i.useRouter)(),{user:t,loading:s}=(0,d.useAuth)(),[o,x]=(0,a.useState)([]),[u,p]=(0,a.useState)(!0),[m,g]=(0,a.useState)(null),[h,y]=(0,a.useState)(""),[b,j]=(0,a.useState)("createdAt"),[k,v]=(0,a.useState)(!1),[f,N]=(0,a.useState)(null),[w,q]=(0,a.useState)(!1),[_,S]=(0,a.useState)(!1),[C,P]=(0,a.useState)(null);(0,a.useEffect)(()=>{if(!s){if(!t){e.push("/auth");return}loadScenarios()}},[s,t,e]);let loadScenarios=async()=>{if(t){p(!0),g(null);try{let e=(0,c.JU)(l.db,"users",t.uid),s=await (0,c.QT)(e);if(s.exists()){let e=s.data(),t=e.saved_scenarios||[];x(t)}else x([])}catch(e){console.error("シナリオ読み込みエラー:",e),g("保存されたシナリオの読み込み中にエラーが発生しました。")}finally{p(!1)}}},confirmDelete=e=>{P(e),q(!0)},deleteScenario=async e=>{if(t)try{let s=(0,c.JU)(l.db,"users",t.uid),r=await (0,c.QT)(s);if(r.exists()){let t=r.data(),a=(t.saved_scenarios||[]).filter(t=>t.id!==e);await (0,c.r7)(s,{saved_scenarios:a}),x(a),q(!1),P(null)}}catch(e){console.error("シナリオ削除エラー:",e),g("シナリオの削除中にエラーが発生しました。")}},viewScenarioDetails=e=>{N(e),S(!0)},editScenario=t=>{e.push(`/custom-spots?id=${t}`)},handleSort=e=>{b===e?v(!k):(j(e),v(!0))},A=o.filter(e=>e.name.toLowerCase().includes(h.toLowerCase())||e.position.toLowerCase().includes(h.toLowerCase())||e.action.toLowerCase().includes(h.toLowerCase())).sort((e,t)=>{if("createdAt"===b){let s=e.createdAt?e.createdAt.toDate().getTime():0,r=t.createdAt?t.createdAt.toDate().getTime():0;return k?s-r:r-s}return e[b]<t[b]?k?-1:1:e[b]>t[b]?k?1:-1:0});return s?r.jsx("div",{className:"min-h-screen flex justify-center items-center",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500 mx-auto"}),r.jsx("p",{className:"mt-4 text-gray-700 dark:text-gray-300",children:"読み込み中..."})]})}):(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 py-8 px-4 sm:px-6 lg:px-8",children:[r.jsx("div",{className:"max-w-6xl mx-auto",children:(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden",children:[(0,r.jsxs)("div",{className:"px-6 py-4 bg-blue-600 text-white flex justify-between items-center",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("button",{onClick:()=>e.push("/custom-spots"),className:"mr-4 hover:bg-blue-700 p-2 rounded-full",children:r.jsx(n.x_l,{})}),r.jsx("h1",{className:"text-xl font-bold",children:"保存したカスタムスポット"})]}),(0,r.jsxs)("div",{className:"relative",children:[r.jsx(n.U41,{className:"absolute left-3 top-3 text-gray-400"}),r.jsx("input",{type:"text",placeholder:"検索...",value:h,onChange:e=>y(e.target.value),className:"pl-10 pr-4 py-2 bg-blue-700 text-white rounded-md border border-blue-500 placeholder-blue-300 focus:outline-none focus:ring-2 focus:ring-white"})]})]}),(0,r.jsxs)("div",{className:"p-6",children:[m&&r.jsx("div",{className:"mb-6 p-4 rounded-md bg-red-50 dark:bg-red-900/30 text-red-800 dark:text-red-200",children:m}),u?(0,r.jsxs)("div",{className:"text-center py-10",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500 mx-auto"}),r.jsx("p",{className:"mt-4 text-gray-700 dark:text-gray-300",children:"シナリオを読み込み中..."})]}):A.length>0?r.jsx("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[r.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:(0,r.jsxs)("tr",{children:[r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider cursor-pointer",onClick:()=>handleSort("name"),children:(0,r.jsxs)("div",{className:"flex items-center",children:["シナリオ名","name"===b&&r.jsx(n.roE,{className:"ml-1 text-gray-400"})]})}),r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider cursor-pointer",onClick:()=>handleSort("position"),children:(0,r.jsxs)("div",{className:"flex items-center",children:["ポジション","position"===b&&r.jsx(n.roE,{className:"ml-1 text-gray-400"})]})}),r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider cursor-pointer",onClick:()=>handleSort("action"),children:(0,r.jsxs)("div",{className:"flex items-center",children:["アクション","action"===b&&r.jsx(n.roE,{className:"ml-1 text-gray-400"})]})}),r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider cursor-pointer",onClick:()=>handleSort("createdAt"),children:(0,r.jsxs)("div",{className:"flex items-center",children:["作成日","createdAt"===b&&r.jsx(n.roE,{className:"ml-1 text-gray-400"})]})}),r.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"アクション"})]})}),r.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:A.map(e=>(0,r.jsxs)("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:e.name}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",children:e.position}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",children:e.action}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",children:e.createdAt?new Date(e.createdAt.toDate()).toLocaleDateString("ja-JP"):"不明"}),(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[r.jsx("button",{onClick:()=>viewScenarioDetails(e),className:"text-blue-600 dark:text-blue-400 hover:text-blue-900 dark:hover:text-blue-300 mr-3",title:"詳細を表示",children:r.jsx(n.dSq,{})}),r.jsx("button",{onClick:()=>editScenario(e.id),className:"text-green-600 dark:text-green-400 hover:text-green-900 dark:hover:text-green-300 mr-3",title:"編集",children:r.jsx(n.fmQ,{})}),r.jsx("button",{onClick:()=>confirmDelete(e.id),className:"text-red-600 dark:text-red-400 hover:text-red-900 dark:hover:text-red-300",title:"削除",children:r.jsx(n.Xm5,{})})]})]},e.id))})]})}):(0,r.jsxs)("div",{className:"text-center py-10 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[r.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:"保存されたカスタムスポットはまだありません。"}),r.jsx("button",{onClick:()=>e.push("/custom-spots"),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"新しいカスタムスポットを作成"})]})]})]})}),w&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full p-6",children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"シナリオを削除しますか？"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:"この操作は元に戻せません。本当にこのカスタムスポットを削除しますか？"}),(0,r.jsxs)("div",{className:"flex justify-end space-x-3",children:[r.jsx("button",{onClick:()=>q(!1),className:"px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 rounded-md hover:bg-gray-300 dark:hover:bg-gray-600",children:"キャンセル"}),r.jsx("button",{onClick:()=>C&&deleteScenario(C),className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700",children:"削除"})]})]})}),_&&f&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full p-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h3",{className:"text-xl font-medium text-gray-900 dark:text-white",children:f.name}),r.jsx("button",{onClick:()=>S(!1),className:"text-gray-500 hover:text-gray-700 dark:text-gray-300 dark:hover:text-gray-100",children:r.jsx(n.Xm5,{className:"h-5 w-5"})})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"ポジション"}),r.jsx("p",{className:"text-gray-900 dark:text-white",children:f.position})]}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"アクション"}),r.jsx("p",{className:"text-gray-900 dark:text-white",children:f.action})]}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"スタック (BB)"}),r.jsx("p",{className:"text-gray-900 dark:text-white",children:f.stack})]}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"ポットサイズ (BB)"}),r.jsx("p",{className:"text-gray-900 dark:text-white",children:f.pot})]})]}),f.customParameters&&f.customParameters.length>0&&(0,r.jsxs)("div",{className:"mb-4",children:[r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-2",children:"カスタムパラメータ"}),r.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-md",children:f.customParameters.map((e,t)=>(0,r.jsxs)("div",{className:"flex justify-between mb-2 last:mb-0",children:[(0,r.jsxs)("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:[e.name,":"]}),r.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:e.value})]},t))})]}),(0,r.jsxs)("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-4 mt-4",children:[r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"作成日"}),r.jsx("p",{className:"text-gray-900 dark:text-white",children:f.createdAt?new Date(f.createdAt.toDate()).toLocaleString("ja-JP"):"不明"})]}),r.jsx("div",{className:"flex justify-end space-x-3 mt-6",children:r.jsx("button",{onClick:()=>{S(!1),editScenario(f.id)},className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"編集"})})]})})]})}},60067:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>d,__esModule:()=>i,default:()=>l});var r=s(95153);let a=(0,r.createProxy)(String.raw`/Users/kensuke/Desktop/gto-vantage/src/app/custom-spots/saved/page.tsx`),{__esModule:i,$$typeof:d}=a,c=a.default,l=c}};var t=require("../../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),s=t.X(0,[669,665,858,737,716,373],()=>__webpack_exec__(48756));module.exports=s})();