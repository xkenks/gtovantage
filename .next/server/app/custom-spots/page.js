(()=>{var e={};e.id=657,e.ids=[657],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},39491:e=>{"use strict";e.exports=require("assert")},50852:e=>{"use strict";e.exports=require("async_hooks")},14300:e=>{"use strict";e.exports=require("buffer")},96206:e=>{"use strict";e.exports=require("console")},6113:e=>{"use strict";e.exports=require("crypto")},67643:e=>{"use strict";e.exports=require("diagnostics_channel")},9523:e=>{"use strict";e.exports=require("dns")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},85158:e=>{"use strict";e.exports=require("http2")},41808:e=>{"use strict";e.exports=require("net")},15673:e=>{"use strict";e.exports=require("node:events")},84492:e=>{"use strict";e.exports=require("node:stream")},47261:e=>{"use strict";e.exports=require("node:util")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},4074:e=>{"use strict";e.exports=require("perf_hooks")},77282:e=>{"use strict";e.exports=require("process")},63477:e=>{"use strict";e.exports=require("querystring")},12781:e=>{"use strict";e.exports=require("stream")},35356:e=>{"use strict";e.exports=require("stream/web")},71576:e=>{"use strict";e.exports=require("string_decoder")},24404:e=>{"use strict";e.exports=require("tls")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},29830:e=>{"use strict";e.exports=require("util/types")},71267:e=>{"use strict";e.exports=require("worker_threads")},59796:e=>{"use strict";e.exports=require("zlib")},17821:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>x,originalPathname:()=>d,pages:()=>u,routeModule:()=>m,tree:()=>c});var r=s(67096),a=s(16132),i=s(37284),n=s.n(i),l=s(32564),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);s.d(t,o);let c=["",{children:["custom-spots",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,64379)),"/Users/kensuke/Desktop/gto-vantage/src/app/custom-spots/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,85532)),"/Users/kensuke/Desktop/gto-vantage/src/app/layout.tsx"],error:[()=>Promise.resolve().then(s.bind(s,16097)),"/Users/kensuke/Desktop/gto-vantage/src/app/error.tsx"],loading:[()=>Promise.resolve().then(s.bind(s,68056)),"/Users/kensuke/Desktop/gto-vantage/src/app/loading.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,9291,23)),"next/dist/client/components/not-found-error"]}],u=["/Users/kensuke/Desktop/gto-vantage/src/app/custom-spots/page.tsx"],d="/custom-spots/page",x={require:s,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/custom-spots/page",pathname:"/custom-spots",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},64722:(e,t,s)=>{Promise.resolve().then(s.bind(s,56869))},56869:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>CustomSpotsPage});var r=s(30784),a=s(9885),i=s(57114),n=s(67240),l=s(2167),o=s(72373),c=s(40858);function CustomSpotsContent(){let e=(0,i.useRouter)(),t=(0,i.useSearchParams)(),{user:s,userProfile:u,loading:d}=(0,n.useAuth)(),[x,m]=(0,a.useState)(null),[p,h]=(0,a.useState)(!1),[g,b]=(0,a.useState)(""),[v,j]=(0,a.useState)("SB"),[y,k]=(0,a.useState)("OPEN"),[f,N]=(0,a.useState)(100),[q,_]=(0,a.useState)(1.5),[w,S]=(0,a.useState)([]),[P,C]=(0,a.useState)(""),[B,E]=(0,a.useState)(""),[F,U]=(0,a.useState)(!1),[T,D]=(0,a.useState)(null),[A,G]=(0,a.useState)(null);(0,a.useEffect)(()=>{let e=t.get("id");e&&(m(e),h(!0))},[t]),(0,a.useEffect)(()=>{if(!d){if(!s){e.push("/auth");return}if(p&&x&&u){let e=u.saved_scenarios?.find(e=>e.id===x);e?(b(e.name),j(e.position),k(e.action),N(e.stack),_(e.pot||1.5),S(e.customParameters||[])):D("指定されたシナリオが見つかりませんでした。")}}},[d,s,u,p,x,e]);let removeCustomParameter=e=>{S(w.filter((t,s)=>s!==e))},saveScenarioToFirestore=async()=>{if(!s){D("ログインが必要です。");return}if(!g.trim()){D("シナリオ名を入力してください。");return}U(!0),D(null),G(null);try{let e=(0,l.JU)(o.db,"users",s.uid),t=await (0,l.QT)(e);if(!t.exists()){D("ユーザープロファイルが見つかりません。"),U(!1);return}let r={id:x||Date.now().toString(),name:g,position:v,action:y,stack:f,pot:q,customParameters:w,createdAt:l.EK.now()};if(p&&x){let s=t.data(),a=s.saved_scenarios||[],i=a.map(e=>e.id===x?r:e);await (0,l.r7)(e,{saved_scenarios:i}),G("シナリオを更新しました。")}else await (0,l.r7)(e,{saved_scenarios:(0,l.vr)(r)}),G("シナリオを保存しました。");p||(b(""),j("SB"),k("OPEN"),N(100),_(1.5),S([]))}catch(e){console.error("シナリオ保存エラー:",e),D("シナリオの保存中にエラーが発生しました。")}finally{U(!1)}};return d?r.jsx("div",{className:"min-h-screen flex justify-center items-center",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500 mx-auto"}),r.jsx("p",{className:"mt-4 text-gray-700 dark:text-gray-300",children:"読み込み中..."})]})}):r.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 py-8 px-4 sm:px-6 lg:px-8",children:r.jsx("div",{className:"max-w-3xl mx-auto",children:(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden",children:[(0,r.jsxs)("div",{className:"px-6 py-4 bg-blue-600 text-white flex justify-between items-center",children:[r.jsx("h1",{className:"text-xl font-bold",children:p?"カスタムスポットを編集":"カスタムスポットを作成"}),p&&r.jsx("button",{onClick:()=>{e.push("/custom-spots/saved")},className:"px-3 py-1 bg-white text-blue-600 rounded hover:bg-blue-50 transition-colors",children:"保存済みスポットへ戻る"})]}),(0,r.jsxs)("div",{className:"p-6",children:[(T||A)&&r.jsx("div",{className:`mb-6 p-4 rounded-md ${T?"bg-red-50 dark:bg-red-900/30 text-red-800 dark:text-red-200":"bg-green-50 dark:bg-green-900/30 text-green-800 dark:text-green-200"}`,children:T||A}),(0,r.jsxs)("form",{onSubmit:e=>{e.preventDefault(),saveScenarioToFirestore()},children:[(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsxs)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["シナリオ名 ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",id:"name",value:g,onChange:e=>b(e.target.value),className:"input",placeholder:"例: SB vs BB 3bet pot",required:!0})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:"position",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"ポジション"}),(0,r.jsxs)("select",{id:"position",value:v,onChange:e=>j(e.target.value),className:"input",children:[r.jsx("option",{value:"SB",children:"SB (スモールブラインド)"}),r.jsx("option",{value:"BB",children:"BB (ビッグブラインド)"}),r.jsx("option",{value:"BU",children:"BU (ボタン)"}),r.jsx("option",{value:"CO",children:"CO (カットオフ)"}),r.jsx("option",{value:"HJ",children:"HJ (ハイジャック)"}),r.jsx("option",{value:"LJ",children:"LJ (ロージャック)"}),r.jsx("option",{value:"UTG",children:"UTG (アンダーザガン)"})]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:"action",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"アクション"}),(0,r.jsxs)("select",{id:"action",value:y,onChange:e=>k(e.target.value),className:"input",children:[r.jsx("option",{value:"OPEN",children:"オープン"}),r.jsx("option",{value:"3BET",children:"3ベット"}),r.jsx("option",{value:"4BET",children:"4ベット"}),r.jsx("option",{value:"CALL",children:"コール"}),r.jsx("option",{value:"CHECK",children:"チェック"}),r.jsx("option",{value:"BET",children:"ベット"}),r.jsx("option",{value:"RAISE",children:"レイズ"})]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:"stack",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"スタック (BB)"}),r.jsx("input",{type:"number",id:"stack",value:f,onChange:e=>N(Number(e.target.value)),min:"1",className:"input"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:"pot",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"ポットサイズ (BB)"}),r.jsx("input",{type:"number",id:"pot",value:q,onChange:e=>_(Number(e.target.value)),min:"0.5",step:"0.5",className:"input"})]})]}),(0,r.jsxs)("div",{className:"mb-6",children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"カスタムパラメータ"}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"特定のシナリオに固有のパラメータを追加できます。"}),w.length>0&&(0,r.jsxs)("div",{className:"mb-4 bg-gray-50 dark:bg-gray-700 p-4 rounded-md",children:[r.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"追加済みパラメータ"}),r.jsx("ul",{className:"space-y-2",children:w.map((e,t)=>(0,r.jsxs)("li",{className:"flex justify-between items-center p-2 bg-white dark:bg-gray-800 rounded shadow-sm",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:[e.name,":"]}),r.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-400",children:e.value})]}),r.jsx("button",{type:"button",onClick:()=>removeCustomParameter(t),className:"text-red-500 hover:text-red-700",children:r.jsx(c.aHS,{})})]},t))})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:"newParamName",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"パラメータ名"}),r.jsx("input",{type:"text",id:"newParamName",value:P,onChange:e=>C(e.target.value),className:"input",placeholder:"例: ボードテクスチャ"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:"newParamValue",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"値"}),r.jsx("input",{type:"text",id:"newParamValue",value:B,onChange:e=>E(e.target.value),className:"input",placeholder:"例: ドライ"})]}),r.jsx("button",{type:"button",onClick:()=>{if(!P.trim()){D("パラメータ名を入力してください。");return}let e=isNaN(Number(B))?B:Number(B);S([...w,{name:P,value:e}]),C(""),E("")},className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md",children:"パラメータを追加"})]})]}),r.jsx("div",{className:"flex justify-end",children:r.jsx("button",{type:"submit",disabled:F,className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-md shadow-sm flex items-center disabled:opacity-70",children:F?(0,r.jsxs)(r.Fragment,{children:[r.jsx(c.fCD,{className:"animate-spin mr-2"}),"保存中..."]}):(0,r.jsxs)(r.Fragment,{children:[r.jsx(c.TvB,{className:"mr-2"}),p?"スポットを更新":"スポットを保存"]})})})]})]})]})})})}function CustomSpotsPage(){return r.jsx(a.Suspense,{fallback:r.jsx("div",{className:"min-h-screen flex justify-center items-center",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500 mx-auto"}),r.jsx("p",{className:"mt-4 text-gray-700 dark:text-gray-300",children:"読み込み中..."})]})}),children:r.jsx(CustomSpotsContent,{})})}},64379:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>n,__esModule:()=>i,default:()=>o});var r=s(95153);let a=(0,r.createProxy)(String.raw`/Users/kensuke/Desktop/gto-vantage/src/app/custom-spots/page.tsx`),{__esModule:i,$$typeof:n}=a,l=a.default,o=l}};var t=require("../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),s=t.X(0,[669,665,858,737,716,373],()=>__webpack_exec__(17821));module.exports=s})();