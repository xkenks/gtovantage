(()=>{var e={};e.id=422,e.ids=[422],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},2701:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>n.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>o,routeModule:()=>u,tree:()=>d}),t(2636),t(8460),t(5866);var a=t(3191),r=t(8716),l=t(7922),n=t.n(l),i=t(5231),c={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>i[e]);t.d(s,c);let d=["",{children:["mypage",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,2636)),"/Users/kensuke/Desktop/gtovantage/src/app/mypage/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,8460)),"/Users/kensuke/Desktop/gtovantage/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,5866,23)),"next/dist/client/components/not-found-error"]}],o=["/Users/kensuke/Desktop/gtovantage/src/app/mypage/page.tsx"],m="/mypage/page",x={require:t,loadChunk:()=>Promise.resolve()},u=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/mypage/page",pathname:"/mypage",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},6200:(e,s,t)=>{Promise.resolve().then(t.bind(t,5333))},5333:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>d});var a=t(326),r=t(4001),l=t(434),n=t(7577),i=t(5047);function c({isOpen:e,onClose:s}){let{user:t}=(0,r.a)(),[l,i]=(0,n.useState)(""),[c,d]=(0,n.useState)(""),[o,m]=(0,n.useState)(""),[x,u]=(0,n.useState)(!1),[h,p]=(0,n.useState)(""),[g,b]=(0,n.useState)(""),y=async e=>{if(e.preventDefault(),p(""),b(""),!l||!c||!o){p("全てのフィールドを入力してください");return}if(c.length<6){p("新しいパスワードは6文字以上である必要があります");return}if(c!==o){p("新しいパスワードと確認用パスワードが一致しません");return}if(!t){p("ユーザー情報が見つかりません");return}u(!0),setTimeout(()=>{b("パスワードが正常に変更されました"),i(""),d(""),m(""),u(!1),setTimeout(()=>{s(),b("")},2e3)},1e3)};return e?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6 w-full max-w-md mx-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-white",children:"パスワード変更"}),a.jsx("button",{onClick:s,className:"text-gray-400 hover:text-white text-2xl font-bold",children:"\xd7"})]}),(0,a.jsxs)("form",{onSubmit:y,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"currentPassword",className:"block text-sm font-medium text-gray-300 mb-1",children:"現在のパスワード"}),a.jsx("input",{type:"password",id:"currentPassword",value:l,onChange:e=>i(e.target.value),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"現在のパスワードを入力"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-gray-300 mb-1",children:"新しいパスワード"}),a.jsx("input",{type:"password",id:"newPassword",value:c,onChange:e=>d(e.target.value),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"新しいパスワードを入力（6文字以上）"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-300 mb-1",children:"新しいパスワード（確認）"}),a.jsx("input",{type:"password",id:"confirmPassword",value:o,onChange:e=>m(e.target.value),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"新しいパスワードを再入力"})]}),h&&a.jsx("div",{className:"bg-red-900 border border-red-700 text-red-200 px-3 py-2 rounded-md text-sm",children:h}),g&&a.jsx("div",{className:"bg-green-900 border border-green-700 text-green-200 px-3 py-2 rounded-md text-sm",children:g}),(0,a.jsxs)("div",{className:"flex gap-3 pt-4",children:[a.jsx("button",{type:"button",onClick:s,className:"flex-1 px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 transition-colors",disabled:x,children:"キャンセル"}),a.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:x,children:x?"変更中...":"パスワード変更"})]})]})]})}):null}function d(){let{user:e,isEmailVerified:s,isMasterUser:t,hasActiveSubscription:d,practiceCount:o,maxPracticeCount:m}=(0,r.a)(),[x,u]=(0,n.useState)(!1),[h,p]=(0,n.useState)({totalQuestions:0,correctAnswers:0,incorrectAnswers:0,accuracyRate:0,monthlyStats:{practiceDays:0,totalPractice:0,averageAccuracy:0,consecutiveCorrect:0},monthlyAccuracy:[{month:"1月",rate:0,color:"bg-gray-500"},{month:"2月",rate:0,color:"bg-gray-500"},{month:"3月",rate:0,color:"bg-gray-500"},{month:"4月",rate:0,color:"bg-gray-500"},{month:"5月",rate:0,color:"bg-gray-500"},{month:"6月",rate:0,color:"bg-gray-500"},{month:"7月",rate:0,color:"bg-gray-500"},{month:"8月",rate:0,color:"bg-gray-500"}]});return((0,i.useRouter)(),e)?(0,a.jsxs)("div",{className:"min-h-screen py-8",children:[(0,a.jsxs)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[a.jsx("div",{className:"bg-gray-800 rounded-lg shadow-sm p-6 mb-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-white",children:"マイページ"}),a.jsx("p",{className:"text-gray-300 mt-1",children:"アカウント情報と設定を管理"})]}),a.jsx("div",{className:"hidden sm:block",children:a.jsx("div",{className:"w-16 h-16 bg-blue-600 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-white text-xl font-bold",children:e?.name?.charAt(0).toUpperCase()||"U"})})})]})}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-gray-800 rounded-lg shadow-sm p-6",children:[a.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"アカウント情報"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between py-3 border-b border-gray-700",children:[a.jsx("span",{className:"text-gray-300",children:"ユーザー名"}),a.jsx("span",{className:"font-medium text-white",children:e.name})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between py-3 border-b border-gray-700",children:[a.jsx("span",{className:"text-gray-300",children:"メールアドレス"}),a.jsx("span",{className:"font-medium text-white",children:e.email})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between py-3 border-b border-gray-700",children:[a.jsx("span",{className:"text-gray-300",children:"登録日"}),a.jsx("span",{className:"font-medium text-white",children:e.createdAt?new Date(e.createdAt).toLocaleDateString("ja-JP"):"-"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between py-3 border-b border-gray-700",children:[a.jsx("span",{className:"text-gray-300",children:"メール認証"}),a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${s?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:s?"認証済み":"未認証"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between py-3",children:[a.jsx("span",{className:"text-gray-300",children:"パスワード"}),(0,a.jsxs)("button",{onClick:()=>u(!0),className:"inline-flex items-center px-3 py-1 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors text-sm",children:[a.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"})}),"変更"]})]})]})]}),(0,a.jsxs)("div",{className:"bg-gray-800 rounded-lg shadow-sm p-6",children:[a.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"サブスクリプション"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between py-3 border-b border-gray-700",children:[a.jsx("span",{className:"text-gray-300",children:"現在のプラン"}),a.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${"master"===e.subscriptionStatus?"bg-purple-100 text-purple-800":"premium"===e.subscriptionStatus?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:"master"===e.subscriptionStatus?"マスター":"premium"===e.subscriptionStatus?"プレミアム":"フリー"})]}),a.jsx("div",{className:"pt-4",children:(0,a.jsxs)(l.default,{href:"/subscription",className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:["サブスクリプション管理",a.jsx("svg",{className:"w-4 h-4 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})})]})]}),(0,a.jsxs)("div",{className:"bg-gray-800 rounded-lg shadow-sm p-6",children:[a.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"統計情報"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[(0,a.jsxs)("div",{className:"bg-gray-700 rounded-lg p-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"正解統計"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-gray-300",children:"総問題数"}),a.jsx("span",{className:"text-white font-semibold",children:h.totalQuestions>0?h.totalQuestions:"--"})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-gray-300",children:"正解数"}),a.jsx("span",{className:"text-green-400 font-semibold",children:h.correctAnswers>0?h.correctAnswers:"--"})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-gray-300",children:"不正解数"}),a.jsx("span",{className:"text-red-400 font-semibold",children:h.incorrectAnswers>0?h.incorrectAnswers:"--"})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-gray-300",children:"正解率"}),a.jsx("span",{className:"text-blue-400 font-semibold",children:h.accuracyRate>0?`${h.accuracyRate}%`:"--"})]})]})]}),(0,a.jsxs)("div",{className:"bg-gray-700 rounded-lg p-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"今月の統計"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-gray-300",children:"練習日数"}),a.jsx("span",{className:"text-white font-semibold",children:h.monthlyStats.practiceDays>0?h.monthlyStats.practiceDays:"--"})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-gray-300",children:"総練習回数"}),a.jsx("span",{className:"text-green-400 font-semibold",children:h.monthlyStats.totalPractice>0?h.monthlyStats.totalPractice:"--"})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-gray-300",children:"平均正解率"}),a.jsx("span",{className:"text-blue-400 font-semibold",children:h.monthlyStats.averageAccuracy>0?`${h.monthlyStats.averageAccuracy}%`:"--"})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-gray-300",children:"連続正解"}),a.jsx("span",{className:"text-purple-400 font-semibold",children:h.monthlyStats.consecutiveCorrect>0?h.monthlyStats.consecutiveCorrect:"--"})]})]})]})]}),(0,a.jsxs)("div",{className:"bg-gray-700 rounded-lg p-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"月別正解率推移"}),a.jsx("div",{className:"space-y-3",children:h.monthlyAccuracy.map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx("span",{className:"text-gray-300 w-8 text-sm",children:e.month}),a.jsx("div",{className:"flex-1 bg-gray-600 rounded-full h-3",children:a.jsx("div",{className:`${e.color} h-3 rounded-full transition-all duration-300`,style:{width:`${e.rate}%`}})}),(0,a.jsxs)("span",{className:"text-white font-semibold w-12 text-sm",children:[e.rate,"%"]})]},s))}),h.monthlyAccuracy.every(e=>0===e.rate)&&a.jsx("div",{className:"mt-4 text-center",children:a.jsx("p",{className:"text-gray-400 text-sm",children:"データがありません。トレーニングを開始してデータを蓄積しましょう。"})})]})]})]})]}),a.jsx(c,{isOpen:x,onClose:()=>u(!1)})]}):null}},2636:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>a});let a=(0,t(8570).createProxy)(String.raw`/Users/kensuke/Desktop/gtovantage/src/app/mypage/page.tsx#default`)}};var s=require("../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[276,338,673],()=>t(2701));module.exports=a})();