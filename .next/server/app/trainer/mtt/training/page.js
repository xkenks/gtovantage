(()=>{var e={};e.id=530,e.ids=[530],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},8971:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>x,originalPathname:()=>u,pages:()=>d,routeModule:()=>h,tree:()=>c});var r=s(7096),n=s(6132),o=s(7284),i=s.n(o),a=s(2564),l={};for(let e in a)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>a[e]);s.d(t,l);let c=["",{children:["trainer",{children:["mtt",{children:["training",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,8532)),"/Users/kensuke/Desktop/gtovantage/src/app/trainer/mtt/training/page.tsx"]}]},{}]},{}]},{"not-found":[()=>Promise.resolve().then(s.bind(s,9609)),"/Users/kensuke/Desktop/gtovantage/src/app/trainer/not-found.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,5532)),"/Users/kensuke/Desktop/gtovantage/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,9291,23)),"next/dist/client/components/not-found-error"]}],d=["/Users/kensuke/Desktop/gtovantage/src/app/trainer/mtt/training/page.tsx"],u="/trainer/mtt/training/page",x={require:s,loadChunk:()=>Promise.resolve()},h=new r.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/trainer/mtt/training/page",pathname:"/trainer/mtt/training",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},9372:(e,t,s)=>{Promise.resolve().then(s.bind(s,7459))},7459:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>MTTTrainingPage});var r=s(784),n=s(9885),o=s(7114);let i={s:{color:"text-white",bgColor:"bg-gray-600",border:"border-gray-700",symbol:"♠"},h:{color:"text-white",bgColor:"bg-red-600",border:"border-red-700",symbol:"♥"},c:{color:"text-white",bgColor:"bg-green-600",border:"border-green-700",symbol:"♣"},d:{color:"text-white",bgColor:"bg-blue-600",border:"border-blue-700",symbol:"♦"}},a={A:"A",K:"K",Q:"Q",J:"J",T:"10",9:"9",8:"8",7:"7",6:"6",5:"5",4:"4",3:"3",2:"2"},PokerCard=({card:e,size:t="md",highlight:s=!1})=>{(!e||e.length<2||"??"===e)&&(e="As");let n=e[0].toUpperCase(),o=e[1].toLowerCase(),l=i[o]||{color:"text-white",bgColor:"bg-gray-500",border:"border-gray-600",symbol:"?"},c=a[n]||n,d={sm:{width:"w-[35px]",height:"h-[46px]",fontSize:"text-2xl",symbolSize:"text-5xl",padding:"p-1"},md:{width:"w-[46px]",height:"h-[64px]",fontSize:"text-3xl",symbolSize:"text-6xl",padding:"p-1.5"},lg:{width:"w-[70px]",height:"h-[96px]",fontSize:"text-5xl",symbolSize:"text-8xl",padding:"p-2"}}[t];return(0,r.jsxs)("div",{className:`
        ${d.width}
        ${d.height}
        ${l.bgColor}
        rounded-md
        ${s?"border-yellow-400 border-2":`border ${l.border} border-2`}
        ${s?"shadow-[0_0_10px_rgba(250,204,21,0.8)]":"shadow-md"}
        flex
        items-center
        justify-center
        ${d.padding}
        m-0
        relative
        overflow-hidden
      `,children:[r.jsx("div",{className:"absolute inset-0 flex items-center justify-end opacity-20 z-0",children:r.jsx("span",{className:`${l.color} ${d.symbolSize} transform translate-x-1/2`,children:l.symbol})}),r.jsx("span",{className:`${l.color} ${d.fontSize} font-bold z-10`,children:c})]})},PokerCardList=({cards:e,size:t="md",highlightedCards:s=[]})=>{let n=[...e];return 0===n.length?n=["As","Kd"]:1===n.length&&n.push("Kd"),n=n.slice(0,2),r.jsx("div",{className:"flex items-center gap-0 space-x-0.5",children:n.map((e,n)=>r.jsx(PokerCard,{card:e,size:t,highlight:s.includes(e)},n))})},l={AA:{action:"RFI",frequency:100},KK:{action:"RFI",frequency:100},QQ:{action:"RFI",frequency:100},JJ:{action:"RFI",frequency:100},TT:{action:"RFI",frequency:100},99:{action:"RFI",frequency:100},88:{action:"RFI",frequency:100},77:{action:"RFI",frequency:100},66:{action:"RFI",frequency:100},55:{action:"RFI",frequency:100},44:{action:"RFI",frequency:100},33:{action:"RFI",frequency:100},22:{action:"RFI",frequency:100},AKs:{action:"RFI",frequency:100},AQs:{action:"RFI",frequency:100},AJs:{action:"RFI",frequency:100},ATs:{action:"RFI",frequency:100},A9s:{action:"RFI",frequency:100},A8s:{action:"RFI",frequency:100},A7s:{action:"RFI",frequency:100},A6s:{action:"RFI",frequency:100},A5s:{action:"RFI",frequency:100},A4s:{action:"RFI",frequency:100},A3s:{action:"RFI",frequency:100},A2s:{action:"RFI",frequency:100},AKo:{action:"RFI",frequency:100},AQo:{action:"RFI",frequency:100},AJo:{action:"RFI",frequency:100},ATo:{action:"RFI",frequency:100},A9o:{action:"RFI",frequency:100},A8o:{action:"RFI",frequency:100},A7o:{action:"RFI",frequency:100},A6o:{action:"RFI",frequency:100},A5o:{action:"RFI",frequency:100},A4o:{action:"FOLD",frequency:0},A3o:{action:"FOLD",frequency:0},A2o:{action:"FOLD",frequency:0},KQs:{action:"RFI",frequency:100},KJs:{action:"RFI",frequency:100},KTs:{action:"RFI",frequency:100},K9s:{action:"RFI",frequency:100},K8s:{action:"RFI",frequency:100},K7s:{action:"RFI",frequency:100},K6s:{action:"RFI",frequency:100},K5s:{action:"RFI",frequency:100},K4s:{action:"RFI",frequency:100},K3s:{action:"RFI",frequency:100},K2s:{action:"RFI",frequency:100},KQo:{action:"RFI",frequency:100},KJo:{action:"RFI",frequency:100},KTo:{action:"RFI",frequency:100},K9o:{action:"RFI",frequency:100},K8o:{action:"RFI",frequency:100},K7o:{action:"RFI",frequency:100},K6o:{action:"RFI",frequency:100},K5o:{action:"RFI",frequency:100},K4o:{action:"RFI",frequency:100},K3o:{action:"FOLD",frequency:0},K2o:{action:"FOLD",frequency:0},QJs:{action:"RFI",frequency:100},QTs:{action:"RFI",frequency:100},Q9s:{action:"RFI",frequency:100},Q8s:{action:"RFI",frequency:100},Q7s:{action:"RFI",frequency:100},Q6s:{action:"RFI",frequency:100},Q5s:{action:"RFI",frequency:100},Q4s:{action:"RFI",frequency:100},Q3s:{action:"RFI",frequency:100},Q2s:{action:"RFI",frequency:100},QJo:{action:"RFI",frequency:100},QTo:{action:"RFI",frequency:100},Q9o:{action:"RFI",frequency:100},Q8o:{action:"RFI",frequency:100},Q7o:{action:"RFI",frequency:100},Q6o:{action:"RFI",frequency:100},Q5o:{action:"RFI",frequency:100},Q4o:{action:"RFI",frequency:100},Q3o:{action:"FOLD",frequency:0},Q2o:{action:"FOLD",frequency:0},JTs:{action:"RFI",frequency:100},J9s:{action:"RFI",frequency:100},J8s:{action:"RFI",frequency:100},J7s:{action:"RFI",frequency:100},J6s:{action:"RFI",frequency:100},J5s:{action:"RFI",frequency:100},J4s:{action:"RFI",frequency:100},J3s:{action:"RFI",frequency:100},J2s:{action:"RFI",frequency:100},JTo:{action:"RFI",frequency:100},J9o:{action:"RFI",frequency:100},J8o:{action:"RFI",frequency:100},J7o:{action:"RFI",frequency:100},J6o:{action:"RFI",frequency:100},J5o:{action:"RFI",frequency:100},J4o:{action:"FOLD",frequency:0},J3o:{action:"FOLD",frequency:0},J2o:{action:"FOLD",frequency:0},T9s:{action:"RFI",frequency:100},T8s:{action:"RFI",frequency:100},T7s:{action:"RFI",frequency:100},T6s:{action:"RFI",frequency:100},T5s:{action:"RFI",frequency:100},T4s:{action:"RFI",frequency:100},T3s:{action:"RFI",frequency:100},T2s:{action:"RFI",frequency:100},T9o:{action:"RFI",frequency:100},T8o:{action:"RFI",frequency:100},T7o:{action:"RFI",frequency:100},T6o:{action:"RFI",frequency:100},T5o:{action:"RFI",frequency:100},T4o:{action:"FOLD",frequency:0},T3o:{action:"FOLD",frequency:0},T2o:{action:"FOLD",frequency:0},"98s":{action:"RFI",frequency:100},"97s":{action:"RFI",frequency:100},"96s":{action:"RFI",frequency:100},"95s":{action:"RFI",frequency:100},"94s":{action:"RFI",frequency:100},"93s":{action:"RFI",frequency:100},"92s":{action:"RFI",frequency:100},"98o":{action:"RFI",frequency:100},"97o":{action:"RFI",frequency:100},"96o":{action:"RFI",frequency:100},"95o":{action:"RFI",frequency:100},"94o":{action:"FOLD",frequency:0},"93o":{action:"FOLD",frequency:0},"92o":{action:"FOLD",frequency:0},"87s":{action:"RFI",frequency:100},"86s":{action:"RFI",frequency:100},"85s":{action:"RFI",frequency:100},"84s":{action:"RFI",frequency:100},"83s":{action:"RFI",frequency:100},"82s":{action:"RFI",frequency:100},"87o":{action:"RFI",frequency:100},"86o":{action:"RFI",frequency:100},"85o":{action:"RFI",frequency:100},"84o":{action:"FOLD",frequency:0},"83o":{action:"FOLD",frequency:0},"82o":{action:"FOLD",frequency:0},"76s":{action:"RFI",frequency:100},"75s":{action:"RFI",frequency:100},"74s":{action:"RFI",frequency:100},"73s":{action:"RFI",frequency:100},"72s":{action:"RFI",frequency:100},"76o":{action:"RFI",frequency:100},"75o":{action:"RFI",frequency:100},"74o":{action:"FOLD",frequency:0},"73o":{action:"FOLD",frequency:0},"72o":{action:"FOLD",frequency:0},"65s":{action:"RFI",frequency:100},"64s":{action:"RFI",frequency:100},"63s":{action:"RFI",frequency:100},"62s":{action:"RFI",frequency:100},"65o":{action:"RFI",frequency:100},"64o":{action:"FOLD",frequency:0},"63o":{action:"FOLD",frequency:0},"62o":{action:"FOLD",frequency:0},"54s":{action:"RFI",frequency:100},"53s":{action:"RFI",frequency:100},"52s":{action:"RFI",frequency:100},"54o":{action:"RFI",frequency:100},"53o":{action:"FOLD",frequency:0},"52o":{action:"FOLD",frequency:0},"43s":{action:"RFI",frequency:100},"42s":{action:"RFI",frequency:100},"43o":{action:"FOLD",frequency:0},"42o":{action:"FOLD",frequency:0},"32s":{action:"RFI",frequency:100},"32o":{action:"FOLD",frequency:0}},c={AA:{action:"RFI",frequency:100},KK:{action:"RFI",frequency:100},QQ:{action:"RFI",frequency:100},JJ:{action:"RFI",frequency:100},TT:{action:"RFI",frequency:100},99:{action:"RFI",frequency:100},88:{action:"RFI",frequency:100},77:{action:"RFI",frequency:100},66:{action:"RFI",frequency:100},55:{action:"RFI",frequency:100},44:{action:"FOLD",frequency:0},33:{action:"FOLD",frequency:0},22:{action:"FOLD",frequency:0},AKs:{action:"RFI",frequency:100},AQs:{action:"RFI",frequency:100},AJs:{action:"RFI",frequency:100},ATs:{action:"RFI",frequency:100},A9s:{action:"FOLD",frequency:0},A8s:{action:"FOLD",frequency:0},A7s:{action:"FOLD",frequency:0},A6s:{action:"FOLD",frequency:0},A5s:{action:"RFI",frequency:100},A4s:{action:"RFI",frequency:100},A3s:{action:"FOLD",frequency:0},A2s:{action:"FOLD",frequency:0},AKo:{action:"RFI",frequency:100},AQo:{action:"RFI",frequency:100},AJo:{action:"RFI",frequency:100},ATo:{action:"RFI",frequency:100},A9o:{action:"FOLD",frequency:0},A8o:{action:"FOLD",frequency:0},A7o:{action:"FOLD",frequency:0},A6o:{action:"FOLD",frequency:0},A5o:{action:"FOLD",frequency:0},A4o:{action:"FOLD",frequency:0},A3o:{action:"FOLD",frequency:0},A2o:{action:"FOLD",frequency:0},KQs:{action:"RFI",frequency:100},KJs:{action:"RFI",frequency:100},KTs:{action:"FOLD",frequency:0},K9s:{action:"FOLD",frequency:0},K8s:{action:"FOLD",frequency:0},K7s:{action:"FOLD",frequency:0},K6s:{action:"FOLD",frequency:0},K5s:{action:"FOLD",frequency:0},K4s:{action:"FOLD",frequency:0},K3s:{action:"FOLD",frequency:0},K2s:{action:"FOLD",frequency:0},KQo:{action:"RFI",frequency:100},KJo:{action:"FOLD",frequency:0},KTo:{action:"FOLD",frequency:0},K9o:{action:"FOLD",frequency:0},K8o:{action:"FOLD",frequency:0},K7o:{action:"FOLD",frequency:0},K6o:{action:"FOLD",frequency:0},K5o:{action:"FOLD",frequency:0},K4o:{action:"FOLD",frequency:0},K3o:{action:"FOLD",frequency:0},K2o:{action:"FOLD",frequency:0},QJs:{action:"RFI",frequency:100},QTs:{action:"FOLD",frequency:0},Q9s:{action:"FOLD",frequency:0},Q8s:{action:"FOLD",frequency:0},Q7s:{action:"FOLD",frequency:0},Q6s:{action:"FOLD",frequency:0},Q5s:{action:"FOLD",frequency:0},Q4s:{action:"FOLD",frequency:0},Q3s:{action:"FOLD",frequency:0},Q2s:{action:"FOLD",frequency:0},QJo:{action:"FOLD",frequency:0},QTo:{action:"FOLD",frequency:0},Q9o:{action:"FOLD",frequency:0},Q8o:{action:"FOLD",frequency:0},Q7o:{action:"FOLD",frequency:0},Q6o:{action:"FOLD",frequency:0},Q5o:{action:"FOLD",frequency:0},Q4o:{action:"FOLD",frequency:0},Q3o:{action:"FOLD",frequency:0},Q2o:{action:"FOLD",frequency:0},JTs:{action:"RFI",frequency:100},J9s:{action:"FOLD",frequency:0},J8s:{action:"FOLD",frequency:0},J7s:{action:"FOLD",frequency:0},J6s:{action:"FOLD",frequency:0},J5s:{action:"FOLD",frequency:0},J4s:{action:"FOLD",frequency:0},J3s:{action:"FOLD",frequency:0},J2s:{action:"FOLD",frequency:0},JTo:{action:"FOLD",frequency:0},J9o:{action:"FOLD",frequency:0},J8o:{action:"FOLD",frequency:0},J7o:{action:"FOLD",frequency:0},J6o:{action:"FOLD",frequency:0},J5o:{action:"FOLD",frequency:0},J4o:{action:"FOLD",frequency:0},J3o:{action:"FOLD",frequency:0},J2o:{action:"FOLD",frequency:0},T9s:{action:"FOLD",frequency:0},T8s:{action:"FOLD",frequency:0},T7s:{action:"FOLD",frequency:0},T6s:{action:"FOLD",frequency:0},T5s:{action:"FOLD",frequency:0},T4s:{action:"FOLD",frequency:0},T3s:{action:"FOLD",frequency:0},T2s:{action:"FOLD",frequency:0},T9o:{action:"FOLD",frequency:0},T8o:{action:"FOLD",frequency:0},T7o:{action:"FOLD",frequency:0},T6o:{action:"FOLD",frequency:0},T5o:{action:"FOLD",frequency:0},T4o:{action:"FOLD",frequency:0},T3o:{action:"FOLD",frequency:0},T2o:{action:"FOLD",frequency:0},"98s":{action:"FOLD",frequency:0},"97s":{action:"FOLD",frequency:0},"96s":{action:"FOLD",frequency:0},"95s":{action:"FOLD",frequency:0},"94s":{action:"FOLD",frequency:0},"93s":{action:"FOLD",frequency:0},"92s":{action:"FOLD",frequency:0},"98o":{action:"FOLD",frequency:0},"97o":{action:"FOLD",frequency:0},"96o":{action:"FOLD",frequency:0},"95o":{action:"FOLD",frequency:0},"94o":{action:"FOLD",frequency:0},"93o":{action:"FOLD",frequency:0},"92o":{action:"FOLD",frequency:0},"87s":{action:"FOLD",frequency:0},"86s":{action:"FOLD",frequency:0},"85s":{action:"FOLD",frequency:0},"84s":{action:"FOLD",frequency:0},"83s":{action:"FOLD",frequency:0},"82s":{action:"FOLD",frequency:0},"87o":{action:"FOLD",frequency:0},"86o":{action:"FOLD",frequency:0},"85o":{action:"FOLD",frequency:0},"84o":{action:"FOLD",frequency:0},"83o":{action:"FOLD",frequency:0},"82o":{action:"FOLD",frequency:0},"76s":{action:"FOLD",frequency:0},"75s":{action:"FOLD",frequency:0},"74s":{action:"FOLD",frequency:0},"73s":{action:"FOLD",frequency:0},"72s":{action:"FOLD",frequency:0},"76o":{action:"FOLD",frequency:0},"75o":{action:"FOLD",frequency:0},"74o":{action:"FOLD",frequency:0},"73o":{action:"FOLD",frequency:0},"72o":{action:"FOLD",frequency:0},"65s":{action:"FOLD",frequency:0},"64s":{action:"FOLD",frequency:0},"63s":{action:"FOLD",frequency:0},"62s":{action:"FOLD",frequency:0},"65o":{action:"FOLD",frequency:0},"64o":{action:"FOLD",frequency:0},"63o":{action:"FOLD",frequency:0},"62o":{action:"FOLD",frequency:0},"54s":{action:"FOLD",frequency:0},"53s":{action:"FOLD",frequency:0},"52s":{action:"FOLD",frequency:0},"54o":{action:"FOLD",frequency:0},"53o":{action:"FOLD",frequency:0},"52o":{action:"FOLD",frequency:0},"43s":{action:"FOLD",frequency:0},"42s":{action:"FOLD",frequency:0},"43o":{action:"FOLD",frequency:0},"42o":{action:"FOLD",frequency:0},"32s":{action:"FOLD",frequency:0},"32o":{action:"FOLD",frequency:0}},d={BTN:l,CO:l,HJ:l,LJ:c,UTG1:c,UTG:c,SB:l},getRangeForPosition=e=>d[e]||c,getMTTRange=(e,t=100)=>{if(t<=15)switch(e){case"UTG":let s={};return s.AA={action:"ALL_IN",frequency:100},["KK","QQ","JJ","TT","99","88","77","66","55","AKs","AQs","AJs","ATs","A9s","A8s","A7s","A6s","A5s","A4s","A3s","A2s","AKo","AQo","AJo","ATo","KQs","KJs","KTs","K9s","KQo","QJs","QTs","JTs","T9s","98s"].forEach(e=>{s[e]={action:"MIN",frequency:100}}),new Proxy(s,{get:(e,t)=>"string"==typeof t&&e[t]?e[t]:{action:"FOLD",frequency:0}});case"UTG1":let r={};return["AA","KK","AKs","AKo"].forEach(e=>{r[e]={action:"ALL_IN",frequency:100}}),["QQ","JJ","TT","99","88","77","66","55","AQs","AJs","ATs","A9s","A8s","A7s","A6s","A5s","A4s","A3s","A2s","AQo","AJo","ATo","KQs","KJs","KTs","K9s","KQo","QJs","QTs","JTs","T9s","98s"].forEach(e=>{r[e]={action:"MIN",frequency:100}}),new Proxy(r,{get:(e,t)=>"string"==typeof t&&e[t]?e[t]:{action:"FOLD",frequency:0}});case"LJ":let n={};return["AA","KK","QQ","JJ","TT","99","AKs","AQs","AJs","ATs","AKo","AQo"].forEach(e=>{n[e]={action:"ALL_IN",frequency:100}}),["88","77","66","55","A9s","A8s","A7s","A6s","A5s","A4s","A3s","A2s","AJo","ATo","KQs","KJs","KTs","K9s","KQo","QJs","QTs","JTs","T9s","98s"].forEach(e=>{n[e]={action:"MIN",frequency:100}}),new Proxy(n,{get:(e,t)=>"string"==typeof t&&e[t]?e[t]:{action:"FOLD",frequency:0}});case"HJ":let o={};return["AA","KK","QQ","JJ","TT","99","88","77","AKs","AQs","AJs","ATs","A9s","A8s","AKo","AQo","AJo"].forEach(e=>{o[e]={action:"ALL_IN",frequency:100}}),["66","55","A7s","A6s","A5s","A4s","A3s","A2s","ATo","KQs","KJs","KTs","K9s","KQo","QJs","QTs","JTs","T9s","98s"].forEach(e=>{o[e]={action:"MIN",frequency:100}}),new Proxy(o,{get:(e,t)=>"string"==typeof t&&e[t]?e[t]:{action:"FOLD",frequency:0}});case"CO":let i={};return["AA","KK","QQ","JJ","TT","99","88","77","AKs","AQs","AJs","ATs","A9s","A8s","AKo","AQo","AJo"].forEach(e=>{i[e]={action:"ALL_IN",frequency:100}}),["66","55","A7s","A6s","A5s","A4s","A3s","A2s","ATo","KQs","KJs","KTs","K9s","KQo","QJs","QTs","JTs","T9s","98s"].forEach(e=>{i[e]={action:"MIN",frequency:100}}),new Proxy(i,{get:(e,t)=>"string"==typeof t&&e[t]?e[t]:{action:"FOLD",frequency:0}});case"BTN":let a={};return["AA","KK","QQ","JJ","TT","99","88","77","66","55","44","33","22","AKs","AQs","AJs","ATs","A9s","A8s","A7s","A6s","A5s","A4s","A3s","A2s","AKo","AQo","AJo","ATo","A9o","KQs","KJs","KTs","K9s","KQo","KJo","QJs","QTs","Q9s","QJo","JTs","J9s","JTo","T9s","98s"].forEach(e=>{a[e]={action:"ALL_IN",frequency:100}}),["A8o","A7o","A6o","A5o","A4o","A3o","A2o","K8s","K7s","K6s","K5s","K4s","K3s","K2s","KTo","K9o","K8o","K7o","K6o","K5o","K4o","K3o","K2o","Q8s","Q7s","Q6s","Q5s","Q4s","Q3s","Q2s","QTo","Q9o","Q8o","Q7o","Q6o","Q5o","Q4o","Q3o","Q2o","J8s","J7s","J6s","J5s","J4s","J3s","J2s","J9o","J8o","J7o","J6o","J5o","J4o","J3o","J2o","T8s","T7s","T6s","T5s","T4s","T3s","T2s","T9o","T8o","T7o","T6o","T5o","T4o","T3o","T2o","97s","96s","95s","94s","93s","92s","98o","97o","96o","95o","87s","86s","85s","84s","83s","82s","87o","86o","85o","76s","75s","74s","73s","72s","76o","75o","65s","64s","63s","62s","65o","54s","53s","52s","54o","43s","42s","32s"].forEach(e=>{a[e]={action:"CALL",frequency:100}}),new Proxy(a,{get:(e,t)=>"string"==typeof t&&e[t]?e[t]:{action:"FOLD",frequency:0}});case"SB":let l={};return["AA","KK","QQ","JJ","TT","99","88","77","66","55","44","33","22","AKs","AQs","AJs","ATs","A9s","A8s","A7s","A6s","A5s","A4s","A3s","A2s","AKo","AQo","AJo","ATo","A9o","A8o","A7o","A6o","A5o","A4o","A3o","A2o"].forEach(e=>{l[e]={action:"ALL_IN",frequency:100}}),["KQs","KJs","KTs","KQo","KJo"].forEach(e=>{l[e]={action:"3BB",frequency:100}}),["K9s","K8s","K7s","K6s","K5s","K4s","K3s","K2s","KTo","K9o","K8o","K7o","K6o","K5o","K4o","K3o","K2o","QJs","QTs","Q9s","Q8s","Q7s","Q6s","Q5s","Q4s","Q3s","Q2s","QJo","QTo","Q9o","Q8o","Q7o","Q6o","Q5o","Q4o","Q3o","Q2o","JTs","J9s","J8s","J7s","J6s","J5s","J4s","J3s","J2s","JTo","J9o","J8o","J7o","J6o","J5o","J4o","J3o","J2o","T9s","T8s","T7s","T6s","T5s","T4s","T3s","T2s","T9o","T8o","T7o","T6o","T5o","T4o","T3o","T2o","98s","97s","96s","95s","94s","93s","92s","98o","97o","96o","95o","94o","93o","92o","87s","86s","85s","84s","83s","82s","87o","86o","85o","84o","83o","82o","76s","75s","74s","73s","72s","76o","75o","74o","73o","72o","65s","64s","63s","62s","65o","64o","63o","62o","54s","53s","52s","54o","53o","52o","43s","42s","43o","42o","32s","32o"].forEach(e=>{l[e]={action:"CALL",frequency:100}}),new Proxy(l,{get:(e,t)=>"string"==typeof t&&e[t]?e[t]:{action:"FOLD",frequency:0}});default:return getMTTRange("UTG",t)}return getRangeForPosition(e)},HandRangeGrid=({rangeData:e,title:t,onClose:s,onSelectHands:o,initialSelectedHands:i=[],showLegend:a=!0})=>{let[l,c]=(0,n.useState)(i),[d,u]=(0,n.useState)(!1),[x,h]=(0,n.useState)(null),[g,m]=(0,n.useState)(null),[f,b]=(0,n.useState)(!1),[L,y]=(0,n.useState)(!1),[p,A]=(0,n.useState)(null);(0,n.useEffect)(()=>{o&&o(l)},[l,o]);let getHandFrequencies=t=>{let s=e[t];if(!s)return{MIN:0,ALL_IN:0,CALL:0,FOLD:100};if(s.mixedFrequencies)return s.mixedFrequencies;{let e={MIN:0,ALL_IN:0,CALL:0,FOLD:0};switch(s.action){case"MIN":case"RFI":case"3BB":e.MIN=s.frequency;break;case"ALL_IN":e.ALL_IN=s.frequency;break;case"CALL":e.CALL=s.frequency;break;default:e.FOLD=s.frequency}return e}},isInSelectedRange=(e,t)=>{if(!L||!p)return!1;let s=Math.min(p.row,e),r=Math.max(p.row,e),n=Math.min(p.col,t),o=Math.max(p.col,t);return e>=s&&e<=r&&t>=n&&t<=o},B=(()=>{let e=["A","K","Q","J","T","9","8","7","6","5","4","3","2"],t=[];for(let s=0;s<13;s++){let r=[];for(let t=0;t<13;t++){let n="";n=s===t?e[s]+e[t]:s<t?e[s]+e[t]+"s":e[t]+e[s]+"o",r.push({hand:n,row:s,col:t})}t.push(r)}return t})(),getHandColor=(e,t,s)=>{if(L&&p){if(p.row===t&&p.col===s)return"bg-green-500 border-green-600";if(isInSelectedRange(t,s))return"bg-cyan-400 border-cyan-500"}if(l.includes(e))return"bg-red-500 border-red-600";if(d&&x&&g){let e=Math.min(x.row,g.row),r=Math.max(x.row,g.row),n=Math.min(x.col,g.col),o=Math.max(x.col,g.col);if(t>=e&&t<=r&&s>=n&&s<=o)return"bg-blue-300 border-blue-500"}return"bg-black hover:bg-gray-700 border-gray-600"},getActionColorHex=e=>{switch(e){case"MIN":return"#3b82f6";case"ALL_IN":return"#ef4444";case"CALL":return"#eab308";default:return"#6b7280"}},getHandDisplayText=e=>e,getHandStyle=e=>{let t=getHandFrequencies(e),s=[{key:"MIN",color:getActionColorHex("MIN"),value:t.MIN},{key:"ALL_IN",color:getActionColorHex("ALL_IN"),value:t.ALL_IN},{key:"CALL",color:getActionColorHex("CALL"),value:t.CALL},{key:"FOLD",color:getActionColorHex("FOLD"),value:t.FOLD}],r=s.filter(e=>e.value>0),n=t.MIN+t.ALL_IN+t.CALL;if(0===n)return{background:"rgb(31, 41, 55)"};if(1===r.length&&100===r[0].value)return{background:r[0].color};if(r.length>=2){let e=[],t=0;for(let r of s)r.value>0&&(e.push(`${r.color} ${t}% ${t+r.value}%`),t+=r.value);let r=`linear-gradient(90deg, ${e.join(", ")})`;return{background:r,border:"1px solid rgb(75, 85, 99)",boxShadow:"inset 0 0 0 1px rgba(255, 255, 255, 0.1)",backgroundSize:"100% 100%",backgroundRepeat:"no-repeat"}}return{background:"rgb(31, 41, 55)",border:"1px solid rgb(75, 85, 99)"}},handleMouseDown=(e,t)=>{o&&(u(!0),h({row:e,col:t}),m({row:e,col:t}),b(!1),console.log("マウスダウン:",e,t))},handleMouseEnter=(e,t)=>{if(d&&x){let s=Math.abs(e-x.row),r=Math.abs(t-x.col);(s>0||r>0)&&(b(!0),console.log("ドラッグ検出:",s,r)),m({row:e,col:t})}},handleHandClick=e=>{o&&(console.log("ハンドクリック:",e),c(t=>{let s=t.includes(e)?t.filter(t=>t!==e):[...t,e];return console.log("選択状態更新:",s),s}))};return r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"bg-gradient-to-br from-gray-900 to-gray-800 rounded-xl p-6 max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto shadow-2xl border border-gray-700",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h2",{className:"text-xl font-bold text-white bg-gradient-to-r from-blue-400 to-purple-500 bg-clip-text text-transparent",children:t}),r.jsx("button",{onClick:s,className:"text-gray-400 hover:text-white hover:bg-gray-700 p-2 rounded-lg transition-all duration-200",children:"✕"})]}),o&&(0,r.jsxs)("div",{className:"mb-4 bg-gray-800 rounded-lg p-3 border border-gray-600",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsxs)("p",{className:"text-sm font-semibold text-white",children:["選択されたハンド: ",r.jsx("span",{className:"text-red-400",children:l.length}),"個"]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>c(Object.keys(e)),className:"px-3 py-1 bg-blue-600 hover:bg-blue-700 text-white text-sm rounded-md transition-all duration-200",children:"全選択"}),r.jsx("button",{onClick:()=>c([]),className:"px-3 py-1 bg-gray-600 hover:bg-gray-700 text-white text-sm rounded-md transition-all duration-200",children:"全解除"})]})]}),r.jsx("p",{className:"text-xs text-gray-400",children:"\uD83D\uDCA1 クリックで単一選択、ドラッグで範囲選択ができます"})]}),r.jsx("div",{className:"grid grid-cols-13 gap-1 mb-4 select-none",onMouseUp:()=>{if(!d||!x||!g||!o){u(!1),b(!1);return}if(f){let e=Math.min(x.row,g.row),t=Math.max(x.row,g.row),s=Math.min(x.col,g.col),r=Math.max(x.col,g.col),n=[];for(let o=e;o<=t;o++)for(let e=s;e<=r;e++)B[o]&&B[o][e]&&n.push(B[o][e].hand);c(e=>{let t=[...e];return n.forEach(e=>{if(t.includes(e)){let s=t.indexOf(e);t.splice(s,1)}else t.push(e)}),t})}else{let e=B[x.row][x.col];e&&handleHandClick(e.hand)}u(!1),h(null),m(null),b(!1)},onMouseLeave:()=>{u(!1),b(!1)},children:B.map((e,t)=>e.map((e,s)=>r.jsx("div",{className:`
                  ${getHandColor(e.hand,t,s)} 
                  text-white text-xs font-bold py-1 px-1 text-center cursor-pointer 
                  rounded transition-all duration-200
                  hover:shadow-md min-h-[2rem] flex items-center justify-center
                `,style:getHandStyle(e.hand),onMouseDown:()=>handleMouseDown(t,s),onMouseEnter:()=>handleMouseEnter(t,s),onContextMenu:e=>e.preventDefault(),title:`${e.hand} - 右クリックで詳細設定`,children:getHandDisplayText(e.hand)},`${t}-${s}`)))}),o&&r.jsx("div",{className:"mb-4",children:(0,r.jsxs)("button",{onClick:()=>{o(l),s()},className:"w-full px-4 py-2 bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 text-white font-bold rounded-lg transition-all duration-200 shadow-lg",children:["選択完了 (",l.length,"ハンド) ✓"]})}),a&&(0,r.jsxs)("div",{className:"flex flex-wrap gap-3 text-xs text-white bg-gray-800 rounded-lg p-3 border border-gray-600",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 bg-black border border-gray-500 rounded"}),r.jsx("span",{children:"未選択"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 bg-red-500 border-2 border-red-600 rounded"}),r.jsx("span",{children:"選択済み"})]})]})]})})},HandRangeSelector=({onSelectHands:e,initialSelectedHands:t=[],title:s="プレイするハンドを選択",onClose:n})=>{let o=["A","K","Q","J","T","9","8","7","6","5","4","3","2"],i={};for(let e=0;e<13;e++)for(let t=0;t<13;t++)i[e===t?o[e]+o[t]:e<t?o[e]+o[t]+"s":o[t]+o[e]+"o"]={action:"RFI",frequency:100};return r.jsx(HandRangeGrid,{rangeData:i,title:s,onClose:n,onSelectHands:e,initialSelectedHands:t,showLegend:!1})},MTTRangeEditor=({position:e,stackSize:t,onSaveRange:s,onClose:o,initialRange:i})=>{let[a,l]=(0,n.useState)("MIN"),[c,d]=(0,n.useState)(i||{}),[u,x]=(0,n.useState)(!1),[h,g]=(0,n.useState)(null),[m,f]=(0,n.useState)(null),[b,L]=(0,n.useState)(!1),[y,p]=(0,n.useState)(!1),[A,B]=(0,n.useState)(""),N=(()=>{let e=["A","K","Q","J","T","9","8","7","6","5","4","3","2"],t=[];for(let s=0;s<13;s++){let r=[];for(let t=0;t<13;t++){let n="";n=s===t?e[s]+e[t]:s<t?e[s]+e[t]+"s":e[t]+e[s]+"o",r.push({hand:n,row:s,col:t})}t.push(r)}return t})(),getHandFrequencies=e=>{let t=c[e];return t?.mixedFrequencies?{MIN:t.mixedFrequencies.MIN||0,ALL_IN:t.mixedFrequencies.ALL_IN||0,CALL:t.mixedFrequencies.CALL||0,FOLD:t.mixedFrequencies.FOLD||0}:t?{MIN:"MIN"===t.action?100:0,ALL_IN:"ALL_IN"===t.action?100:0,CALL:"CALL"===t.action?100:0,FOLD:"FOLD"===t.action?100:0}:{MIN:0,ALL_IN:0,CALL:0,FOLD:100}},getHandBackgroundStyle=e=>{let t=getHandFrequencies(e),s=[{key:"MIN",color:getActionColorHex("MIN"),value:t.MIN},{key:"ALL_IN",color:getActionColorHex("ALL_IN"),value:t.ALL_IN},{key:"CALL",color:getActionColorHex("CALL"),value:t.CALL},{key:"FOLD",color:getActionColorHex("FOLD"),value:t.FOLD}],r=s.filter(e=>e.value>0),n=t.MIN+t.ALL_IN+t.CALL;if(0===n)return{background:"rgb(31, 41, 55)"};if(1===r.length&&100===r[0].value)return{background:r[0].color};if(r.length>=2){let e=[],s=0;if(t.MIN>0){let r=getActionColorHex("MIN");e.push(`${r} ${s}% ${s+t.MIN}%`),s+=t.MIN}if(t.ALL_IN>0){let r=getActionColorHex("ALL_IN");e.push(`${r} ${s}% ${s+t.ALL_IN}%`),s+=t.ALL_IN}if(t.CALL>0){let r=getActionColorHex("CALL");e.push(`${r} ${s}% ${s+t.CALL}%`),s+=t.CALL}t.FOLD>0&&e.push(`rgba(75, 85, 99, 0.3) ${s}% 100%`);let r=`linear-gradient(90deg, ${e.join(", ")})`;return{background:r,border:"1px solid rgb(75, 85, 99)",boxShadow:"inset 0 0 0 1px rgba(255, 255, 255, 0.1)",backgroundSize:"100% 100%",backgroundRepeat:"no-repeat"}}return{background:"rgb(31, 41, 55)",border:"1px solid rgb(75, 85, 99)"}},getHandColor=(e,t,s)=>{if(u&&h&&m){let e=Math.min(h.row,m.row),r=Math.max(h.row,m.row),n=Math.min(h.col,m.col),o=Math.max(h.col,m.col);if(t>=e&&t<=r&&s>=n&&s<=o)return"ring-2 ring-yellow-400 ring-inset"}let r=getHandFrequencies(e),n=Object.values(r).filter(e=>e>0),o=n.length>1,i="hover:scale-105 transition-transform duration-150";return o&&(i+=" ring-1 ring-purple-400 ring-opacity-60"),i},getActionColorHex=e=>{switch(e){case"MIN":return"#3b82f6";case"ALL_IN":return"#ef4444";case"CALL":return"#eab308";default:return"#6b7280"}},getHandDisplayText=e=>{let t=getHandFrequencies(e),s=[{name:"MIN",freq:t.MIN,symbol:"M",color:"text-blue-200"},{name:"ALL_IN",freq:t.ALL_IN,symbol:"A",color:"text-red-200"},{name:"CALL",freq:t.CALL,symbol:"C",color:"text-yellow-200"},{name:"FOLD",freq:t.FOLD,symbol:"F",color:"text-gray-300"}].filter(e=>e.freq>0);if(1===s.length&&100===s[0].freq);else if(s.length>0){let t=s.sort((e,t)=>t.freq-e.freq).slice(0,2);return(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("div",{className:"text-xs font-bold leading-tight text-white",children:e}),r.jsx("div",{className:"text-[7px] leading-none space-y-0",children:t.map(e=>(0,r.jsxs)("div",{className:`font-semibold ${e.color}`,children:[e.symbol,e.freq,"%"]},e.name))})]})}return e},handleRightClick=(e,t)=>{e.preventDefault(),B(t),p(!0)},handleMouseDown=(e,t)=>{x(!0),g({row:e,col:t}),f({row:e,col:t}),L(!1)},handleMouseEnter=(e,t)=>{u&&h&&((e!==h.row||t!==h.col)&&L(!0),f({row:e,col:t}))},v=(()=>{let e={MIN:0,ALL_IN:0,CALL:0,FOLD:0};return N.flat().forEach(t=>{let s=getHandFrequencies(t.hand);e.MIN+=(s.MIN||0)/100,e.ALL_IN+=(s.ALL_IN||0)/100,e.CALL+=(s.CALL||0)/100,e.FOLD+=(s.FOLD||0)/100}),{...e,totalSet:e.MIN+e.ALL_IN+e.CALL,percentage:{MIN:(e.MIN/169*100).toFixed(1),ALL_IN:(e.ALL_IN/169*100).toFixed(1),CALL:(e.CALL/169*100).toFixed(1),FOLD:(e.FOLD/169*100).toFixed(1)}}})();return r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"bg-gradient-to-br from-gray-900 to-gray-800 rounded-xl p-6 max-w-6xl w-full mx-4 max-h-[95vh] overflow-y-auto shadow-2xl border border-gray-700",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h2",{className:"text-xl font-bold text-white bg-gradient-to-r from-blue-400 to-purple-500 bg-clip-text text-transparent",children:e.startsWith("vsopen_")?(()=>{let s=e.split("_");return`MTTレンジエディター - vsopen（ヒーロー: ${s[1]} ／ オープンレイザー: ${s[3]} ／ スタック: ${t}BB）`})():`MTTレンジエディター - ${e} (${t}BB)`}),r.jsx("button",{onClick:o,className:"text-gray-400 hover:text-white hover:bg-gray-700 p-2 rounded-lg transition-all duration-200",children:"✕"})]}),(0,r.jsxs)("div",{className:"mb-4 bg-gray-800 rounded-lg p-4 border border-gray-600",children:[r.jsx("h3",{className:"text-sm font-semibold text-white mb-3",children:"クイック設定（左クリック/ドラッグ）："}),r.jsx("div",{className:"flex gap-3 flex-wrap",children:[{action:"MIN",label:"ミニマムレイズ",color:"bg-blue-500"},{action:"ALL_IN",label:"オールイン",color:"bg-red-500"},{action:"CALL",label:"コール",color:"bg-yellow-500"},{action:"FOLD",label:"フォールド",color:"bg-gray-600"},{action:"CLEAR",label:"解除",color:"bg-gray-700"}].map(({action:e,label:t,color:s})=>r.jsx("button",{onClick:()=>l(e),className:`px-4 py-2 rounded-lg font-semibold transition-all duration-200 border-2 ${a===e?`${s} text-white border-white shadow-lg scale-105`:`${s} text-white border-transparent opacity-70 hover:opacity-100`}`,children:t},e))}),(0,r.jsxs)("p",{className:"text-xs text-gray-400 mt-2",children:["\uD83D\uDCA1 ",r.jsx("strong",{children:"右クリック"}),"で詳細な頻度設定（例：MIN 60%, FOLD 40%）"]})]}),(0,r.jsxs)("div",{className:"mb-4 bg-gray-800 rounded-lg p-4 border border-gray-600",children:[r.jsx("h3",{className:"text-sm font-semibold text-white mb-3",children:"統計（頻度考慮）:"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 text-sm",children:[(0,r.jsxs)("div",{className:"bg-blue-500 bg-opacity-20 border border-blue-500 rounded p-2 text-center",children:[r.jsx("div",{className:"text-blue-300 font-semibold",children:"MIN"}),(0,r.jsxs)("div",{className:"text-white",children:[v.MIN.toFixed(1),"ハンド (",v.percentage.MIN,"%)"]})]}),(0,r.jsxs)("div",{className:"bg-red-500 bg-opacity-20 border border-red-500 rounded p-2 text-center",children:[r.jsx("div",{className:"text-red-300 font-semibold",children:"ALL IN"}),(0,r.jsxs)("div",{className:"text-white",children:[v.ALL_IN.toFixed(1),"ハンド (",v.percentage.ALL_IN,"%)"]})]}),(0,r.jsxs)("div",{className:"bg-yellow-500 bg-opacity-20 border border-yellow-500 rounded p-2 text-center",children:[r.jsx("div",{className:"text-yellow-300 font-semibold",children:"CALL"}),(0,r.jsxs)("div",{className:"text-white",children:[v.CALL.toFixed(1),"ハンド (",v.percentage.CALL,"%)"]})]}),(0,r.jsxs)("div",{className:"bg-gray-600 bg-opacity-20 border border-gray-600 rounded p-2 text-center",children:[r.jsx("div",{className:"text-gray-300 font-semibold",children:"FOLD"}),(0,r.jsxs)("div",{className:"text-white",children:[v.FOLD.toFixed(1),"ハンド (",v.percentage.FOLD,"%)"]})]})]})]}),r.jsx("div",{className:"grid grid-cols-13 gap-1 mb-4 select-none",onMouseUp:()=>{if(!u||!h||!m){x(!1),L(!1);return}if(b){let e=Math.min(h.row,m.row),t=Math.max(h.row,m.row),s=Math.min(h.col,m.col),r=Math.max(h.col,m.col);if("CLEAR"===a)d(n=>{let o={...n};for(let n=e;n<=t;n++)for(let e=s;e<=r;e++)N[n]&&N[n][e]&&delete o[N[n][e].hand];return o});else{let n={},o=[];for(let i=e;i<=t;i++)for(let e=s;e<=r;e++)if(N[i]&&N[i][e]){let t=N[i][e].hand,s=c[t];s&&s.action===a?o.push(t):n[t]={action:a,frequency:100}}d(e=>{let t={...e,...n};return o.forEach(e=>{delete t[e]}),t})}}else{let e=N[h.row][h.col];e&&("CLEAR"===a?d(t=>{let s={...t};return delete s[e.hand],s}):c[e.hand]&&c[e.hand].action===a?d(t=>{let s={...t};return delete s[e.hand],s}):d(t=>({...t,[e.hand]:{action:a,frequency:100}})))}x(!1),g(null),f(null),L(!1)},onMouseLeave:()=>{x(!1),L(!1)},children:N.map((e,t)=>e.map((e,s)=>r.jsx("div",{className:`
                  ${getHandColor(e.hand,t,s)} 
                  text-white text-xs font-bold py-1 px-1 text-center cursor-pointer 
                  rounded transition-all duration-200
                  hover:shadow-md min-h-[2rem] flex items-center justify-center
                `,style:getHandBackgroundStyle(e.hand),onMouseDown:()=>handleMouseDown(t,s),onMouseEnter:()=>handleMouseEnter(t,s),onContextMenu:t=>handleRightClick(t,e.hand),title:`${e.hand} - 右クリックで詳細設定`,children:getHandDisplayText(e.hand)},`${t}-${s}`)))}),(0,r.jsxs)("div",{className:"flex gap-3 justify-between",children:[(0,r.jsxs)("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:()=>d({}),className:"px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white font-semibold rounded-lg transition-all duration-200",children:"全クリア"}),r.jsx("button",{onClick:()=>{let e={};N.flat().forEach(t=>{e[t.hand]={action:"FOLD",frequency:100}}),d(e)},className:"px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white font-semibold rounded-lg transition-all duration-200",children:"全フォールド"})]}),(0,r.jsxs)("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:o,className:"px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white font-semibold rounded-lg transition-all duration-200",children:"キャンセル"}),r.jsx("button",{onClick:()=>{s(e,c),o()},className:"px-6 py-2 bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 text-white font-bold rounded-lg transition-all duration-200 shadow-lg",children:"保存 ✓"})]})]}),(0,r.jsxs)("div",{className:"mt-4 bg-gray-800 rounded-lg p-3 border border-gray-600",children:[r.jsx("h4",{className:"text-sm font-semibold text-white mb-2",children:"使い方："}),(0,r.jsxs)("ul",{className:"text-xs text-gray-400 space-y-1",children:[(0,r.jsxs)("li",{children:["• ",r.jsx("strong",{children:"左クリック/ドラッグ："})," 選択したアクションを設定"]}),(0,r.jsxs)("li",{children:["• ",r.jsx("strong",{children:"解除ボタン + クリック/ドラッグ："})," ハンドの設定を削除"]}),(0,r.jsxs)("li",{children:["• ",r.jsx("strong",{children:"同じアクションを再クリック："})," そのハンドを解除"]}),(0,r.jsxs)("li",{children:["• ",r.jsx("strong",{children:"右クリック："})," 詳細な頻度設定（例：MIN 60%, FOLD 40%）"]}),(0,r.jsxs)("li",{children:["• ",r.jsx("strong",{children:"混合戦略の色分け："})," 複数アクションが設定されたハンドは横方向のグラデーションで表示"]}),(0,r.jsxs)("li",{children:["• ",r.jsx("strong",{children:"色の意味："})," 青=MIN、赤=ALL_IN、黄=コール、グレー=フォールド"]}),(0,r.jsxs)("li",{children:["• ",r.jsx("strong",{children:"混合戦略の識別："})," 紫の境界線と小さな%表示で混合戦略を識別"]}),r.jsx("li",{children:"• 統計は頻度を考慮した加重平均で表示"})]})]}),y&&r.jsx(FrequencyModal,{hand:A,initialFrequencies:getHandFrequencies(A),onSave:e=>{let t=e.MIN>0||e.ALL_IN>0||e.CALL>0;t?d(t=>({...t,[A]:{action:"MIXED",frequency:100,mixedFrequencies:e}})):d(e=>({...e,[A]:{action:"FOLD",frequency:100}}))},onClose:()=>p(!1)})]})})},FrequencyModal=({hand:e,initialFrequencies:t,onSave:s,onClose:o})=>{let[i,a]=(0,n.useState)(t),updateFrequency=(e,t)=>{let s={...i,[e]:t},r=Object.keys(s).filter(t=>t!==e).reduce((e,t)=>e+s[t],0);if(r+t>100){let n=r+t-100,o=Math.max(0,r-n)/r;Object.keys(s).forEach(t=>{t!==e&&(s[t]=Math.round(s[t]*o))})}a(s)},l=Object.values(i).reduce((e,t)=>e+t,0),c=100-l;return r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-[60]",children:(0,r.jsxs)("div",{className:"bg-gray-900 rounded-xl p-6 max-w-md w-full mx-4 border border-gray-700",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,r.jsxs)("h3",{className:"text-lg font-bold text-white",children:[e," の頻度設定"]}),r.jsx("button",{onClick:o,className:"text-gray-400 hover:text-white",children:"✕"})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[r.jsx("label",{className:"text-blue-300 font-semibold",children:"ミニマムレイズ"}),(0,r.jsxs)("span",{className:"text-white font-bold",children:[i.MIN,"%"]})]}),r.jsx("input",{type:"range",min:"0",max:"100",value:i.MIN,onChange:e=>updateFrequency("MIN",parseInt(e.target.value)),className:"w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer",style:{background:`linear-gradient(to right, #3b82f6 0%, #3b82f6 ${i.MIN}%, #374151 ${i.MIN}%, #374151 100%)`}})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[r.jsx("label",{className:"text-red-300 font-semibold",children:"オールイン"}),(0,r.jsxs)("span",{className:"text-white font-bold",children:[i.ALL_IN,"%"]})]}),r.jsx("input",{type:"range",min:"0",max:"100",value:i.ALL_IN,onChange:e=>updateFrequency("ALL_IN",parseInt(e.target.value)),className:"w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer",style:{background:`linear-gradient(to right, #ef4444 0%, #ef4444 ${i.ALL_IN}%, #374151 ${i.ALL_IN}%, #374151 100%)`}})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[r.jsx("label",{className:"text-yellow-300 font-semibold",children:"コール"}),(0,r.jsxs)("span",{className:"text-white font-bold",children:[i.CALL,"%"]})]}),r.jsx("input",{type:"range",min:"0",max:"100",value:i.CALL,onChange:e=>updateFrequency("CALL",parseInt(e.target.value)),className:"w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer",style:{background:`linear-gradient(to right, #eab308 0%, #eab308 ${i.CALL}%, #374151 ${i.CALL}%, #374151 100%)`}})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[r.jsx("label",{className:"text-gray-300 font-semibold",children:"フォールド"}),(0,r.jsxs)("span",{className:"text-white font-bold",children:[i.FOLD,"%"]})]}),r.jsx("input",{type:"range",min:"0",max:"100",value:i.FOLD,onChange:e=>updateFrequency("FOLD",parseInt(e.target.value)),className:"w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer",style:{background:`linear-gradient(to right, #6b7280 0%, #6b7280 ${i.FOLD}%, #374151 ${i.FOLD}%, #374151 100%)`}})]}),(0,r.jsxs)("div",{className:"border-t border-gray-700 pt-4",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-gray-300",children:"合計:"}),(0,r.jsxs)("span",{className:`font-bold ${100===l?"text-green-400":l>100?"text-red-400":"text-yellow-400"}`,children:[l,"%"]})]}),0!==c&&r.jsx("div",{className:"text-xs text-gray-400 mt-1",children:c>0?`残り ${c}%`:`${Math.abs(c)}% 超過`})]}),(0,r.jsxs)("div",{className:"border-t border-gray-700 pt-4",children:[r.jsx("div",{className:"text-sm text-gray-300 mb-3",children:"クイック設定:"}),(0,r.jsxs)("div",{className:"grid grid-cols-3 gap-2",children:[r.jsx("button",{onClick:()=>a({MIN:100,ALL_IN:0,CALL:0,FOLD:0}),className:"px-2 py-1 bg-blue-600 text-white rounded text-xs hover:bg-blue-700 transition-all duration-200",children:"MIN 100%"}),r.jsx("button",{onClick:()=>a({MIN:0,ALL_IN:100,CALL:0,FOLD:0}),className:"px-2 py-1 bg-red-600 text-white rounded text-xs hover:bg-red-700 transition-all duration-200",children:"ALL IN 100%"}),r.jsx("button",{onClick:()=>a({MIN:0,ALL_IN:0,CALL:0,FOLD:100}),className:"px-2 py-1 bg-gray-600 text-white rounded text-xs hover:bg-gray-700 transition-all duration-200",children:"FOLD 100%"}),r.jsx("button",{onClick:()=>a({MIN:80,ALL_IN:0,CALL:0,FOLD:20}),className:"px-2 py-1 bg-gradient-to-r from-blue-600 to-gray-600 text-white rounded text-xs hover:from-blue-700 hover:to-gray-700 transition-all duration-200",children:"MIN 80% FOLD 20%"}),r.jsx("button",{onClick:()=>a({MIN:70,ALL_IN:0,CALL:0,FOLD:30}),className:"px-2 py-1 bg-gradient-to-r from-blue-600 to-gray-600 text-white rounded text-xs hover:from-blue-700 hover:to-gray-700 transition-all duration-200",children:"MIN 70% FOLD 30%"}),r.jsx("button",{onClick:()=>a({MIN:60,ALL_IN:0,CALL:0,FOLD:40}),className:"px-2 py-1 bg-gradient-to-r from-blue-600 to-gray-600 text-white rounded text-xs hover:from-blue-700 hover:to-gray-700 transition-all duration-200",children:"MIN 60% FOLD 40%"}),r.jsx("button",{onClick:()=>a({MIN:50,ALL_IN:0,CALL:0,FOLD:50}),className:"px-2 py-1 bg-gradient-to-r from-blue-600 to-gray-600 text-white rounded text-xs hover:from-blue-700 hover:to-gray-700 transition-all duration-200",children:"MIN 50% FOLD 50%"}),r.jsx("button",{onClick:()=>a({MIN:40,ALL_IN:0,CALL:0,FOLD:60}),className:"px-2 py-1 bg-gradient-to-r from-blue-600 to-gray-600 text-white rounded text-xs hover:from-blue-700 hover:to-gray-700 transition-all duration-200",children:"MIN 40% FOLD 60%"}),r.jsx("button",{onClick:()=>a({MIN:30,ALL_IN:0,CALL:0,FOLD:70}),className:"px-2 py-1 bg-gradient-to-r from-blue-600 to-gray-600 text-white rounded text-xs hover:from-blue-700 hover:to-gray-700 transition-all duration-200",children:"MIN 30% FOLD 70%"})]}),r.jsx("div",{className:"text-xs text-gray-500 mt-2",children:"\uD83D\uDCA1 ワンクリックで一般的な頻度比率を設定できます"})]})]}),(0,r.jsxs)("div",{className:"flex gap-3 mt-6",children:[r.jsx("button",{onClick:o,className:"flex-1 px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg",children:"キャンセル"}),r.jsx("button",{onClick:()=>{s(i),o()},disabled:100!==l,className:`flex-1 px-4 py-2 rounded-lg font-semibold ${100===l?"bg-green-600 hover:bg-green-700 text-white":"bg-gray-500 text-gray-300 cursor-not-allowed"}`,children:"保存 ✓"})]})]})})},PokerTable=({currentSpot:e,selectedAction:t,isCorrect:s=!1,showResults:o=!1,onActionSelect:i,availableActions:a=["FOLD","CHECK","CALL","RAISE"],heroHand:l,potSize:c,onNextSpot:d,onRepeatSpot:u,positionRangeData:x,stackSize:h="100",cpuActionEnabled:g=!1,onActionCompleted:m,backButtonUrl:f})=>{let[b,L]=(0,n.useState)(!1);(0,n.useEffect)(()=>{let checkMobile=()=>{L(window.innerWidth<768)};return checkMobile(),window.addEventListener("resize",checkMobile),()=>window.removeEventListener("resize",checkMobile)},[]);let[y,p]=(0,n.useState)(!1),[A,B]=(0,n.useState)(!0),[N,v]=(0,n.useState)(1),[j,I]=(0,n.useState)("translate(-100%, 0)"),[F,O]=(0,n.useState)([]),[D,q]=(0,n.useState)(-1),[w,S]=(0,n.useState)({}),[C,T]=(0,n.useState)(!1),[R,_]=(0,n.useState)([]);(0,n.useEffect)(()=>{if(t){B(!0),v(0),I("translate(-100%, 0)");let e=setTimeout(()=>{v(1),I("translate(-50%, 0)")},10),t=setTimeout(()=>{v(0),I("translate(-50%, 0) translateX(30px)")},1500),s=setTimeout(()=>{B(!1)},2e3);return()=>{clearTimeout(e),clearTimeout(t),clearTimeout(s)}}},[t]),(0,n.useEffect)(()=>{if(e&&e.heroPosition){let t=["UTG","UTG1","LJ","HJ","CO","BTN","SB","BB"],s=t.indexOf(e.heroPosition);if(-1!==s){let e=t.slice(s+1);_(e),g&&(O(e),S({}),T(!1),q(-1))}}},[e,g]);let $=e.heroPosition||"UTG1",k=x||getRangeForPosition($),getPotSize=()=>void 0!==c?c:void 0!==e.potSize?e.potSize:void 0!==e.pot?e.pot:0,executeNextCpuAction=()=>{if(!g||D>=F.length-1){T(!0),m&&m();return}let e=D+1;q(e);let t=F[e],s=generateCpuHandType(),r=getCpuAction(t,s);S(e=>({...e,[t]:{action:r,result:formatCpuActionResult(r,t)}})),setTimeout(()=>{executeNextCpuAction()},1e3)},generateCpuHandType=()=>{let e=["premium","strong","medium","weak","trash"],t=[10,20,30,25,15],s=t.reduce((e,t)=>e+t,0),r=Math.random()*s;for(let s=0;s<t.length;s++){if(r<t[s])return e[s];r-=t[s]}return e[Math.floor(Math.random()*e.length)]},getCpu3betSize=e=>["BTN","CO"].includes(e)?7:["SB","BB"].includes(e)?9:8,getCpuAction=(e,t)=>{let s={premium:{FOLD:0,CALL:20,RAISE:80},strong:{FOLD:10,CALL:50,RAISE:40},medium:{FOLD:30,CALL:60,RAISE:10},weak:{FOLD:70,CALL:30,RAISE:0},trash:{FOLD:95,CALL:5,RAISE:0}},r={SB:{FOLD:-10,CALL:0,RAISE:10},BB:{FOLD:-20,CALL:10,RAISE:10},BTN:{FOLD:-5,CALL:-5,RAISE:10},CO:{FOLD:0,CALL:0,RAISE:0}};r[e]||(r[e]={FOLD:5,CALL:0,RAISE:-5});let n={FOLD:Math.max(0,Math.min(100,s[t].FOLD+(r[e].FOLD||0))),CALL:Math.max(0,Math.min(100,s[t].CALL+(r[e].CALL||0))),RAISE:Math.max(0,Math.min(100,s[t].RAISE+(r[e].RAISE||0)))},o=n.FOLD+n.CALL+n.RAISE;o>0&&(n.FOLD=n.FOLD/o*100,n.CALL=n.CALL/o*100,n.RAISE=n.RAISE/o*100);let i=100*Math.random();if(i<n.FOLD)return"FOLD";if(i<n.FOLD+n.CALL)return"CALL";{let t=getCpu3betSize(e);return`RAISE ${t}`}},formatCpuActionResult=(e,t)=>{if("FOLD"===e)return"フォールド";if("CALL"===e)return"コール";if(e.startsWith("RAISE")){let t=e.match(/RAISE (\d+(\.\d+)?)/),s=t?t[1]:"?";return`${s}BBにレイズ`}return"ALL IN"===e?"オールイン":""};(0,n.useEffect)(()=>{g&&t&&!C&&setTimeout(()=>{executeNextCpuAction()},1e3)},[t,g]);let isActionActive=e=>{if(!g)return!1;let t=F.indexOf(e);return t===D},isWaitingForAction=e=>{if(!g)return!1;let t=F.indexOf(e);return t>D&&t<F.length},formatActionResult=()=>{if(!t)return{element:r.jsx(r.Fragment,{}),evaluationLevel:"suboptimal"};let n="optimal",o=t.split(" ")[0],i=0;if(e.frequencies&&Object.keys(e.frequencies).length>0){let s=e.frequencies[t]||0;i=s;let r=0,o="";Object.entries(e.frequencies).forEach(([e,t])=>{t>r&&(r=t,o=e)}),n=t===o?"perfect":s>=30?"optimal":s>=10?"acceptable":"suboptimal"}else e.correctAction&&(n=t===e.correctAction?"perfect":"RAISE"===e.correctAction&&"CALL"===t||"CALL"===e.correctAction&&"FOLD"===t?"acceptable":"suboptimal"),"perfect"===n?i="FOLD"===o?95:"CALL"===o?75:"RAISE"===o?65:"ALL"===o?90:80:"optimal"===n?i="FOLD"===o?60:"CALL"===o?50:"RAISE"===o?40:"ALL"===o?55:45:"acceptable"===n?i="FOLD"===o?30:"CALL"===o?25:"RAISE"===o?20:"ALL"===o?15:20:"suboptimal"===n&&(i="FOLD"===o?5:"CALL"===o?10:"RAISE"===o?5:"ALL"===o?2:5);let a=` ${Math.round(i)}%`,l=(()=>{switch(o){case"FOLD":return"FOLD";case"CHECK":return"CHECK";case"CALL":return"CALL";case"RAISE":return"RAISE";case"ALL":return"ALL IN";case"MIN":return"MIN";default:return o}})();return(s&&("suboptimal"===n||"acceptable"===n)?n="optimal":s||"perfect"!==n&&"optimal"!==n&&"acceptable"!==n||(n="suboptimal"),"perfect"===n||"optimal"===n||"acceptable"===n)?{element:(0,r.jsxs)("div",{className:"bg-green-500 text-white px-3 py-2 rounded-sm text-sm whitespace-nowrap flex items-center shadow-lg border border-green-400",children:[l,a]}),evaluationLevel:n}:{element:(0,r.jsxs)("div",{className:"bg-red-500 text-white px-3 py-2 rounded-sm text-sm whitespace-nowrap flex items-center shadow-lg border border-red-400",children:[l,a]}),evaluationLevel:n}},isActionComplete=t=>{if(t===e.openRaiserPosition)return!1;let s=e.heroPosition||"",r=["UTG","UTG1","LJ","HJ","CO","BTN","SB","BB"],n=r.indexOf(s),o=r.indexOf(t);return -1!==n&&-1!==o&&o<n},getPositionStack=s=>{let r=parseInt(h);if("SB"===s)return`${r-.5}`;if("BB"===s)return`${r-1}`;if(s===e.heroPosition&&t&&t.startsWith("RAISE")){let e=t.match(/RAISE (\d+(\.\d+)?)/);if(e&&e[1]){let t=parseFloat(e[1]);return`${(r-t).toFixed(1)}`}}return s===e.openRaiserPosition&&e.openRaiseSize?`${(r-e.openRaiseSize).toFixed(1)}`:`${r}`},formatHand=e=>e?"string"==typeof e?4===e.length?[e.slice(0,2),e.slice(2,4)]:[e,"?"]:e:["?","?"],getTournamentStageBackground=()=>{if(!e.tournamentStage)return"";switch(e.tournamentStage){case"bubble":return"border-blue-500/50 bg-blue-900/20";case"final_table":return"border-purple-500/50 bg-purple-900/20";default:return""}},M=(()=>{let t={},s=e.heroPosition||"";return"BTN"===s?(t.BTN={label:"BTN",x:50,y:55,isHero:!0},t.SB={label:"SB",x:25,y:55,isHero:!1},t.BB={label:"BB",x:15,y:35,isHero:!1},t.UTG={label:"UTG",x:25,y:15,isHero:!1},t.UTG1={label:"UTG+1",x:50,y:15,isHero:!1},t.LJ={label:"LJ",x:75,y:15,isHero:!1},t.HJ={label:"HJ",x:85,y:35,isHero:!1},t.CO={label:"CO",x:75,y:55,isHero:!1}):"SB"===s?(t.SB={label:"SB",x:50,y:55,isHero:!0},t.BB={label:"BB",x:25,y:55,isHero:!1},t.UTG={label:"UTG",x:15,y:35,isHero:!1},t.UTG1={label:"UTG+1",x:25,y:15,isHero:!1},t.LJ={label:"LJ",x:50,y:15,isHero:!1},t.HJ={label:"HJ",x:75,y:15,isHero:!1},t.CO={label:"CO",x:85,y:35,isHero:!1},t.BTN={label:"BTN",x:75,y:55,isHero:!1}):"BB"===s?(t.BB={label:"BB",x:50,y:55,isHero:!0},t.UTG={label:"UTG",x:25,y:55,isHero:!1},t.UTG1={label:"UTG+1",x:15,y:35,isHero:!1},t.LJ={label:"LJ",x:25,y:15,isHero:!1},t.HJ={label:"HJ",x:50,y:15,isHero:!1},t.CO={label:"CO",x:75,y:15,isHero:!1},t.BTN={label:"BTN",x:85,y:35,isHero:!1},t.SB={label:"SB",x:75,y:55,isHero:!1}):"UTG"===s?(t.UTG={label:"UTG",x:50,y:55,isHero:!0},t.UTG1={label:"UTG+1",x:25,y:55,isHero:!1},t.LJ={label:"LJ",x:15,y:35,isHero:!1},t.HJ={label:"HJ",x:25,y:15,isHero:!1},t.CO={label:"CO",x:50,y:15,isHero:!1},t.BTN={label:"BTN",x:75,y:15,isHero:!1},t.SB={label:"SB",x:85,y:35,isHero:!1},t.BB={label:"BB",x:75,y:55,isHero:!1}):"UTG1"===s?(t.UTG1={label:"UTG+1",x:50,y:55,isHero:!0},t.LJ={label:"LJ",x:25,y:55,isHero:!1},t.HJ={label:"HJ",x:15,y:35,isHero:!1},t.CO={label:"CO",x:25,y:15,isHero:!1},t.BTN={label:"BTN",x:50,y:15,isHero:!1},t.SB={label:"SB",x:75,y:15,isHero:!1},t.BB={label:"BB",x:85,y:35,isHero:!1},t.UTG={label:"UTG",x:75,y:55,isHero:!1}):"LJ"===s?(t.LJ={label:"LJ",x:50,y:55,isHero:!0},t.HJ={label:"HJ",x:25,y:55,isHero:!1},t.CO={label:"CO",x:15,y:35,isHero:!1},t.BTN={label:"BTN",x:25,y:15,isHero:!1},t.SB={label:"SB",x:50,y:15,isHero:!1},t.BB={label:"BB",x:75,y:15,isHero:!1},t.UTG={label:"UTG",x:85,y:35,isHero:!1},t.UTG1={label:"UTG+1",x:75,y:55,isHero:!1}):"HJ"===s?(t.HJ={label:"HJ",x:50,y:55,isHero:!0},t.CO={label:"CO",x:25,y:55,isHero:!1},t.BTN={label:"BTN",x:15,y:35,isHero:!1},t.SB={label:"SB",x:25,y:15,isHero:!1},t.BB={label:"BB",x:50,y:15,isHero:!1},t.UTG={label:"UTG",x:75,y:15,isHero:!1},t.UTG1={label:"UTG+1",x:85,y:35,isHero:!1},t.LJ={label:"LJ",x:75,y:55,isHero:!1}):"CO"===s?(t.CO={label:"CO",x:50,y:55,isHero:!0},t.BTN={label:"BTN",x:25,y:55,isHero:!1},t.SB={label:"SB",x:15,y:35,isHero:!1},t.BB={label:"BB",x:25,y:15,isHero:!1},t.UTG={label:"UTG",x:50,y:15,isHero:!1},t.UTG1={label:"UTG+1",x:75,y:15,isHero:!1},t.LJ={label:"LJ",x:85,y:35,isHero:!1},t.HJ={label:"HJ",x:75,y:55,isHero:!1}):(t.BTN={label:"BTN",x:50,y:68,isHero:"BTN"===s},t.SB={label:"SB",x:25,y:55,isHero:"SB"===s},t.BB={label:"BB",x:15,y:35,isHero:"BB"===s},t.UTG={label:"UTG",x:25,y:15,isHero:"UTG"===s},t.UTG1={label:"UTG+1",x:50,y:15,isHero:"UTG1"===s},t.LJ={label:"LJ",x:75,y:15,isHero:"LJ"===s},t.HJ={label:"HJ",x:85,y:35,isHero:"HJ"===s},t.CO={label:"CO",x:75,y:55,isHero:"CO"===s}),t})(),J=formatHand(e.heroHand);getPotSize(),t&&t.split(" ")[0],e.correctAction&&e.correctAction.split(" ")[0];let H=e.description||"",E=H.match(/CO\s+vs\s+UTG1/i);E&&E[0];let getAvailableActions=()=>{let t=parseInt(h),s=[...a],r=t<=15||e.frequencies&&e.frequencies["ALL IN"]>0||"bubble"===e.tournamentStage&&"high"===e.icmPressure||"push_fold"===e.actionType;return r&&!s.includes("ALL IN")&&s.push("ALL IN"),s};return b?r.jsx("div",{className:"w-full h-full",children:r.jsx("div",{className:`w-full h-full relative ${getTournamentStageBackground()}`,children:(()=>{Object.entries(M).find(([e,t])=>t.isHero);let s=formatHand(e.heroHand),n={},a=Object.entries(M).find(([e,t])=>t.isHero);if(a){n[a[0]]={x:50,y:78};let e=["SB","BB","UTG","UTG1","LJ","HJ","CO","BTN"],t=a[0],s=e.indexOf(t),r=[];for(let t=1;t<e.length;t++){let n=(s+t)%e.length,o=e[n];M[o]&&!M[o].isHero&&r.push(o)}let o=[{x:50,y:-30},{x:5,y:-20},{x:95,y:-20},{x:-2,y:24},{x:102,y:24},{x:5,y:67},{x:95,y:67}],i=[5,3,1,0,2,4,6];for(let e=0;e<r.length&&e<i.length;e++){let t=r[e],s=i[e];s<o.length&&(n[t]=o[s])}}return(0,r.jsxs)(r.Fragment,{children:[f&&r.jsx("div",{className:"absolute top-0 right-2 z-50",children:r.jsx("a",{href:f,className:"px-3 py-1 bg-gray-700/90 hover:bg-gray-600/90 rounded text-white text-sm backdrop-blur-sm",children:"← 戻る"})}),r.jsx("div",{className:"absolute w-full flex flex-col items-center text-white z-40",style:{top:"36%"},children:(0,r.jsxs)("div",{className:"text-base font-bold",children:[getPotSize()," BB"]})}),r.jsx("div",{className:"absolute inset-0 flex items-center justify-center mt-8",children:(0,r.jsxs)("div",{className:"relative w-72 h-72",children:[(0,r.jsxs)("div",{className:"absolute inset-0 z-10",style:{pointerEvents:"none"},children:[[["UTG","UTG+1"],["UTG+1","LJ"],["LJ","HJ"],["HJ","CO"],["CO","BTN"],["BTN","SB"],["SB","BB"],["BB","UTG"]].map(([e,t],s)=>{let o=n[e],i=n[t];if(!o||!i)return null;let a=i.x-o.x,l=i.y-o.y;return r.jsx("div",{className:"absolute bg-gray-400",style:{left:`${o.x}%`,top:`${o.y}%`,width:`${Math.sqrt(a*a+l*l)}%`,height:"1.5px",transformOrigin:"0 50%",transform:`rotate(${180*Math.atan2(l,a)/Math.PI}deg)`}},`line-${e}-${t}-${s}`)}),(()=>{let e=Object.keys(n).find(e=>e.includes("UTG")&&"UTG"!==e)||"UTG+1",t=[];if(n[e]&&n.UTG){let s=n[e],o=n.UTG,i=o.x-s.x,a=o.y-s.y;t.push(r.jsx("div",{className:"absolute bg-gray-400",style:{left:`${s.x}%`,top:`${s.y}%`,width:`${Math.sqrt(i*i+a*a)}%`,height:"1.5px",transformOrigin:"0 50%",transform:`rotate(${180*Math.atan2(a,i)/Math.PI}deg)`}},"line1"))}if(n[e]&&n.LJ){let s=n[e],o=n.LJ,i=o.x-s.x,a=o.y-s.y;t.push(r.jsx("div",{className:"absolute bg-gray-400",style:{left:`${s.x}%`,top:`${s.y}%`,width:`${Math.sqrt(i*i+a*a)}%`,height:"1.5px",transformOrigin:"0 50%",transform:`rotate(${180*Math.atan2(a,i)/Math.PI}deg)`}},"line2"))}return t})()]}),Object.entries(M).map(([o,a])=>{let l=n[o];if(!l)return null;let c=e.openRaiserPosition===o,x=a.isHero;return(0,r.jsxs)("div",{className:"absolute z-20",style:{left:`${l.x}%`,top:`${l.y}%`,transform:"translate(-50%, -50%)"},children:[(0,r.jsxs)("div",{className:`w-14 h-14 flex flex-col items-center justify-center rounded-full border-2
                    ${x?"bg-green-700 border-green-400":isActionComplete(o)&&o!==e.openRaiserPosition?"bg-gray-950 border-gray-900":c?"bg-orange-700 border-orange-400":"bg-gray-700 border-gray-500"}`,children:[r.jsx("div",{className:`font-bold text-xs ${x?"text-white":c?"text-white":isActionComplete(o)?"text-gray-500":"text-gray-300"}`,children:a.label}),r.jsx("div",{className:`font-bold text-[10px] ${x?"text-white":c?"text-white":isActionComplete(o)?"text-gray-500":"text-gray-300"}`,children:getPositionStack(o)})]}),x&&r.jsx("div",{className:"absolute top-16 left-1/2 transform -translate-x-1/2 z-30",children:r.jsx("div",{className:"flex gap-1 scale-110",children:r.jsx(PokerCardList,{cards:s,size:"sm"})})}),x&&!t&&r.jsx("div",{className:"absolute top-32 left-1/2 transform -translate-x-1/2 z-30",children:r.jsx("div",{className:"flex space-x-2 justify-center",children:getAvailableActions().map(e=>{let{label:t,colorClass:s}="FOLD"===e?{label:"FOLD",colorClass:"bg-blue-600 hover:bg-blue-700"}:"CHECK"===e?{label:"CHECK",colorClass:"bg-gray-600 hover:bg-gray-700"}:"CALL"===e?{label:"CALL",colorClass:"bg-green-600 hover:bg-green-700"}:"RAISE"===e?{label:"RAISE",colorClass:"bg-red-600 hover:bg-red-700"}:"ALL IN"===e?{label:"ALLIN",colorClass:"bg-purple-600 hover:bg-purple-700"}:{label:e,colorClass:"bg-gray-600 hover:bg-gray-700"};return r.jsx("button",{className:`px-5 py-3 rounded-lg text-white font-semibold whitespace-nowrap min-h-12 min-w-20 ${s} transition-colors shadow-lg`,onClick:()=>i&&i(e),disabled:g&&!C,children:t},e)})})}),x&&t&&r.jsx("div",{className:"absolute top-32 left-1/2 transform -translate-x-1/2 z-30",children:(0,r.jsxs)("div",{className:"flex space-x-3 justify-center",children:[u&&r.jsx("button",{className:"px-4 py-3 rounded-lg text-white text-sm font-semibold bg-gray-500 hover:bg-gray-600 transition-colors whitespace-nowrap min-w-20 shadow-lg",onClick:u,children:"再試行"}),d&&r.jsx("button",{className:"px-4 py-3 rounded-lg text-white text-sm font-semibold bg-green-500 hover:bg-green-600 transition-colors whitespace-nowrap min-w-20 shadow-lg",onClick:d,children:"次へ"})]})})]},o)}),(()=>{let t=[],s=n.SB,o=n.BB,i=e.openRaiserPosition,a=i?n[i]:null,getOptimalChipPosition=(e,t)=>{let s=50-e.x,r=35-e.y,n=Math.sqrt(s*s+r*r),o=22,i=0,a=0;"SB"===t?e.x>80?(o=16,i=-2,a=3):e.x<20?(o=18,i=4,a=2):e.y>60?(o=14,i=1,a=-1):e.x>50&&e.y<40?(o=18,i=-1,a=4):(o=20,i=0,a=3):"BB"===t?e.x>80?(o=18,i=-3,a=4):e.x<20?(o=16,i=3,a=3):e.y>60?(o=12,i=0,a=0):e.x<50&&e.y<40?(o=17,i=2,a=5):(o=22,i=-1,a=4):e.x>80?(o=18,i=-1,a=2):e.x<20?(o=18,i=1,a=2):e.y>60?(o=12,i=0,a=-2):e.y<20?(o=20,i=0,a=3):(o=19,i=0,a=1);let l=e.x+s/n*o+i,c=e.y+r/n*o+a;return{x:l,y:c}};if(s){let e=getOptimalChipPosition(s,"SB");t.push(r.jsx("div",{className:"absolute z-30",style:{left:`${e.x}%`,top:`${e.y}%`,transform:"translate(-50%, -50%)"},children:(0,r.jsxs)("div",{className:"flex items-center space-x-1",children:[r.jsx("div",{className:"bg-blue-400 w-2.5 h-2.5 rounded-full flex items-center justify-center shadow-md border border-blue-300"}),r.jsx("span",{className:"text-white font-medium text-xs",children:"0.5"})]})},"sb-blind-chip-mobile"))}if(o){let e=getOptimalChipPosition(o,"BB");t.push(r.jsx("div",{className:"absolute z-30",style:{left:`${e.x}%`,top:`${e.y}%`,transform:"translate(-50%, -50%)"},children:(0,r.jsxs)("div",{className:"flex items-center space-x-1",children:[r.jsx("div",{className:"bg-blue-600 w-2.5 h-2.5 rounded-full flex items-center justify-center shadow-md border border-blue-500"}),r.jsx("span",{className:"text-white font-medium text-xs",children:"1"})]})},"bb-blind-chip-mobile"))}if(a&&e?.openRaiseSize){let s=getOptimalChipPosition(a,i||"OPEN");t.push(r.jsx("div",{className:"absolute z-30",style:{left:`${s.x}%`,top:`${s.y}%`,transform:"translate(-50%, -50%)"},children:(0,r.jsxs)("div",{className:"flex items-center space-x-1",children:[r.jsx("div",{className:"bg-red-600 w-2.5 h-2.5 rounded-full flex items-center justify-center shadow-md border border-red-500"}),r.jsx("span",{className:"text-white font-medium text-xs",children:e.openRaiseSize})]})},"open-raiser-chips-mobile"))}let l=e.threeBetterPosition,c=l?Object.entries(n).find(([e])=>e===l)?.[1]:null;if(c&&e?.threeBetSize&&l){let s=getOptimalChipPosition(c,l);t.push(r.jsx("div",{className:"absolute z-30",style:{left:`${s.x}%`,top:`${s.y}%`,transform:"translate(-50%, -50%)"},children:(0,r.jsxs)("div",{className:"flex items-center space-x-1",children:[r.jsx("div",{className:"bg-orange-600 w-2.5 h-2.5 rounded-full flex items-center justify-center shadow-md border border-orange-500"}),r.jsx("span",{className:"text-white font-medium text-xs",children:e.threeBetSize})]})},"three-better-chip-mobile"))}return t})()]})}),t&&o&&A&&(()=>{let e=Object.entries(M).find(([e,t])=>t.isHero),t=e?n[e[0]]:{x:50,y:68};return r.jsx("div",{className:"absolute z-50",style:{left:`${t.x+15}%`,top:`${t.y-20}%`,transform:"translate(-50%, -50%)"},children:(()=>{let{element:e}=formatActionResult();return r.jsx("div",{style:{transform:j,opacity:N,transition:"transform 0.1s ease-out, opacity 0.1s ease-out"},children:e})})()})})(),y&&r.jsx(HandRangeGrid,{rangeData:k,title:`${e.heroPosition||"BTN"}ポジションからのオープンレイズレンジ (100BB)`,onClose:()=>p(!1)})]})})()})}):(0,r.jsxs)("div",{className:"w-full h-full",children:[(0,r.jsxs)("div",{className:`w-full h-full relative bg-[#0a0a0a] rounded-lg overflow-hidden ${getTournamentStageBackground()} ${e.tournamentStage?"border":""}`,children:[r.jsx("div",{className:"absolute top-0 left-0 w-[120px] h-[70px] bg-[#0a0a0a] z-30"}),r.jsx("svg",{className:"absolute inset-0 w-full h-full z-20",style:{pointerEvents:"none"},children:(()=>{let e=[];return[{from:"UTG",to:"UTG1"},{from:"UTG1",to:"LJ"},{from:"LJ",to:"HJ"},{from:"HJ",to:"CO"},{from:"BTN",to:"SB"},{from:"SB",to:"BB"},{from:"BB",to:"UTG"},{from:"CO",to:"BTN"}].forEach((t,s)=>{let{from:n,to:o}=t;if(M[n]&&M[o]){let t=M[n],i=M[o],a=t.x,l=t.y,c=i.x,d=i.y;e.push(r.jsx("line",{x1:`${a}%`,y1:`${l}%`,x2:`${c}%`,y2:`${d}%`,stroke:"rgba(200, 200, 200, 0.7)",strokeWidth:"1.2"},`pc-${n}-${o}-${s}`))}}),e})()}),(0,r.jsxs)("div",{className:"absolute w-full top-[180px] flex flex-col items-center text-white z-40",children:[(0,r.jsxs)("div",{className:"text-base font-medium px-2.5 py-0.5 bg-black/50 rounded-lg",children:[getPotSize()," BB"]}),e.icmPressure&&(0,r.jsxs)("div",{className:`absolute top-0 right-4 px-3 py-1 rounded-full text-sm font-medium
              ${"low"===e.icmPressure?"bg-green-700/70":"medium"===e.icmPressure?"bg-yellow-700/70":"high"===e.icmPressure?"bg-orange-700/70":"bg-red-700/70"}`,children:["ICM: ","low"===e.icmPressure?"低":"medium"===e.icmPressure?"中":"high"===e.icmPressure?"高":"極高"]})]}),(()=>{let e=Object.entries(M).find(([e])=>"BTN"===e)?.[1];if(e){let t=e.x-5,s=e.y-4.5;return r.jsx("div",{className:"absolute z-50",style:{left:`${t}%`,top:`${s}%`},children:r.jsx("div",{className:"w-4 h-4 bg-white rounded-full flex items-center justify-center shadow-lg border border-gray-300",children:r.jsx("span",{className:"text-black font-bold text-[9px]",children:"D"})})})}return null})(),Object.entries(M).map(([s,n])=>{let i=e.openRaiserPosition===s,a=e.threeBetterPosition===s;return(0,r.jsxs)("div",{className:`absolute ${isActionActive(s)?"z-50 animate-pulse":isWaitingForAction(s)?"z-40":"z-30"}`,style:{left:`${n.x}%`,top:`${n.y}%`,transform:"translate(-50%, -50%)"},children:[n.isHero&&t&&o&&A&&(()=>{let{element:e,evaluationLevel:t}=formatActionResult();return r.jsx("div",{className:"absolute -top-10 left-1/2 z-[999]",style:{transform:j,opacity:N,transition:"transform 0.1s ease-out, opacity 0.1s ease-out"},children:e})})(),(0,r.jsxs)("div",{className:`w-[4rem] h-[4rem] flex flex-col items-center justify-center rounded-full 
              ${n.isHero?"bg-green-800 border-2 border-green-500 shadow-md shadow-green-500/50":i?"bg-red-700 border-2 border-red-500 shadow-md":a?"bg-orange-700 border-2 border-orange-500 shadow-md shadow-orange-500/50":isActionComplete(s)?"bg-[#1a1a1a] border border-[#252525] shadow-md":isActionActive(s)?"bg-blue-800 border-2 border-blue-500 shadow-md shadow-blue-500/50 scale-110":w[s]?.action==="FOLD"?"bg-gray-800 border border-gray-700 shadow-md opacity-60":"bg-[#1a1a1a] border border-[#252525] shadow-md"}`,children:[r.jsx("div",{className:`text-[14px] font-bold ${n.isHero?"text-white":i?"text-white":a?"text-white":isActionComplete(s)?"text-gray-600":isActionActive(s)||isWaitingForAction(s)?"text-white":w[s]?.action==="FOLD"?"text-gray-500":"text-white"}`,children:n.label}),r.jsx("div",{className:`text-[14px] font-bold mt-0.5 ${n.isHero?"text-white":i?"text-white":a?"text-white":isActionComplete(s)?"text-gray-600":isActionActive(s)||isWaitingForAction(s)?"text-white":w[s]?.action==="FOLD"?"text-gray-500":"text-white"}`,children:getPositionStack(s)})]}),n.isHero&&r.jsx("div",{className:"absolute top-20 left-1/2 transform -translate-x-1/2 flex gap-0 space-x-0.5 z-40",children:r.jsx(PokerCardList,{cards:J,size:"md"})}),w[s]?.result&&!i&&r.jsx("div",{className:"absolute -top-6 left-1/2 transform -translate-x-1/2 z-40",children:r.jsx("div",{className:`text-xs px-2 py-1 rounded whitespace-nowrap font-semibold shadow-lg border border-opacity-50
                    ${w[s]?.action==="FOLD"?"bg-blue-600 text-white border-blue-400":w[s]?.action==="CALL"?"bg-green-600 text-white border-green-400":w[s]?.action?.startsWith("RAISE")?"bg-red-600 text-white border-red-400":"bg-gray-600 text-white border-gray-400"}`,children:w[s]?.result})})]},s)}),(()=>{let t=Object.entries(M).find(([e])=>"SB"===e)?.[1],s=Object.entries(M).find(([e])=>"BB"===e)?.[1];Object.entries(M).find(([e,t])=>t.isHero)?.[1];let n=e.openRaiserPosition,o=n?Object.entries(M).find(([e])=>e===n)?.[1]:null,i=e.threeBetterPosition,a=[];console.log("\uD83C\uDFAF チップ表示条件チェック:",{heroPosition:e.heroPosition,openRaiserPos:n,threeBetterPos:i,sbExists:!!t,sbIsHero:t?.isHero,stackSize:h,openRaiseSize:e?.openRaiseSize,isBBHero:"BB"===e.heroPosition,isSBOpener:"SB"===n,isSBThreeBetter:"SB"===i});let l="BB"===e.heroPosition&&"SB"===n||"SB"===i;console.log("\uD83D\uDD0D Should hide 0.5BB chip?",l,{isBBHero:"BB"===e.heroPosition,isSBOpener:"SB"===n,isSBThreeBetter:"SB"===i,openRaiseSize:e?.openRaiseSize}),l&&console.log("\uD83D\uDEAB SB chip hidden - reason:","SB"===i?"SB is 3-better":"BB hero + SB opener");let c="BB"===e.heroPosition&&"SB"===n;if(console.log("\uD83D\uDD0D Should hide 0.5BB chip?",c,{isBBHero:"BB"===e.heroPosition,isSBOpener:"SB"===n,openRaiseSize:e?.openRaiseSize}),c)console.log("\uD83D\uDEAB BB hero + SB opener: 0.5BB chip hidden");else if(t&&!t.isHero&&!("BB"===e.heroPosition&&"SB"===n)&&"SB"!==e.threeBetterPosition){let e=50-t.x,s=35-t.y,n=Math.sqrt(e*e+s*s),o=t.x+e/n*10,i=t.y+s/n*10;a.push(r.jsx("div",{className:"absolute z-10",style:{left:`${o}%`,top:`${i}%`,transform:"translate(-50%, -50%)"},children:(0,r.jsxs)("div",{className:"flex items-center space-x-1",children:[r.jsx("div",{className:"bg-blue-400 w-3.5 h-3.5 rounded-full flex items-center justify-center shadow-md border-2 border-blue-300"}),r.jsx("span",{className:"text-white font-medium text-[13px]",children:"0.5"})]})},"sb-blind-chip"))}let d=s&&"BB"!==e.threeBetterPosition;if(d){let e=50-s.x,t=35-s.y,n=Math.sqrt(e*e+t*t),o=s.x+e/n*10,i=s.y+t/n*10;a.push(r.jsx("div",{className:"absolute z-10",style:{left:`${o}%`,top:`${i}%`,transform:"translate(-50%, -50%)"},children:(0,r.jsxs)("div",{className:"flex items-center space-x-1",children:[r.jsx("div",{className:"bg-blue-600 w-3.5 h-3.5 rounded-full flex items-center justify-center shadow-md border-2 border-blue-500"}),r.jsx("span",{className:"text-white font-medium text-[13px]",children:"1"})]})},"bb-blind-chip-mobile"))}let u="SB"===n&&"15"===h&&e?.openRaiseSize===1||"BB"===e.heroPosition&&"SB"===n;if(u){let e=50-t.x,s=35-t.y,n=Math.sqrt(e*e+s*s),o=t.x+e/n*10,i=t.y+s/n*10;a.push(r.jsx("div",{className:"absolute z-20",style:{left:`${o}%`,top:`${i}%`,transform:"translate(-50%, -50%)"},children:(0,r.jsxs)("div",{className:"flex items-center space-x-1",children:[r.jsx("div",{className:"bg-green-600 w-3.5 h-3.5 rounded-full flex items-center justify-center shadow-md border-2 border-green-500"}),r.jsx("span",{className:"text-white font-medium text-[13px]",children:"1"})]})},"sb-limp-chip"))}if(o&&e?.openRaiseSize&&!("SB"===n&&"15"===h&&e?.openRaiseSize===1)&&!(s?.isHero&&"SB"===n)){let t=50-o.x,s=35-o.y,n=Math.sqrt(t*t+s*s),i=o.x+t/n*10,l=o.y+s/n*10;a.push(r.jsx("div",{className:"absolute z-20",style:{left:`${i}%`,top:`${l}%`,transform:"translate(-50%, -50%)"},children:(0,r.jsxs)("div",{className:"flex items-center space-x-1",children:[r.jsx("div",{className:"bg-red-600 w-3.5 h-3.5 rounded-full flex items-center justify-center shadow-md border-2 border-red-500"}),r.jsx("span",{className:"text-white font-medium text-[13px]",children:e.openRaiseSize})]})},"open-raiser-chips-dynamic"))}let x=e.threeBetterPosition?Object.entries(M).find(([t])=>t===e.threeBetterPosition)?.[1]:null;if(x&&e?.threeBetSize){let t=50-x.x,s=35-x.y,n=Math.sqrt(t*t+s*s),o=x.x+t/n*10,i=x.y+s/n*10;a.push(r.jsx("div",{className:"absolute z-30",style:{left:`${o}%`,top:`${i}%`,transform:"translate(-50%, -50%)"},children:(0,r.jsxs)("div",{className:"flex items-center space-x-1",children:[r.jsx("div",{className:"bg-orange-600 w-3.5 h-3.5 rounded-full flex items-center justify-center shadow-md border-2 border-orange-500"}),r.jsx("span",{className:"text-white font-medium text-[13px]",children:e.threeBetSize})]})},"three-better-chips-dynamic"))}return a})(),y&&r.jsx(HandRangeGrid,{rangeData:k,title:`${e.heroPosition||"BTN"}ポジションからのオープンレイズレンジ (100BB)`,onClose:()=>p(!1)})]}),r.jsx("div",{className:"flex space-x-2 mt-3",children:getAvailableActions().map(e=>{let{label:s,colorClass:n}="FOLD"===e?{label:"フォールド",colorClass:"bg-blue-600 hover:bg-blue-700"}:"CHECK"===e?{label:"チェック",colorClass:"bg-gray-600 hover:bg-gray-700"}:"CALL"===e?{label:"コール",colorClass:"bg-green-600 hover:bg-green-700"}:"RAISE"===e?{label:"レイズ",colorClass:"bg-red-600 hover:bg-red-700"}:"ALL IN"===e?{label:"オールイン",colorClass:"bg-purple-600 hover:bg-purple-700"}:{label:e,colorClass:"bg-gray-600 hover:bg-gray-700"};return r.jsx("button",{className:`px-4 py-2 rounded text-white font-medium ${n} transition-colors`,onClick:()=>i&&i(e),disabled:!!t||g&&!C,children:s},e)})})]})};var u=s(1440),x=s.n(u),h=s(1776);function AdminLogin({onClose:e}){let[t,s]=(0,n.useState)(""),[o,i]=(0,n.useState)(""),[a,l]=(0,n.useState)(!1),[c,d]=(0,n.useState)(""),{login:u}=(0,h.useAdmin)(),handleSubmit=async s=>{s.preventDefault(),l(!0),d("");let r=await u(t,o);r?e():d("ユーザー名またはパスワードが間違っています"),l(!1)};return r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6 w-full max-w-md mx-4 border border-gray-600",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h2",{className:"text-xl font-bold text-white flex items-center",children:"\uD83D\uDD12 管理者ログイン"}),r.jsx("button",{onClick:e,className:"text-gray-400 hover:text-white text-xl",children:"✕"})]}),(0,r.jsxs)("form",{onSubmit:handleSubmit,children:[(0,r.jsxs)("div",{className:"mb-4",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"ユーザー名"}),r.jsx("input",{type:"text",value:t,onChange:e=>s(e.target.value),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:border-blue-500",placeholder:"管理者ユーザー名を入力",required:!0})]}),(0,r.jsxs)("div",{className:"mb-6",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"パスワード"}),r.jsx("input",{type:"password",value:o,onChange:e=>i(e.target.value),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:border-blue-500",placeholder:"パスワードを入力",required:!0})]}),c&&r.jsx("div",{className:"mb-4 p-3 bg-red-900/50 border border-red-600 rounded-lg text-red-300 text-sm",children:c}),(0,r.jsxs)("div",{className:"flex gap-3",children:[r.jsx("button",{type:"button",onClick:e,className:"flex-1 py-2 px-4 bg-gray-600 hover:bg-gray-700 text-white rounded-lg transition-colors",children:"キャンセル"}),r.jsx("button",{type:"submit",disabled:a,className:"flex-1 py-2 px-4 bg-red-600 hover:bg-red-700 disabled:bg-gray-600 text-white rounded-lg transition-colors",children:a?"ログイン中...":"ログイン"})]})]}),(0,r.jsxs)("div",{className:"mt-4 text-xs text-gray-400 text-center bg-gray-700/30 p-2 rounded",children:[r.jsx("div",{className:"text-yellow-300 mb-1",children:"⚠️ セキュリティ注意"}),"このログインは重要なシステム管理機能へのアクセスを提供します。 認証情報は適切に管理してください。"]})]})})}let g=["UTG","UTG1","LJ","HJ","CO","BTN","SB","BB"],getPositionIndex=e=>g.indexOf(e),getValidOpenerPositions=e=>{let t=getPositionIndex(e);return t<=0?[]:g.slice(0,t)},isValidVsOpenCombination=(e,t)=>{let s=getPositionIndex(e),r=getPositionIndex(t);return r<s&&r>=0&&s>=0},normalizeHandType=e=>{if(!e||2!==e.length)return"XX";let t=e[0][0],s=e[1][0],r=e[0][1],n=e[1][1],o=["2","3","4","5","6","7","8","9","T","J","Q","K","A"],i=o.indexOf(t),a=o.indexOf(s);if(t===s)return t+s;{let e=i>a?t:s,o=i>a?s:t;return e+o+(r===n?"s":"o")}},generateMTTHand=()=>{let e=["2","3","4","5","6","7","8","9","T","J","Q","K","A"],t=["s","h","d","c"],s=[];for(;s.length<2;){let r=e[Math.floor(Math.random()*e.length)],n=t[Math.floor(Math.random()*t.length)],o=r+n;s.includes(o)||s.push(o)}return s},simulateMTTGTOData=(e,t,s,r,n,o)=>{let i=normalizeHandType(e);e[0][0],e[1][0],e[0][1],e[1][1];let a=parseInt(s.replace("BB","")),l={FOLD:0,CALL:0,RAISE:0,"ALL IN":0},c="FOLD",d={FOLD:0,CALL:-1.2,RAISE:-1.5,"ALL IN":-2};if("vsopen"===r&&o){if(!isValidVsOpenCombination(t,o))return console.error("❌ 無効なvsオープン組み合わせ:",{heroPosition:t,openerPosition:o,validOpeners:getValidOpenerPositions(t),reason:"オープンレイザーはヒーローより前のポジションである必要があります"}),{correctAction:c="FOLD",evData:d={FOLD:0,CALL:-5,RAISE:-5,"ALL IN":-5},frequencies:l={FOLD:100,CALL:0,RAISE:0,"ALL IN":0},normalizedHandType:i,effectiveStackExplanation:`❌ 無効なポジション組み合わせ: ${o} → ${t}`,stackSizeStrategy:`${t}ポジションに対して、${o}からのオープンは無効です。有効なオープンレイザー: ${getValidOpenerPositions(t).join(", ")}`,icmConsideration:"vs オープンでは、オープンレイザーはヒーローより前のポジションである必要があります。",recommendedBetSize:0,isInvalidCombination:!0,errorMessage:`${o} から ${t} への vs オープンは不可能です。`,validOpeners:getValidOpenerPositions(t)};let e=`vsopen_${t}_vs_${o}_${s}`,r="15BB"===s?`vsopen_${t}_vs_${o}`:null;console.log("\uD83D\uDD0D vs オープン分析:",{rangeKey:e,fallbackRangeKey:r,stackSize:s,handType:i,hasCustomRanges:!!n,hasThisRange:!!(n&&n[e]),hasFallbackRange:!!(n&&r&&n[r]),hasThisHand:!!(n&&(n[e]&&n[e][i]||r&&n[r]&&n[r][i])),availableRangeKeys:n?Object.keys(n):[]});let u=null;if(n&&n[e]&&n[e][i]?u=n[e][i]:r&&n&&n[r]&&n[r][i]&&(u=n[r][i],console.log("15BB互換性: 既存vsオープンレンジを使用",{fallbackRangeKey:r,handType:i})),u){let r={FOLD:0,CALL:0,RAISE:0,"ALL IN":0},n="FOLD";if(u.mixedFrequencies){let e=u.mixedFrequencies;r={FOLD:e.FOLD||0,CALL:e.CALL||0,RAISE:(e.RAISE||0)+(e.MIN||0),"ALL IN":e.ALL_IN||0};let t=Object.entries(r).reduce((e,t)=>t[1]>e[1]?t:e);n=t[0]}else{n=u.action.replace("ALL_IN","ALL IN");let e=n;r[e]=u.frequency,u.frequency<100&&(r.FOLD=100-u.frequency)}let l={FOLD:0,CALL:"CALL"===n?.8:-1,RAISE:"RAISE"===n?1.5:-1.2,"ALL IN":"ALL IN"===n?2.8:-2};console.log("\uD83C\uDFAF カスタムレンジ使用:",{rangeKey:e,handType:i,customHandData:u,primaryAction:n,frequencies:r});let c=getVsOpenAdvice(t,o,n,a),d="BTN"===o&&"15BB"===s?1:2.5;return{correctAction:n,evData:l,frequencies:r,normalizedHandType:i,effectiveStackExplanation:`カスタムレンジ: ${o}からのオープンに対する${t}ポジションでの設定済み戦略です。`,stackSizeStrategy:c,icmConsideration:getICMAdvice(a,n,t),recommendedBetSize:"ALL IN"===n?a:"RAISE"===n?2.2:0,openerInfo:getOpenerInfo(o),openRaiserPosition:o,openRaiseSize:d,isVsOpen:!0,isCustomRange:!0}}let x=getVsOpenStrategy(i,t,o,a);if(x){c=x.primaryAction,l=x.frequencies,d=x.evData;let e=getVsOpenAdvice(t,o,c,a),r="BTN"===o&&"15BB"===s?1:2;return{correctAction:c,evData:d,frequencies:l,normalizedHandType:i,effectiveStackExplanation:`${o}からのオープンに対する${t}ポジションでの最適戦略です。`,stackSizeStrategy:e,icmConsideration:getICMAdvice(a,c,t),recommendedBetSize:"ALL IN"===c?a:"RAISE"===c?2.2:0,openerInfo:getOpenerInfo(o),openRaiserPosition:o,openRaiseSize:r,isVsOpen:!0}}}if("vs3bet"===r){let e=o;if(!e){let s=(e=>{let t=getPositionIndex(e);return t>=g.length-1?[]:g.slice(t+1)})(t);if(0===s.length)return{correctAction:"FOLD",evData:{FOLD:0,CALL:-3,RAISE:-3,"ALL IN":-3},frequencies:{FOLD:100,CALL:0,RAISE:0,"ALL IN":0},normalizedHandType:i,effectiveStackExplanation:"❌ 無効なvs3ベット設定: 有効な3ベッターが存在しません",stackSizeStrategy:"vs3ベットには、オープンレイザーより後のポジションの3ベッターが必要です。",icmConsideration:"ポジション設定を確認してください。",recommendedBetSize:0};e=s[Math.floor(Math.random()*s.length)]}let r=`vs3bet_${t}_vs_${e}_${s}`,u="15BB"===s?`vs3bet_${t}_vs_${e}`:null;console.log("\uD83D\uDD0D vs 3ベット分析:",{rangeKey:r,fallbackRangeKey:u,stackSize:s,handType:i,hasCustomRanges:!!n,hasThisRange:!!(n&&n[r]),hasFallbackRange:!!(n&&u&&n[u]),hasThisHand:!!(n&&(n[r]&&n[r][i]||u&&n[u]&&n[u][i])),availableRangeKeys:n?Object.keys(n):[]});let x=null,h=r;if(n&&n[r]&&n[r][i]?x=n[r][i]:u&&n&&n[u]&&n[u][i]&&(x=n[u][i],h=u,console.log("15BB互換性: 既存vs3ベットレンジを使用",{fallbackRangeKey:u,handType:i})),x){let e={FOLD:0,CALL:0,RAISE:0,"ALL IN":0},r="FOLD";if(x.mixedFrequencies){let t=x.mixedFrequencies;e={FOLD:t.FOLD||0,CALL:t.CALL||0,RAISE:(t.RAISE||0)+(t.MIN||0),"ALL IN":t.ALL_IN||0};let s=Object.entries(e).reduce((e,t)=>t[1]>e[1]?t:e);r=s[0]}else{r=x.action.replace("ALL_IN","ALL IN");let t=r;e[t]=x.frequency,x.frequency<100&&(e.FOLD=100-x.frequency)}let n={FOLD:0,CALL:"CALL"===r?1.2:-1.5,RAISE:"RAISE"===r?2.8:-2,"ALL IN":"ALL IN"===r?4.5:-3};return console.log("\uD83C\uDFAF カスタムvs3ベットレンジ使用:",{rangeKey:h,handType:i,customHandData:x,primaryAction:r,frequencies:e}),{correctAction:r,evData:n,frequencies:e,normalizedHandType:i,effectiveStackExplanation:`カスタムレンジ: ${t}ポジション${s}でのvs 3ベット戦略です。`,stackSizeStrategy:`vs 3ベット: カスタム設定により${i}は${r}が推奨されます。`,icmConsideration:getICMAdvice(a,r,t),recommendedBetSize:"ALL IN"===r?a:"RAISE"===r?Math.min(.7*a,25):0,strategicAnalysis:`カスタムvs3ベット戦略: ${i}は${r}が設定されています。`,isCustomRange:!0}}return["AA","KK","QQ","AKs","AKo"].includes(i)?(c="ALL IN",l={FOLD:0,CALL:0,RAISE:20,"ALL IN":80}):["JJ","TT","AQs","AQo"].includes(i)?(c="CALL",l={FOLD:30,CALL:60,RAISE:0,"ALL IN":10}):(c="FOLD",l={FOLD:85,CALL:10,RAISE:0,"ALL IN":5}),d={FOLD:0,CALL:"CALL"===c?1.2:-1.5,RAISE:"RAISE"===c?2.8:-2,"ALL IN":"ALL IN"===c?4.5:-3},{correctAction:c,evData:d,frequencies:l,normalizedHandType:i,effectiveStackExplanation:`${s}スタックでのvs 3ベット戦略です。`,stackSizeStrategy:`vs 3ベット: ${i}は${c}が推奨されます。`,icmConsideration:getICMAdvice(a,c,t),recommendedBetSize:"ALL IN"===c?a:"RAISE"===c?Math.min(.7*a,25):0,strategicAnalysis:`vs3ベット戦略: ${i}は${c}が推奨されます。`,exploitSuggestion:`vs 3ベットでは、相手の3ベット頻度と4ベットに対する反応を観察して調整しましょう。`}}if("vs4bet"===r){let e=o;if(!e){let s=(e=>{let t=getPositionIndex(e);return t<=0?[]:g.slice(0,t)})(t);if(0===s.length)return{correctAction:"FOLD",evData:{FOLD:0,CALL:-5,RAISE:-5,"ALL IN":-5},frequencies:{FOLD:100,CALL:0,RAISE:0,"ALL IN":0},normalizedHandType:i,effectiveStackExplanation:"❌ 無効なvs4ベット設定: 有効な4ベッターが存在しません",stackSizeStrategy:"vs4ベットには、3ベッターより前のポジション（通常オリジナルのオープンレイザー）の4ベッターが必要です。",icmConsideration:"ポジション設定を確認してください。",recommendedBetSize:0};e=s[Math.floor(Math.random()*s.length)]}let r=`vs4bet_${t}_vs_${e}_${s}`,u="15BB"===s?`vs4bet_${t}_vs_${e}`:null;console.log("\uD83D\uDD0D vs 4ベット分析:",{rangeKey:r,fallbackRangeKey:u,stackSize:s,handType:i,hasCustomRanges:!!n,hasThisRange:!!(n&&n[r]),hasFallbackRange:!!(n&&u&&n[u]),hasThisHand:!!(n&&(n[r]&&n[r][i]||u&&n[u]&&n[u][i])),availableRangeKeys:n?Object.keys(n):[]});let x=null,h=r;if(n&&n[r]&&n[r][i]?x=n[r][i]:u&&n&&n[u]&&n[u][i]&&(x=n[u][i],h=u,console.log("15BB互換性: 既存vs4ベットレンジを使用",{fallbackRangeKey:u,handType:i})),x){let e={FOLD:0,CALL:0,RAISE:0,"ALL IN":0},r="FOLD";if(x.mixedFrequencies){let t=x.mixedFrequencies;e={FOLD:t.FOLD||0,CALL:t.CALL||0,RAISE:(t.RAISE||0)+(t.MIN||0),"ALL IN":t.ALL_IN||0};let s=Object.entries(e).reduce((e,t)=>t[1]>e[1]?t:e);r=s[0]}else{r=x.action.replace("ALL_IN","ALL IN");let t=r;e[t]=x.frequency,x.frequency<100&&(e.FOLD=100-x.frequency)}let n={FOLD:0,CALL:"CALL"===r?2:-2.5,RAISE:"RAISE"===r?5.5:-4,"ALL IN":"ALL IN"===r?8:-5};return console.log("\uD83C\uDFAF カスタムvs4ベットレンジ使用:",{rangeKey:h,handType:i,customHandData:x,primaryAction:r,frequencies:e}),{correctAction:r,evData:n,frequencies:e,normalizedHandType:i,effectiveStackExplanation:`カスタムレンジ: ${t}ポジション${s}でのvs 4ベット戦略です。`,stackSizeStrategy:`vs 4ベット: カスタム設定により${i}は${r}が推奨されます。`,icmConsideration:getICMAdvice(a,r,t),recommendedBetSize:"ALL IN"===r?a:"RAISE"===r?a:0,strategicAnalysis:`カスタムvs4ベット戦略: ${i}は${r}が設定されています。`,isCustomRange:!0}}return["AA","KK"].includes(i)?(c="ALL IN",l={FOLD:0,CALL:0,RAISE:0,"ALL IN":100}):["QQ","AKs","AKo"].includes(i)?(c="CALL",l={FOLD:20,CALL:70,RAISE:0,"ALL IN":10}):(c="FOLD",l={FOLD:95,CALL:5,RAISE:0,"ALL IN":0}),d={FOLD:0,CALL:"CALL"===c?2:-2.5,RAISE:"RAISE"===c?5.5:-4,"ALL IN":"ALL IN"===c?8:-5},{correctAction:c,evData:d,frequencies:l,normalizedHandType:i,effectiveStackExplanation:`${s}スタックでのvs 4ベット戦略です。`,stackSizeStrategy:`vs 4ベット: ${i}は${c}が推奨されます。`,icmConsideration:getICMAdvice(a,c,t),recommendedBetSize:"ALL IN"===c?a:"RAISE"===c?a:0,strategicAnalysis:`vs4ベット戦略: ${i}は${c}が推奨されます。`,exploitSuggestion:`vs 4ベットでは、プレミアムハンド以外はほぼフォールドが基本です。相手の4ベット頻度を観察しましょう。`}}if(a<=15){let e=`${t}_${s}`;if(console.log("\uD83D\uDD0D スタック固有レンジ分析:",{position:t,stackSize:s,stackSpecificRangeKey:e,handType:i,hasCustomRanges:!!n,hasStackSpecificRange:!!(n&&n[e]),hasGenericRange:!!(n&&n[t]),hasThisHand:!!(n&&(n[e]||n[t])&&(n[e]&&n[e][i]||n[t]&&n[t][i])),availablePositions:n?Object.keys(n):[]}),n&&n[e]&&n[e][i]){let r=n[e][i],o={FOLD:0,CALL:0,RAISE:0,"ALL IN":0},l="FOLD";if(r.mixedFrequencies){let e=r.mixedFrequencies;o={FOLD:e.FOLD||0,CALL:e.CALL||0,RAISE:(e.RAISE||0)+(e.MIN||0),"ALL IN":e.ALL_IN||0};let t=Object.entries(o).reduce((e,t)=>t[1]>e[1]?t:e);l=t[0]}else{l=({ALL_IN:"ALL IN",MIN:"RAISE",CALL:"CALL",FOLD:"FOLD",RAISE:"RAISE"})[r.action]||r.action.replace("ALL_IN","ALL IN");let e=l;o[e]=r.frequency,r.frequency<100&&(o.FOLD=100-r.frequency)}let c={FOLD:0,CALL:"CALL"===l?.8:-1,RAISE:"RAISE"===l?2.5:-1.2,"ALL IN":"ALL IN"===l?3.2:-2};console.log("\uD83C\uDFAF スタック固有カスタムレンジ使用:",{rangeKey:e,handType:i,customHandData:r,primaryAction:l,frequencies:o});let d=getPositionAdvice(t,l,a);return{correctAction:l,evData:c,frequencies:o,normalizedHandType:i,effectiveStackExplanation:`カスタムレンジ: ${t}ポジション${s}での設定済み戦略です。`,stackSizeStrategy:d,icmConsideration:getICMAdvice(a,l,t),recommendedBetSize:"ALL IN"===l?a:"RAISE"===l?2.2:0,strategicAnalysis:`カスタム${s}戦略: ${i}は${l}が設定されています。`,exploitSuggestion:getExploitSuggestion(l,t,i),isCustomRange:!0}}if(n&&n[t]&&n[t][i]){let e=n[t][i],s={FOLD:0,CALL:0,RAISE:0,"ALL IN":0},r="FOLD";if(e.mixedFrequencies){let t=e.mixedFrequencies;s={FOLD:t.FOLD||0,CALL:t.CALL||0,RAISE:(t.RAISE||0)+(t.MIN||0),"ALL IN":t.ALL_IN||0};let n=Object.entries(s).reduce((e,t)=>t[1]>e[1]?t:e);r=n[0]}else{r=({ALL_IN:"ALL IN",MIN:"RAISE",CALL:"CALL",FOLD:"FOLD",RAISE:"RAISE"})[e.action]||e.action.replace("ALL_IN","ALL IN");let t=r;s[t]=e.frequency,e.frequency<100&&(s.FOLD=100-e.frequency)}let o={FOLD:0,CALL:"CALL"===r?.8:-1,RAISE:"RAISE"===r?2.5:-1.2,"ALL IN":"ALL IN"===r?3.2:-2};console.log("\uD83C\uDFAF カスタムレンジ使用 (オープン):",{position:t,handType:i,customHandData:e,primaryAction:r,frequencies:s});let l=getPositionAdvice(t,r,a);return{correctAction:r,evData:o,frequencies:s,normalizedHandType:i,effectiveStackExplanation:`カスタムレンジ: ${t}ポジションでの設定済み15BBオープン戦略です。`,stackSizeStrategy:l,icmConsideration:getICMAdvice(a,r,t),recommendedBetSize:"ALL IN"===r?a:"RAISE"===r?2.2:0,strategicAnalysis:`カスタム15BB戦略: ${i}は${r}が設定されています。`,exploitSuggestion:getExploitSuggestion(r,t,i),isCustomRange:!0}}}if(a>15){let e=`${t}_${s}`;if(console.log("\uD83D\uDD0D 深いスタック固有レンジ分析:",{position:t,stackSize:s,stackSpecificRangeKey:e,handType:i,hasStackSpecificRange:!!(n&&n[e]),hasThisHand:!!(n&&n[e]&&n[e][i])}),n&&n[e]&&n[e][i]){let r=n[e][i],o={FOLD:0,CALL:0,RAISE:0,"ALL IN":0},l="FOLD";if(r.mixedFrequencies){let e=r.mixedFrequencies;o={FOLD:e.FOLD||0,CALL:e.CALL||0,RAISE:(e.RAISE||0)+(e.MIN||0),"ALL IN":e.ALL_IN||0};let t=Object.entries(o).reduce((e,t)=>t[1]>e[1]?t:e);l=t[0]}else{l=({ALL_IN:"ALL IN",MIN:"RAISE",CALL:"CALL",FOLD:"FOLD",RAISE:"RAISE"})[r.action]||r.action.replace("ALL_IN","ALL IN");let e=l;o[e]=r.frequency,r.frequency<100&&(o.FOLD=100-r.frequency)}let c={FOLD:0,CALL:"CALL"===l?.8:-1,RAISE:"RAISE"===l?2.5:-1.2,"ALL IN":"ALL IN"===l?3.2:-2};console.log("\uD83C\uDFAF 深いスタック固有カスタムレンジ使用:",{rangeKey:e,handType:i,customHandData:r,primaryAction:l,frequencies:o});let d=getPositionAdvice(t,l,a);return{correctAction:l,evData:c,frequencies:o,normalizedHandType:i,effectiveStackExplanation:`カスタムレンジ: ${t}ポジション${s}での設定済み戦略です。`,stackSizeStrategy:d,icmConsideration:getICMAdvice(a,l,t),recommendedBetSize:"ALL IN"===l?a:"RAISE"===l?2.2:0,strategicAnalysis:`カスタム${s}戦略: ${i}は${l}が設定されています。`,exploitSuggestion:getExploitSuggestion(l,t,i),isCustomRange:!0}}}console.log("\uD83D\uDCCA デフォルトMTTレンジ使用:",{position:t,stackDepthBB:a,handType:i});let u=getMTTRange(t,a),x=u[i];if(x){if(x.mixedFrequencies){let e=x.mixedFrequencies;l={FOLD:e.FOLD||0,CALL:e.CALL||0,RAISE:(e.RAISE||0)+(e.MIN||0),"ALL IN":e.ALL_IN||0};let t=Object.entries(l).reduce((e,t)=>t[1]>e[1]?t:e);c=t[0]}else{c=({ALL_IN:"ALL IN",MIN:"RAISE",CALL:"CALL",FOLD:"FOLD",RAISE:"RAISE"})[x.action]||x.action.replace("ALL_IN","ALL IN");let e=c;l[e]=x.frequency,x.frequency<100&&(l.FOLD=100-x.frequency)}d={FOLD:0,CALL:"CALL"===c?.8:-1,RAISE:"RAISE"===c?2.5:-1.2,"ALL IN":"ALL IN"===c?3.2:-2}}else c="FOLD",l={FOLD:100,CALL:0,RAISE:0,"ALL IN":0},d={FOLD:0,CALL:-1.5,RAISE:-2,"ALL IN":-2.5};return{correctAction:c,evData:d,frequencies:l,normalizedHandType:normalizeHandType(e),effectiveStackExplanation:`${s}スタックでのMTTレンジベース戦略です。`,stackSizeStrategy:`デフォルトMTTレンジ: ${i}は${c}が推奨されます。`,icmConsideration:"スタックに余裕があるため標準的な戦略を使用します。",recommendedBetSize:"RAISE"===c?2.5:0,strategicAnalysis:`${s}戦略: ${normalizeHandType(e)}は${c}が推奨されます。`,exploitSuggestion:getExploitSuggestion(c,t,normalizeHandType(e))}},getPositionAdvice=(e,t,s)=>{let r={UTG:"アーリーポジション",UTG1:"アーリーポジション",LJ:"ミドルポジション",HJ:"ミドルポジション",CO:"レイトポジション",BTN:"ボタン（最有利ポジション）",SB:"スモールブラインド",BB:"ビッグブラインド"}[e]||e;return"ALL_IN"===t?`${r}からの15BBオールインは、フォールドエクイティを最大化する戦略です。${"UTG"===e||"UTG1"===e?"アーリーポジションからのオールインは特にタイトなレンジが必要です。":"BTN"===e?"ボタンからのオールインは最も広いレンジで可能です。":"ポジションに応じた適切なレンジでプレイしましょう。"}`:"MIN"===t?`${r}からのミニレイズは、スタックを温存しながら主導権を握る戦略です。${s}BBでは、コミット率が高くなるため慎重に選択しましょう。`:"CALL"===t?`${r}からのコールは、ポストフロップでの判断を必要とします。15BBでは複雑な判断を避けるため、シンプルなプレイが推奨されます。`:"3BB"===t?`${r}からの3BBレイズは、ミニレイズよりも強い意思表示です。フォールドエクイティと価値の両方を狙います。`:`${r}からはフォールドが最適です。15BBという貴重なスタックを温存し、より有利な状況を待ちましょう。`},getICMAdvice=(e,t,s)=>e<=10?`${e}BBという極めて浅いスタックでは、ICMプレッシャーが最大となります。生存価値を最優先に考え、${"ALL_IN"===t?"確実に優位性のあるハンドでのみオールインしましょう。":"リスクを極力避けてプレイしましょう。"}`:e<=15?`15BBスタックでは中程度のICMプレッシャーがあります。${"FOLD"===t?"タイトなプレイで生存を優先しつつ、":"適度なアグレッションを保ちながら、"}ペイアウトジャンプを意識したプレイが重要です。`:"スタックに余裕があるため、標準的なICM考慮でプレイできます。ただし、常にトーナメント状況を意識しましょう。",getExploitSuggestion=(e,t,s)=>"FOLD"===e?`${s}は${t}ポジションでは一般的にフォールドですが、対戦相手がタイトな場合は時折ブラフとして利用できる可能性があります。`:"RAISE"===e?`${s}での${t}からのレイズは、対戦相手の3ベット頻度に応じて調整しましょう。`:"ALL IN"===e?`${s}でのオールインは15BBスタックでは標準的ですが、ICM状況を考慮して調整が必要な場合があります。`:`${s}は${t}ポジションで柔軟性のある戦略を要求します。`,getOpenerInfo=e=>({UTG:"UTGからのオープンは最もタイトなレンジです。プレミアムハンドと強いブロードウェイを中心とした約9-12%のレンジ。",MP:"MPからのオープンは中程度のレンジです。UTGよりもやや緩く、約12-15%のハンドでオープンします。",CO:"COからのオープンは積極的なレンジです。約22-26%のハンドでオープンし、ポジション利用を重視します。",BTN:"BTNからのオープンは最も広いレンジです。約40-50%のハンドでオープンし、ポジション優位を最大限活用。",SB:"SBからのオープンは特殊な戦略です。BBとヘッズアップになることを考慮した約30-40%のレンジ。"})[e]||"このポジションからのオープンレンジを分析中...",getVsOpenStrategy=(e,t,s,r)=>{if(r<=15){if(["AA","KK","QQ","AKs","AKo"].includes(e))return{frequencies:{FOLD:0,CALL:0,RAISE:0,"ALL IN":100},primaryAction:"ALL IN",evData:{FOLD:0,CALL:-1,RAISE:1.5,"ALL IN":3.2}};if(["JJ","TT","99","AQs","AQo","AJs"].includes(e))return["UTG","MP"].includes(s)?{frequencies:{FOLD:30,CALL:20,RAISE:0,"ALL IN":50},primaryAction:"ALL IN",evData:{FOLD:0,CALL:.8,RAISE:1.2,"ALL IN":2.5}}:{frequencies:{FOLD:10,CALL:30,RAISE:0,"ALL IN":60},primaryAction:"ALL IN",evData:{FOLD:0,CALL:1,RAISE:1.5,"ALL IN":2.8}};if(["88","77","66","ATo","KQs","KQo"].includes(e))return{frequencies:{FOLD:60,CALL:25,RAISE:0,"ALL IN":15},primaryAction:"FOLD",evData:{FOLD:0,CALL:.3,RAISE:.8,"ALL IN":1.8}}}return{frequencies:{FOLD:100,CALL:0,RAISE:0,"ALL IN":0},primaryAction:"FOLD",evData:{FOLD:0,CALL:-1.5,RAISE:-2,"ALL IN":-2.5}}},getVsOpenAdvice=(e,t,s,r)=>{let n=`${t}のオープンに対して${e}ポジションから`;return"ALL IN"===s?`${n}のオールインは15BBスタックでは標準的な戦略です。ICM圧力を考慮して調整してください。`:"CALL"===s?`${n}のコールは、フロップでの戦略を事前に計画しておくことが重要です。`:"FOLD"===s?`${n}のフォールドは、オープンレイザーのレンジに対して適切な判断です。`:`${n}の戦略は、相手のレンジとポジション優位を考慮して決定されています。`};function MTTTrainingPage(){(0,o.useRouter)();let e=(0,o.useSearchParams)(),{isAdmin:t,token:s,user:i,logout:a,loading:l}=(0,h.useAdmin)(),c=e.get("stack")||"75BB",d=e.get("position")||"BTN",u=e.get("action")||"openraise",m=e.get("hands")||"",f=m?decodeURIComponent(m).split(","):[],[b,L]=(0,n.useState)([]),[y,p]=(0,n.useState)(null),[A,B]=(0,n.useState)(!1),[N,v]=(0,n.useState)(!1),[j,I]=(0,n.useState)(null),[F,O]=(0,n.useState)(null),[D,q]=(0,n.useState)(0),[w,S]=(0,n.useState)(0),[C,T]=(0,n.useState)(!1),[R,_]=(0,n.useState)({}),[$,k]=(0,n.useState)("UTG"),[M,J]=(0,n.useState)(!1),[H,E]=(0,n.useState)(""),[K,Q]=(0,n.useState)(!1),[z,P]=(0,n.useState)("BTN"),[U,G]=(0,n.useState)("CO"),[W,V]=(0,n.useState)(!1),[X,Y]=(0,n.useState)(!1),[Z,ee]=(0,n.useState)([]),generateHandFromType=e=>{let t,s;console.log("\uD83C\uDFB2 ハンド生成デバッグ:",{handType:e});let r=e;if(3===e.length){let t=e[0],s=e[1],n=e[2],o=["2","3","4","5","6","7","8","9","T","J","Q","K","A"],i=o.indexOf(t),a=o.indexOf(s);i<a&&console.log("\uD83D\uDD04 ハンドタイプを正規化:",{original:e,normalized:r=s+t+n})}let n=["s","h","d","c"];if(2===r.length){let e=r[0],o=Math.floor(Math.random()*n.length);t=e+n[o],s=e+n[(o+1+Math.floor(3*Math.random()))%4]}else{if(3!==r.length)return console.log("⚠️ 不正なハンドタイプ:",r),generateMTTHand();let e=r[0],o=r[1],i=r[2];if(console.log("\uD83C\uDFB2 3文字ハンド処理:",{rank1:e,rank2:o,suitType:i}),"s"===i){let r=Math.floor(Math.random()*n.length);t=e+n[r],s=o+n[r]}else{let r=Math.floor(Math.random()*n.length);t=e+n[r],s=o+n[(r+1+Math.floor(3*Math.random()))%4]}}let o=[t,s];return console.log("\uD83C\uDFB2 生成されたハンド:",{originalHandType:e,normalizedHandType:r,result:o,finalNormalized:normalizeHandType(o)}),o},generateNewScenario=()=>{let t,s;if(Z.length>0){let e=Z[Math.floor(Math.random()*Z.length)];t=generateHandFromType(e)}else if(f.length>0){let e=f[Math.floor(Math.random()*f.length)];t=generateHandFromType(e)}else normalizeHandType(t=generateMTTHand());if(L(t),"vsopen"===u){let t=e.get("opener");if(t&&isValidVsOpenCombination(d,t))s=t;else{let e=getValidOpenerPositions(d);e.length>0&&(s=e[Math.floor(Math.random()*e.length)])}}else if("vs3bet"===u){let t=e.get("threebetter");if(t){let e=getPositionIndex(t),r=getPositionIndex(d);e>r&&(s=t)}if(!s){let e=getPositionIndex(d);if(e<g.length-1){let t=g.slice(e+1);t.length>0&&(s=t[Math.floor(Math.random()*t.length)])}}}else if("vs4bet"===u){let t=e.get("fourbetter");if(t){let e=getPositionIndex(t),r=getPositionIndex(d);e<r&&(s=t)}if(!s){let e=getPositionIndex(d);if(e>0){let t=g.slice(0,e);t.length>0&&(s=t[Math.floor(Math.random()*t.length)])}}}let r=simulateMTTGTOData(t,d,c,u,R,s);I(r);let n=r.recommendedBetSize,o=1.5,i=2,a=6.3;"30BB"===c?"openraise"===u?(i=2.1,o=1.5):"vsopen"===u?o=(i=2.1)+1.5:"vs3bet"===u?o=Math.round(10*(o=(i=2.1)+(a="SB"===s?7.5:"BB"===s?8.2:6.3)+.5))/10:"vs4bet"===u&&(o=25):"vsopen"===u&&"BTN"===s&&"15BB"===c?o=(i=1)+1:"vsopen"===u&&"SB"===s&&"15BB"===c?o=(i=1)+1:"vsopen"===u?o=i+1.5:"openraise"===u?o=1.5:"vs3bet"===u?o=13:"vs4bet"===u?o=30:"vs5bet"===u&&(o=70);let l={id:Math.random().toString(),description:`エフェクティブスタック:${c} - ${"openraise"===u?"30BB"===c?"オープンレイズ(2.1BB)":"オープンレイズ":"vsopen"===u?"BTN"===s&&"15BB"===c?`vs ${s||"UTG"}のリンプ(1BB)`:"30BB"===c?`vs ${s||"UTG"}のオープン(2.1BB)`:`vs ${s||"UTG"}のオープン(2.5BB)`:"vs3bet"===u?"30BB"===c&&s?`vs ${s}の3ベット(${a}BB)`:"vs 3ベット":"vs4bet"===u?"vs 4ベット":"vs5bet"===u?"vs 5ベット":"ランダム"}`,heroPosition:d,heroHand:t,potSize:o,correctAction:r.correctAction,evData:r.evData,frequencies:r.frequencies,correctBetSize:n,stackDepth:c,openRaiserPosition:"vs3bet"===u?d:s,openRaiseSize:i,threeBetSize:"30BB"===c&&"vs3bet"===u?a:void 0,threeBetterPosition:"vs3bet"===u?s:void 0,positions:{UTG:{active:!0,stack:parseInt(c),isHero:"UTG"===d},UTG1:{active:!0,stack:parseInt(c),isHero:"UTG1"===d},LJ:{active:!0,stack:parseInt(c),isHero:"LJ"===d},HJ:{active:!0,stack:parseInt(c),isHero:"HJ"===d},CO:{active:!0,stack:parseInt(c),isHero:"CO"===d},BTN:{active:!0,stack:parseInt(c),isHero:"BTN"===d},SB:{active:!0,stack:parseInt(c)-.5,isHero:"SB"===d},BB:{active:!0,stack:parseInt(c)-1,isHero:"BB"===d}}};O(l)};(0,n.useEffect)(()=>{let checkMobile=()=>{V(window.innerWidth<768)};return checkMobile(),window.addEventListener("resize",checkMobile),()=>window.removeEventListener("resize",checkMobile)},[]),(0,n.useEffect)(()=>{generateNewScenario()},[d,c,u,m,R]),(0,n.useEffect)(()=>{let e=localStorage.getItem("mtt-custom-ranges");if(e)try{let t=JSON.parse(e);console.log("\uD83D\uDCC2 localStorageからカスタムレンジを読み込み:",t),_(t)}catch(e){console.error("カスタムレンジの読み込みに失敗しました:",e)}else console.log("\uD83D\uDCC2 localStorageにカスタムレンジが見つかりません")},[]),(0,n.useEffect)(()=>{let loadSystemRanges=async()=>{try{let e=await fetch("/api/mtt-ranges");if(e.ok){let t=await e.json();if(t.ranges&&Object.keys(t.ranges).length>0){let e=localStorage.getItem("mtt-custom-ranges"),s=!1;if(e){let r=JSON.parse(e);Object.keys(t.ranges).length>Object.keys(r).length&&(s=!0)}else s=!0;if(s){_(t.ranges),localStorage.setItem("mtt-custom-ranges",JSON.stringify(t.ranges)),console.log("✅ システムAPIからレンジデータを自動同期しました");return}}}console.log("APIからの読み込みが失敗したため、データファイルから読み込みます...");let t=await fetch("/data/mtt-ranges.json");if(t.ok){let e=await t.json();if(e.ranges&&Object.keys(e.ranges).length>0){let t=localStorage.getItem("mtt-custom-ranges"),s=!1;if(t){let r=JSON.parse(t);Object.keys(e.ranges).length>Object.keys(r).length&&(s=!0)}else s=!0;s&&(_(e.ranges),localStorage.setItem("mtt-custom-ranges",JSON.stringify(e.ranges)),console.log(`✅ データファイルからレンジデータを自動同期しました（${Object.keys(e.ranges).length}ポジション）`))}}}catch(t){console.log("自動レンジ読み込みエラー:",t.message);let e=localStorage.getItem("mtt-custom-ranges");e||(console.log("緊急フォールバック: 基本レンジを設定します"),_({UTG:{AA:{action:"MIN",frequency:100}},BTN:{AA:{action:"MIN",frequency:100}}}))}};loadSystemRanges()},[]);let handleSaveRange=(e,t)=>{let s={...R,[e]:t};if(e.endsWith("_15BB")){let r=e.replace("_15BB","");s[r]=t,console.log("15BB互換性: 既存レンジキーも更新",{basePosition:r,position:e})}else if(e.includes("vsopen_")&&e.endsWith("_15BB")){let r=e.replace("_15BB","");s[r]=t,console.log("15BB互換性: 既存vsオープンレンジキーも更新",{baseVsOpenKey:r,position:e})}else if(e.startsWith("vs3bet_")&&e.endsWith("_15BB")){let r=e.replace("_15BB","");s[r]=t,console.log("15BB互換性: 既存vs3ベットレンジキーも更新",{baseVs3BetKey:r,position:e})}else if(e.startsWith("vs4bet_")&&e.endsWith("_15BB")){let r=e.replace("_15BB","");s[r]=t,console.log("15BB互換性: 既存vs4ベットレンジキーも更新",{baseVs4BetKey:r,position:e})}else if(!e.includes("_")&&!e.startsWith("vsopen_")&&"15BB"!==c){let r=`${e}_${c}`;s[r]=t,delete s[e],console.log("スタック固有レンジ保存",{position:e,stackSpecificKey:r})}_(s);try{localStorage.setItem("mtt-custom-ranges",JSON.stringify(s)),console.log(`${e}ポジションのカスタムレンジを保存しました`)}catch(e){console.error("カスタムレンジの保存に失敗しました:",e)}},handleSaveToSystem=async()=>{if(!t||!s){alert("❌ 管理者権限が必要です。");return}if(0===Object.keys(R).length){alert("保存するレンジデータがありません。");return}try{let e=await fetch("/api/mtt-ranges",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify({ranges:R,metadata:{creator:"MTT Admin System",timestamp:new Date().toISOString()}})});if(e.ok){let t=await e.json();alert(`✅ システム全体に保存完了！
${t.metadata.totalPositions}ポジション、${t.metadata.totalHands}ハンドを保存しました。`)}else{let t=await e.json();throw Error(t.error||"保存に失敗しました")}}catch(e){console.error("システム保存エラー:",e),alert(`❌ システムへの保存に失敗しました: ${e.message}`)}},handleLoadFromSystem=async()=>{if(!t||!s){alert("❌ 管理者権限が必要です。");return}try{let e=await fetch("/api/mtt-ranges",{headers:{Authorization:`Bearer ${s}`}});if(e.ok){let t=await e.json();t.ranges&&Object.keys(t.ranges).length>0?confirm(`システムデータを読み込みますか？
${t.metadata.totalPositions}ポジション、${t.metadata.totalHands}ハンドが存在します。
現在のローカルデータは上書きされます。`)&&(_(t.ranges),localStorage.setItem("mtt-custom-ranges",JSON.stringify(t.ranges)),alert("✅ システムデータを正常に読み込みました！")):alert("❌ システムに保存されたレンジデータが見つかりません。")}else{let t=await e.json();throw Error(t.error||"データの読み込みに失敗しました")}}catch(e){console.error("システム読み込みエラー:",e),alert(`❌ システムからの読み込みに失敗しました: ${e.message}`)}},handleClearSystemRanges=async()=>{if(!t||!s){alert("❌ 管理者権限が必要です。");return}if(confirm("⚠️ システム全体のレンジデータを削除しますか？\nこの操作は全てのユーザーに影響し、取り消せません。"))try{let e=await fetch("/api/mtt-ranges",{method:"DELETE",headers:{Authorization:`Bearer ${s}`}});if(e.ok)alert("✅ システム全体のレンジデータを削除しました。");else{let t=await e.json();throw Error(t.error||"削除に失敗しました")}}catch(e){console.error("システム削除エラー:",e),alert(`❌ システムデータの削除に失敗しました: ${e.message}`)}},handleOpenRangeEditor=e=>{console.log("レンジエディターボタン押下:",e);let t=e;if(e.endsWith("_15BB")){let s=e.replace("_15BB","");R[s]&&!R[e]&&(t=s,console.log("15BB互換性: 既存レンジキーを使用",{basePosition:s,targetPosition:t}))}else if(e.startsWith("vsopen_")&&e.endsWith("_15BB")){let s=e.replace("_15BB","");R[s]&&!R[e]&&(t=s,console.log("15BB互換性: 既存vsオープンレンジキーを使用",{baseVsOpenKey:s,targetPosition:t}))}else if(e.startsWith("vs3bet_")&&e.endsWith("_15BB")){let s=e.replace("_15BB","");R[s]&&!R[e]&&(t=s,console.log("15BB互換性: 既存vs3ベットレンジキーを使用",{baseVs3BetKey:s,targetPosition:t}))}else if(e.startsWith("vs4bet_")&&e.endsWith("_15BB")){let s=e.replace("_15BB","");R[s]&&!R[e]&&(t=s,console.log("15BB互換性: 既存vs4ベットレンジキーを使用",{baseVs4BetKey:s,targetPosition:t}))}k(t),T(!0),setTimeout(()=>{console.log("showRangeEditor:",C,"selectedEditPosition:",t)},100)},handleActionSelect=e=>{p(e);let t=e.split(" ")[0],s=j?.correctAction?.split(" ")[0]||"",r=t===s;if(j?.frequencies&&e in j.frequencies){let t=j.frequencies[e];r=t>=30||t>=10}B(r),v(!0),q(e=>e+1),r&&S(e=>e+1)},handleNextSpot=()=>{p(null),B(!1),v(!1),generateNewScenario()},handleRepeatSpot=()=>{if(p(null),B(!1),v(!1),F){let e={...F,id:Math.random().toString()};O(e)}};return F?(0,r.jsxs)("div",{className:"relative",children:[!t&&r.jsx("button",{className:"absolute top-4 right-4 z-50 px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg shadow-lg font-bold",onClick:()=>Q(!0),children:"管理者ログイン"}),K&&r.jsx(AdminLogin,{onClose:()=>Q(!1)}),r.jsx("div",{className:"min-h-screen bg-black md:bg-gray-900 text-white p-4",children:(0,r.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,r.jsxs)("div",{className:"mb-4 hidden md:flex justify-between items-center",children:[r.jsx("h1",{className:"text-2xl font-bold",children:"MTT GTOトレーニング"}),r.jsx("div",{className:"flex items-center gap-4",children:r.jsx(x(),{href:`/trainer/mtt?${new URLSearchParams({stack:c,position:d,action:u,...f.length>0?{hands:encodeURIComponent(f.join(","))}:{}}).toString()}`,className:"px-3 py-1 bg-gray-700 rounded hover:bg-gray-600 text-sm",children:"← 戻る"})})]}),r.jsx("div",{className:"mb-4 md:hidden",children:(0,r.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[r.jsx("h1",{className:"text-xl font-bold",children:"MTT GTOトレーニング"}),r.jsx(x(),{href:`/trainer/mtt?${new URLSearchParams({stack:c,position:d,action:u,...f.length>0?{hands:encodeURIComponent(f.join(","))}:{}}).toString()}`,className:"px-2 py-1 bg-gray-700 rounded hover:bg-gray-600 text-xs",children:"← 戻る"})]})}),t&&(0,r.jsxs)("div",{className:"bg-gradient-to-r from-purple-900/30 to-blue-900/30 rounded-lg p-4 mb-4 border border-purple-700/50",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("h3",{className:"text-lg font-semibold text-white mb-1",children:["レンジをカスタマイズ ",r.jsx("span",{className:"text-xs bg-red-600 px-2 py-1 rounded",children:"管理者限定"})]}),(0,r.jsxs)("p",{className:"text-sm text-gray-300",children:["各ポジションの",c,"オープンレイズレンジを設定できます"]}),r.jsx("p",{className:"text-xs text-blue-300 mt-1",children:"\uD83D\uDCA1 ハンド形式: K9s, ATo, QQ など（9Ks → K9s に自動変換されます）"}),Object.keys(R).filter(e=>e.endsWith(`_${c}`)||!e.includes("_")).length>0&&(0,r.jsxs)("div",{className:"text-xs text-green-400 mt-1",children:[c,"カスタムレンジ設定済み: ",Object.keys(R).filter(e=>e.endsWith(`_${c}`)||!e.includes("_")&&"15BB"===c).length,"レンジ"]})]}),r.jsx("div",{className:"flex gap-2 flex-wrap",children:["UTG","UTG1","LJ","HJ","CO","BTN","SB"].map(e=>{let t=`${e}_${c}`,s=R[t]||"15BB"===c&&R[e];return(0,r.jsxs)("button",{onClick:()=>handleOpenRangeEditor(t),className:`px-3 py-2 rounded-lg text-sm font-semibold transition-all duration-200 ${s?"bg-green-600 hover:bg-green-700 text-white border-2 border-green-400":"bg-purple-600 hover:bg-purple-700 text-white border-2 border-transparent"}`,title:`${e}ポジション ${c}スタックのレンジ設定`,children:[e,s&&" ✓"]},e)})})]}),(0,r.jsxs)("div",{className:"mt-4 pt-4 border-t border-purple-600/30",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[r.jsx("h4",{className:"text-sm font-semibold text-white mb-1",children:"\uD83D\uDCBE データ永続保存"}),r.jsx("p",{className:"text-xs text-gray-400",children:"レンジデータをファイルで保存・復元できます（ブラウザに依存しない永続保存）"})]}),(0,r.jsxs)("div",{className:"flex gap-2 flex-wrap",children:[(0,r.jsxs)("button",{onClick:()=>{try{let e=JSON.stringify(R,null,2),t=new Blob([e],{type:"application/json"}),s=URL.createObjectURL(t),r=document.createElement("a");r.href=s,r.download=`mtt-custom-ranges-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(s)}catch(e){console.error("レンジのエクスポートに失敗しました:",e),alert("エクスポートに失敗しました。")}},disabled:0===Object.keys(R).length,className:`px-3 py-2 rounded-lg text-xs font-medium transition-all duration-200 flex items-center gap-1 ${Object.keys(R).length>0?"bg-blue-600 hover:bg-blue-700 text-white border border-blue-500":"bg-gray-600 text-gray-400 cursor-not-allowed border border-gray-500"}`,children:[r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M9 19l3 3m0 0l3-3m3 3V10"})}),"エクスポート"]}),(0,r.jsxs)("label",{className:"px-3 py-2 rounded-lg text-xs font-medium bg-green-600 hover:bg-green-700 text-white border border-green-500 cursor-pointer transition-all duration-200 flex items-center gap-1",children:[r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),"インポート",r.jsx("input",{type:"file",accept:".json",onChange:e=>{let t=e.target.files?.[0];if(!t)return;let s=new FileReader;s.onload=e=>{try{let t=JSON.parse(e.target?.result);if("object"==typeof t&&null!==t)_(t),localStorage.setItem("mtt-custom-ranges",JSON.stringify(t)),alert("レンジを正常にインポートしました。");else throw Error("無効なファイル形式です。")}catch(e){console.error("レンジのインポートに失敗しました:",e),alert("ファイルの読み込みに失敗しました。正しいフォーマットのファイルか確認してください。")}},s.readAsText(t),e.target.value=""},className:"hidden"})]}),(0,r.jsxs)("button",{onClick:()=>{confirm("全てのカスタムレンジを削除しますか？この操作は取り消せません。")&&(_({}),localStorage.removeItem("mtt-custom-ranges"),alert("全てのカスタムレンジを削除しました。"))},disabled:0===Object.keys(R).length,className:`px-3 py-2 rounded-lg text-xs font-medium transition-all duration-200 flex items-center gap-1 ${Object.keys(R).length>0?"bg-red-600 hover:bg-red-700 text-white border border-red-500":"bg-gray-600 text-gray-400 cursor-not-allowed border border-gray-500"}`,children:[r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"全削除"]})]})]}),t&&r.jsx("div",{className:"mt-4 pt-3 border-t border-red-600/30 bg-red-900/10 rounded-lg p-3",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[r.jsx("h4",{className:"text-sm font-semibold text-red-300 mb-1 flex items-center",children:"\uD83D\uDD12 管理者専用システム管理"}),r.jsx("p",{className:"text-xs text-gray-400",children:"重要なシステム - 全てのweb・環境で共有される永続データ保存"})]}),(0,r.jsxs)("div",{className:"flex gap-2 flex-wrap",children:[(0,r.jsxs)("button",{onClick:handleSaveToSystem,disabled:0===Object.keys(R).length,className:`px-3 py-2 rounded-lg text-xs font-medium transition-all duration-200 flex items-center gap-1 ${Object.keys(R).length>0?"bg-red-600 hover:bg-red-700 text-white border border-red-500":"bg-gray-600 text-gray-400 cursor-not-allowed border border-gray-500"}`,children:[r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4"})}),"システム保存"]}),(0,r.jsxs)("button",{onClick:handleLoadFromSystem,className:"px-3 py-2 rounded-lg text-xs font-medium bg-orange-600 hover:bg-orange-700 text-white border border-orange-500 transition-all duration-200 flex items-center gap-1",children:[r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),"システム読み込み"]}),(0,r.jsxs)("button",{onClick:()=>{fetch("/data/mtt-ranges.json").then(e=>e.json()).then(e=>{e.ranges?(_(e.ranges),localStorage.setItem("mtt-custom-ranges",JSON.stringify(e.ranges)),alert(`✅ データファイルから読み込み完了！
${Object.keys(e.ranges).length}ポジション分のレンジを読み込みました。`),window.location.reload()):alert("❌ データファイルの形式が正しくありません")}).catch(e=>{console.error("データファイル読み込みエラー:",e),alert(`❌ データファイルの読み込みに失敗しました: ${e.message}`)})},className:"px-3 py-2 rounded-lg text-xs font-medium bg-green-600 hover:bg-green-700 text-white border border-green-500 transition-all duration-200 flex items-center gap-1",children:[r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"データファイル読み込み"]}),(0,r.jsxs)("button",{onClick:handleClearSystemRanges,className:"px-3 py-2 rounded-lg text-xs font-medium bg-red-800 hover:bg-red-900 text-white border border-red-700 transition-all duration-200 flex items-center gap-1",children:[r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"システム削除"]})]})]})})]})]}),"vsopen"===u&&(0,r.jsxs)("div",{className:"bg-gradient-to-r from-green-900/30 to-blue-900/30 rounded-lg p-4 mb-4 border border-green-700/50",children:[r.jsx("div",{className:"flex items-center justify-between",children:(0,r.jsxs)("div",{children:[(0,r.jsxs)("h3",{className:"text-lg font-semibold text-white mb-1",children:["vs オープンレンジをカスタマイズ (",c,")"]}),(0,r.jsxs)("p",{className:"text-sm text-gray-300",children:["現在の",c,"スタックでのヒーローポジションとオープンレイザーの組み合わせでレンジを設定できます"]}),r.jsx("p",{className:"text-xs text-green-300 mt-1",children:"\uD83D\uDCA1 オープンに対してFOLD/CALL/RAISE/ALL INの頻度を設定します"}),Object.keys(R).filter(e=>e.startsWith("vsopen_")&&(e.endsWith(`_${c}`)||"15BB"===c&&!e.includes("_10BB")&&!e.includes("_20BB")&&!e.includes("_30BB")&&!e.includes("_40BB")&&!e.includes("_50BB")&&!e.includes("_75BB"))).length>0&&(0,r.jsxs)("div",{className:"text-xs text-green-400 mt-1",children:[c,"カスタムvsオープンレンジ設定済み: ",Object.keys(R).filter(e=>e.startsWith("vsopen_")&&(e.endsWith(`_${c}`)||"15BB"===c&&!e.includes("_10BB")&&!e.includes("_20BB")&&!e.includes("_30BB")&&!e.includes("_40BB")&&!e.includes("_50BB")&&!e.includes("_75BB"))).length,"レンジ"]})]})}),(0,r.jsxs)("div",{className:"mt-4",children:[(0,r.jsxs)("h4",{className:"text-sm font-semibold text-white mb-3",children:[c,"スタックでのヒーローポジション別vsオープンレンジ設定："]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:["UTG1","LJ","HJ","CO","BTN","SB","BB"].map(e=>{let t=getValidOpenerPositions(e);return 0===t.length?null:(0,r.jsxs)("div",{className:"bg-gray-800/50 rounded-lg p-3 border border-gray-600",children:[(0,r.jsxs)("div",{className:"text-sm font-semibold text-green-400 mb-2",children:[e," (ヒーロー)"]}),r.jsx("div",{className:"text-xs text-gray-300 mb-2",children:"SB"===e||"BB"===e?"BTNからのアクションに対する設定:":"vs オープンレイザー:"}),r.jsx("div",{className:"flex flex-wrap gap-1",children:t.map(t=>{let s=`vsopen_${e}_vs_${t}_${c}`,n="15BB"===c?`vsopen_${e}_vs_${t}`:null,o=R[s]||n&&R[n],i="BTN"===t&&"15BB"===c,a=i&&("SB"===e||"BB"===e)?`${t}がリンプ→${e}（あなた）のアクション`:t;return(0,r.jsxs)("button",{onClick:()=>handleOpenRangeEditor(s),className:`px-2 py-1 rounded text-xs font-medium transition-all duration-200 ${o?"bg-green-600 hover:bg-green-700 text-white border-2 border-green-400":"bg-blue-600 hover:bg-blue-700 text-white border-2 border-transparent"}`,title:`${e} vs ${t}の{stackSize}スタックレンジ設定`,children:[a,o&&" ✓"]},t)})})]},e)})}),(0,r.jsxs)("div",{className:"mt-4 p-3 bg-blue-900/20 border border-blue-600/30 rounded text-xs",children:[(0,r.jsxs)("div",{className:"text-blue-400 font-semibold mb-1",children:["\uD83D\uDCA1 vs オープンレンジの特徴 (",c,"スタック固有)"]}),(0,r.jsxs)("div",{className:"text-gray-300",children:["• ",r.jsx("strong",{children:"スタック依存:"})," ",c,"スタック専用のレンジ設定",r.jsx("br",{}),"• ",r.jsx("strong",{children:"ポジション依存:"})," ヒーローより前のポジションからのオープンのみ対応",r.jsx("br",{}),"• ",r.jsx("strong",{children:"アクション選択:"})," FOLD（フォールド）、CALL（コール）、RAISE（レイズ）、ALL IN（オールイン）",r.jsx("br",{}),"• ",r.jsx("strong",{children:"混合戦略:"})," 右クリックで詳細な頻度設定（例：CALL 60%, FOLD 40%）"]})]})]})]}),"vs3bet"===u&&(0,r.jsxs)("div",{className:"bg-gradient-to-r from-orange-900/30 to-red-900/30 rounded-lg p-4 mb-4 border border-orange-700/50",children:[r.jsx("div",{className:"flex items-center justify-between",children:(0,r.jsxs)("div",{children:[(0,r.jsxs)("h3",{className:"text-lg font-semibold text-white mb-1",children:["vs 3ベットレンジをカスタマイズ (",c,")"]}),(0,r.jsxs)("p",{className:"text-sm text-gray-300",children:["現在の",c,"スタックでのオープンレイザーと3ベッターの組み合わせでレンジを設定できます"]}),r.jsx("p",{className:"text-xs text-orange-300 mt-1",children:"\uD83D\uDCA1 3ベットに対してFOLD/CALL/RAISE(4bet)/ALL INの頻度を設定します"}),Object.keys(R).filter(e=>e.startsWith("vs3bet_")&&(e.endsWith(`_${c}`)||"15BB"===c&&!e.includes("_10BB")&&!e.includes("_20BB")&&!e.includes("_30BB")&&!e.includes("_40BB")&&!e.includes("_50BB")&&!e.includes("_75BB"))).length>0&&(0,r.jsxs)("div",{className:"text-xs text-orange-400 mt-1",children:[c,"カスタムvs3ベットレンジ設定済み: ",Object.keys(R).filter(e=>e.startsWith("vs3bet_")&&(e.endsWith(`_${c}`)||"15BB"===c&&!e.includes("_10BB")&&!e.includes("_20BB")&&!e.includes("_30BB")&&!e.includes("_40BB")&&!e.includes("_50BB")&&!e.includes("_75BB"))).length,"レンジ"]})]})}),(0,r.jsxs)("div",{className:"mt-4",children:[(0,r.jsxs)("h4",{className:"text-sm font-semibold text-white mb-3",children:[c,"スタックでのオープンレイザー別vs3ベットレンジ設定："]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:["UTG","UTG1","LJ","HJ","CO","BTN","SB"].map(e=>{let t=(e=>{let t=getPositionIndex(e);return t>=g.length-1?[]:g.slice(t+1)})(e);return 0===t.length?null:(0,r.jsxs)("div",{className:"bg-gray-800/50 rounded-lg p-3 border border-gray-600",children:[(0,r.jsxs)("div",{className:"text-sm font-semibold text-orange-400 mb-2",children:[e," (オープンレイザー)"]}),r.jsx("div",{className:"text-xs text-gray-300 mb-2",children:"3ベッターからの攻撃に対する対応:"}),r.jsx("div",{className:"flex flex-wrap gap-1",children:t.map(t=>{let s=`vs3bet_${e}_vs_${t}_${c}`,n="15BB"===c?`vs3bet_${e}_vs_${t}`:null,o=R[s]||n&&R[n];return(0,r.jsxs)("button",{onClick:()=>handleOpenRangeEditor(s),className:`px-2 py-1 rounded text-xs font-medium transition-all duration-200 ${o?"bg-orange-600 hover:bg-orange-700 text-white border-2 border-orange-400":"bg-gray-600 hover:bg-gray-700 text-white border-2 border-transparent"}`,title:`${e} vs ${t}の${c}スタックvs3ベットレンジ設定`,children:[t,o&&" ✓"]},t)})})]},e)})}),(0,r.jsxs)("div",{className:"mt-4 p-3 bg-orange-900/20 border border-orange-600/30 rounded text-xs",children:[(0,r.jsxs)("div",{className:"text-orange-400 font-semibold mb-1",children:["\uD83D\uDCA1 vs 3ベットレンジの特徴 (",c,"スタック固有)"]}),(0,r.jsxs)("div",{className:"text-gray-300",children:["• ",r.jsx("strong",{children:"スタック依存:"})," ",c,"スタック専用のレンジ設定",r.jsx("br",{}),"• ",r.jsx("strong",{children:"ポジション依存:"})," オープンレイザーが後のポジションからの3ベットに対する反応戦略",r.jsx("br",{}),"• ",r.jsx("strong",{children:"アクション選択:"})," FOLD（フォールド）、CALL（コール）、RAISE（4ベット）、ALL IN（オールイン）",r.jsx("br",{}),"• ",r.jsx("strong",{children:"混合戦略:"})," 右クリックで詳細な頻度設定（例：CALL 70%, FOLD 30%）"]})]})]})]}),"vs4bet"===u&&(0,r.jsxs)("div",{className:"bg-gradient-to-r from-red-900/30 to-pink-900/30 rounded-lg p-4 mb-4 border border-red-700/50",children:[r.jsx("div",{className:"flex items-center justify-between",children:(0,r.jsxs)("div",{children:[(0,r.jsxs)("h3",{className:"text-lg font-semibold text-white mb-1",children:["vs 4ベットレンジをカスタマイズ (",c,")"]}),(0,r.jsxs)("p",{className:"text-sm text-gray-300",children:["現在の",c,"スタックでの3ベッターと4ベッターの組み合わせでレンジを設定できます"]}),r.jsx("p",{className:"text-xs text-red-300 mt-1",children:"\uD83D\uDCA1 4ベットに対してFOLD/CALL/ALL IN(5bet)の頻度を設定します"}),Object.keys(R).filter(e=>e.startsWith("vs4bet_")&&(e.endsWith(`_${c}`)||"15BB"===c&&!e.includes("_10BB")&&!e.includes("_20BB")&&!e.includes("_30BB")&&!e.includes("_40BB")&&!e.includes("_50BB")&&!e.includes("_75BB"))).length>0&&(0,r.jsxs)("div",{className:"text-xs text-red-400 mt-1",children:[c,"カスタムvs4ベットレンジ設定済み: ",Object.keys(R).filter(e=>e.startsWith("vs4bet_")&&(e.endsWith(`_${c}`)||"15BB"===c&&!e.includes("_10BB")&&!e.includes("_20BB")&&!e.includes("_30BB")&&!e.includes("_40BB")&&!e.includes("_50BB")&&!e.includes("_75BB"))).length,"レンジ"]})]})}),(0,r.jsxs)("div",{className:"mt-4",children:[(0,r.jsxs)("h4",{className:"text-sm font-semibold text-white mb-3",children:[c,"スタックでの3ベッター別vs4ベットレンジ設定："]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:["UTG1","LJ","HJ","CO","BTN","SB","BB"].map(e=>{let t=(e=>{let t=getPositionIndex(e);return t<=0?[]:g.slice(0,t)})(e);return 0===t.length?null:(0,r.jsxs)("div",{className:"bg-gray-800/50 rounded-lg p-3 border border-gray-600",children:[(0,r.jsxs)("div",{className:"text-sm font-semibold text-red-400 mb-2",children:[e," (3ベッター)"]}),r.jsx("div",{className:"text-xs text-gray-300 mb-2",children:"4ベッターからの攻撃に対する対応:"}),r.jsx("div",{className:"flex flex-wrap gap-1",children:t.map(t=>{let s=`vs4bet_${e}_vs_${t}_${c}`,n="15BB"===c?`vs4bet_${e}_vs_${t}`:null,o=R[s]||n&&R[n];return(0,r.jsxs)("button",{onClick:()=>handleOpenRangeEditor(s),className:`px-2 py-1 rounded text-xs font-medium transition-all duration-200 ${o?"bg-red-600 hover:bg-red-700 text-white border-2 border-red-400":"bg-gray-600 hover:bg-gray-700 text-white border-2 border-transparent"}`,title:`${e} vs ${t}の${c}スタックvs4ベットレンジ設定`,children:[t,o&&" ✓"]},t)})})]},e)})}),(0,r.jsxs)("div",{className:"mt-4 p-3 bg-red-900/20 border border-red-600/30 rounded text-xs",children:[(0,r.jsxs)("div",{className:"text-red-400 font-semibold mb-1",children:["\uD83D\uDCA1 vs 4ベットレンジの特徴 (",c,"スタック固有)"]}),(0,r.jsxs)("div",{className:"text-gray-300",children:["• ",r.jsx("strong",{children:"スタック依存:"})," ",c,"スタック専用のレンジ設定",r.jsx("br",{}),"• ",r.jsx("strong",{children:"ポジション依存:"})," 3ベッターが前のポジション（通常オリジナルのオープンレイザー）からの4ベットに対する反応戦略",r.jsx("br",{}),"• ",r.jsx("strong",{children:"アクション選択:"})," FOLD（フォールド）、CALL（コール）、ALL IN（5ベット/オールイン）",r.jsx("br",{}),"• ",r.jsx("strong",{children:"混合戦略:"})," 右クリックで詳細な頻度設定（例：FOLD 80%, ALL IN 20%）"]})]})]})]}),(0,r.jsxs)("div",{className:`flex flex-col lg:flex-row ${W?"gap-2":"gap-4"}`,children:[r.jsx("div",{className:`w-full lg:w-3/5 ${W?"h-[500px] overflow-hidden":"h-[550px] bg-gray-800 rounded-xl overflow-hidden"}`,children:F&&r.jsx(PokerTable,{currentSpot:F,selectedAction:y,isCorrect:A,showResults:N,onActionSelect:handleActionSelect,availableActions:["FOLD","CALL","RAISE","ALL IN"],onNextSpot:handleNextSpot,onRepeatSpot:handleRepeatSpot,stackSize:c.replace("BB",""),backButtonUrl:`/trainer/mtt?${new URLSearchParams({stack:c,position:d,action:u,...f.length>0?{hands:encodeURIComponent(f.join(","))}:{}}).toString()}`})}),r.jsx("div",{className:"w-full lg:w-2/5",children:(0,r.jsxs)("div",{className:`w-full ${W?"":"bg-gray-800 rounded-xl"} ${W?"p-2":"p-4"}`,children:[!W&&r.jsx("h2",{className:"text-xl font-bold mb-4",children:N?"結果分析":"アクションを選択"}),!W&&r.jsx("div",{className:"mb-4 h-[60px]",children:N?r.jsx("div",{className:`p-3 rounded-lg text-center font-bold ${A?"bg-green-900/50 text-green-400":"bg-red-900/50 text-red-400"}`,children:A?"✓ 正解！ 最適なプレイです":"✗ 不正解 - 最適なプレイではありません"}):r.jsx("div",{className:"p-3 rounded-lg text-center text-gray-400 bg-gray-700/30",children:"GTOの観点から最適なプレイを選びましょう"})}),!W&&r.jsx("div",{className:"border-t border-gray-700 pt-4 mb-4 h-[80px] flex items-center",children:N?(0,r.jsxs)("div",{className:"flex justify-center gap-4",children:[(0,r.jsxs)("button",{onClick:handleRepeatSpot,className:"py-3 px-6 bg-gray-600 hover:bg-gray-700 text-white rounded-lg font-bold text-base flex items-center justify-center shadow-lg transition-all flex-1 whitespace-nowrap",children:[r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),r.jsx("span",{children:"繰り返す"})]}),(0,r.jsxs)("button",{onClick:handleNextSpot,className:"py-3 px-6 bg-green-600 hover:bg-green-700 text-white rounded-lg font-bold text-base flex items-center justify-center shadow-lg transition-all flex-1 whitespace-nowrap",children:[r.jsx("span",{children:"次のハンド"}),r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 ml-2",viewBox:"0 0 20 20",fill:"currentColor",children:r.jsx("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})})]})]}):(0,r.jsxs)("div",{className:"grid grid-cols-4 gap-2 w-full",children:[r.jsx("button",{className:"py-3 rounded-lg font-bold text-lg shadow-lg bg-blue-600 hover:bg-blue-700 text-white transition-all border border-gray-700",onClick:()=>handleActionSelect("FOLD"),children:"FOLD"}),r.jsx("button",{className:"py-3 rounded-lg font-bold text-lg shadow-lg bg-green-600 hover:bg-green-700 text-white transition-all border border-gray-700",onClick:()=>handleActionSelect("CALL"),children:"CALL"}),r.jsx("button",{className:"py-3 rounded-lg font-bold text-lg shadow-lg bg-red-600 hover:bg-red-700 text-white transition-all border border-gray-700",onClick:()=>handleActionSelect("RAISE"),children:"RAISE"}),80>=parseInt(c)||j&&j.frequencies&&j.frequencies["ALL IN"]>0?r.jsx("button",{className:"py-3 rounded-lg font-bold text-lg shadow-lg bg-purple-600 hover:bg-purple-700 text-white transition-all border border-gray-700",onClick:()=>handleActionSelect("ALL IN"),children:"ALL IN"}):null]})}),(0,r.jsxs)("div",{className:`${W?"pt-1":"pt-4"} ${W?"h-auto":"h-[340px] overflow-y-auto border-t border-gray-700"}`,children:[!N&&r.jsx("div",{className:"flex flex-col items-center justify-center h-full text-center text-gray-500",children:(0,r.jsxs)("div",{className:"mb-2",children:[r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-10 w-10 mx-auto mb-2 opacity-30",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,r.jsxs)("p",{className:"text-lg",children:["アクションを選択すると",r.jsx("br",{}),"GTO分析が表示されます"]})]})}),N&&j&&(0,r.jsxs)("div",{children:[j.isInvalidCombination&&(0,r.jsxs)("div",{className:"bg-red-900/20 border border-red-600 rounded-lg p-4 mb-4",children:[(0,r.jsxs)("h4",{className:"text-red-400 font-semibold mb-2 flex items-center",children:[r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"ポジション組み合わせエラー"]}),r.jsx("div",{className:"text-red-300 text-sm mb-3",children:j.effectiveStackExplanation}),r.jsx("div",{className:"text-gray-300 text-sm mb-2",children:j.stackSizeStrategy}),(0,r.jsxs)("div",{className:"text-blue-300 text-sm bg-blue-900/20 p-3 rounded border-l-4 border-blue-500",children:[r.jsx("strong",{children:"\uD83D\uDCA1 解決方法:"}),r.jsx("br",{}),j.icmConsideration]}),(0,r.jsxs)("div",{className:"text-yellow-300 text-xs mt-3 bg-yellow-900/20 p-2 rounded",children:[r.jsx("strong",{children:"ポジション順序:"})," ",j.exploitSuggestion]})]}),!j.isInvalidCombination&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[(0,r.jsxs)("div",{className:`${W?"bg-gray-700/20":"bg-gray-700/40"} p-3 rounded`,children:[r.jsx("h4",{className:"text-gray-400 text-xs mb-1",children:"最適なアクション"}),r.jsx("div",{className:"text-lg font-bold text-green-400",children:j.correctAction}),j.frequencies&&j.frequencies[j.correctAction]&&(0,r.jsxs)("div",{className:"text-xs text-green-300 mt-1",children:["推奨頻度: ",j.frequencies[j.correctAction],"%"]})]}),(0,r.jsxs)("div",{className:`${W?"bg-gray-700/20":"bg-gray-700/40"} p-3 rounded`,children:[r.jsx("h4",{className:"text-gray-400 text-xs mb-1",children:"あなたの選択"}),r.jsx("div",{className:"text-lg font-bold",children:y}),j.frequencies&&y&&void 0!==j.frequencies[y]&&(0,r.jsxs)("div",{className:`text-xs mt-1 ${j.frequencies[y]>0?"text-blue-300":"text-red-300"}`,children:["正解頻度: ",j.frequencies[y],"%",0===j.frequencies[y]&&" (推奨されません)"]})]})]}),j.frequencies&&(0,r.jsxs)("div",{className:`${W?"bg-gray-700/10":"bg-gray-700/30"} p-4 rounded mb-4`,children:[(0,r.jsxs)("h4",{className:"text-white font-semibold mb-3 text-sm",children:["ハンド ",j.normalizedHandType," の正解頻度分布",j.isCustomRange&&r.jsx("span",{className:"text-purple-400 text-xs ml-2",children:"(カスタム設定)"})]}),r.jsx("div",{className:"grid grid-cols-2 gap-2 text-sm",children:Object.entries(j.frequencies).map(([e,t])=>(0,r.jsxs)("div",{className:`flex justify-between p-2 rounded ${e===y?"bg-blue-600/30 border border-blue-500":e===j.correctAction?"bg-green-600/30 border border-green-500":"bg-gray-600/30"}`,children:[(0,r.jsxs)("span",{className:`font-medium ${e===y?"text-blue-300":e===j.correctAction?"text-green-300":"text-gray-300"}`,children:[e,e===y&&" (選択)",e===j.correctAction&&" (推奨)"]}),(0,r.jsxs)("span",{className:`font-bold ${Number(t)>0?"text-white":"text-gray-500"}`,children:[Number(t),"%"]})]},e))}),y&&void 0!==j.frequencies[y]&&(0,r.jsxs)("div",{className:"mt-3 p-3 rounded-lg border-l-4 border-blue-500 bg-blue-900/20",children:[r.jsx("h5",{className:"text-blue-300 font-semibold text-xs mb-1",children:"選択の評価"}),r.jsx("p",{className:"text-sm text-gray-300",children:j.frequencies[y]>30?`${y}は高頻度推奨アクション（${j.frequencies[y]}%）です。優秀な選択です！`:j.frequencies[y]>10?`${y}は中頻度アクション（${j.frequencies[y]}%）です。場合によっては選択可能です。`:j.frequencies[y]>0?`${y}は低頻度アクション（${j.frequencies[y]}%）です。稀に選択される戦略です。`:`${y}は推奨されないアクション（0%）です。別のアクションを検討しましょう。`})]})]}),"vsopen"===u&&j.openRaiserPosition&&(0,r.jsxs)("div",{className:`${W?"bg-gray-700/10":"bg-gray-700/30"} p-3 rounded mb-4`,children:[(0,r.jsxs)("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-400",children:"オープンレイザー:"}),r.jsx("span",{className:"font-medium",children:j.openRaiserPosition})]}),(0,r.jsxs)("div",{className:"flex justify-between text-sm mt-1",children:[r.jsx("span",{className:"text-gray-400",children:"レイズサイズ:"}),(0,r.jsxs)("span",{className:"font-medium",children:[j.openRaiseSize,"BB"]})]}),(0,r.jsxs)("div",{className:"flex justify-between text-sm mt-1",children:[r.jsx("span",{className:"text-gray-400",children:"現在のポット:"}),(0,r.jsxs)("span",{className:"font-medium",children:[F?.potSize,"BB"]})]}),(0,r.jsxs)("div",{className:"flex justify-between text-sm mt-1",children:[r.jsx("span",{className:"text-gray-400",children:"エフェクティブスタック:"}),r.jsx("span",{className:"font-medium",children:c}),r.jsx("span",{className:"text-xs text-gray-500 ml-2",children:"(ヒーローと相手の中で小さい方のスタック)"})]})]}),"30BB"===c&&j&&!j.isInvalidCombination&&(0,r.jsxs)("div",{className:"bg-blue-900/20 p-3 rounded border border-blue-600/30 mb-4",children:[r.jsx("h5",{className:"text-blue-300 font-semibold text-xs mb-2",children:"\uD83C\uDFAF 30BBベットサイズ"}),(0,r.jsxs)("div",{className:"text-xs text-gray-300 space-y-1",children:["openraise"===u&&(0,r.jsxs)("div",{className:"flex justify-between",children:[r.jsx("span",{children:"オープンレイズ:"}),r.jsx("span",{className:"font-semibold text-blue-400",children:"2.1BB"})]}),"vsopen"===u&&(0,r.jsxs)("div",{className:"flex justify-between",children:[r.jsx("span",{children:"vs オープン(2.1BB):"}),(0,r.jsxs)("span",{className:"font-semibold text-green-400",children:["ポット ",F?.potSize,"BB"]})]}),"vs3bet"===u&&j.openRaiserPosition&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[r.jsx("span",{children:"オープンレイズ:"}),r.jsx("span",{className:"font-semibold text-gray-400",children:"2.1BB"})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsxs)("span",{children:["3ベット(",j.openRaiserPosition,"):"]}),r.jsx("span",{className:"font-semibold text-orange-400",children:"SB"===j.openRaiserPosition?"7.5BB":"BB"===j.openRaiserPosition?"8.2BB":"6.3BB"})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[r.jsx("span",{children:"現在のポット:"}),(0,r.jsxs)("span",{className:"font-semibold text-blue-400",children:[F?.potSize,"BB"]})]})]})]})]}),j.exploitSuggestion&&!j.isInvalidCombination&&(0,r.jsxs)("div",{className:"bg-yellow-900/20 p-3 rounded border border-yellow-700/50",children:[r.jsx("h5",{className:"text-yellow-300 font-semibold text-xs mb-2",children:"エクスプロイト提案"}),r.jsx("p",{className:"text-xs text-gray-300",children:j.exploitSuggestion})]})]})]})]})]})})]})]})}),C&&(console.log("MTTRangeEditor描画",{showRangeEditor:C,selectedEditPosition:$,stackSize:c,initialRange:R[$]}),null),C&&(()=>{let e=$,t=parseInt(c.replace("BB","")),s=R[$];if($.includes("_")&&$.includes("BB")){let r=$.split("_");2===r.length&&(e=r[0],t=parseInt(r[1].replace("BB","")),"15BB"===r[1]&&!s&&R[r[0]]&&(s=R[r[0]],console.log("15BB互換性: 既存レンジを使用",{position:r[0],range:s})))}else if($.startsWith("vsopen_")){let r=$.split("_");if(r.length>=4&&(e=$,t=parseInt(c.replace("BB","")),"15BB"===c&&!s)){let e=r.slice(0,4),t=e.join("_");R[t]&&(s=R[t],console.log("15BB互換性: 既存vsオープンレンジを使用",{baseVsOpenKey:t,range:s}))}}else if($.startsWith("vs3bet_")){if(e=$,t=parseInt(c.replace("BB","")),"15BB"===c&&!s){let e=$.replace("_15BB","");R[e]&&(s=R[e],console.log("15BB互換性: 既存vs3ベットレンジを使用",{baseVs3BetKey:e,range:s}))}}else if($.startsWith("vs4bet_")&&(e=$,t=parseInt(c.replace("BB","")),"15BB"===c&&!s)){let e=$.replace("_15BB","");R[e]&&(s=R[e],console.log("15BB互換性: 既存vs4ベットレンジを使用",{baseVs4BetKey:e,range:s}))}return r.jsx(MTTRangeEditor,{position:e,stackSize:t,onSaveRange:handleSaveRange,onClose:()=>T(!1),initialRange:s})})(),X&&r.jsx(HandRangeSelector,{onClose:()=>{Y(!1)},onSelectHands:e=>{ee(e),console.log("選択されたトレーニングハンド:",e)},initialSelectedHands:Z}),t&&(0,r.jsxs)("div",{className:"bg-yellow-900/20 rounded-lg p-4 mb-4 border border-yellow-700/50",children:[(0,r.jsxs)("h3",{className:"text-lg font-semibold text-yellow-300 mb-2",children:["\uD83D\uDD0D レンジ読み込み状況デバッグ (",c,")"]}),(0,r.jsxs)("div",{className:"text-xs space-y-1",children:[(0,r.jsxs)("div",{children:["カスタムレンジ総数: ",Object.keys(R).length]}),(0,r.jsxs)("div",{children:["vsオープンレンジ数: ",Object.keys(R).filter(e=>e.startsWith("vsopen_")&&(e.endsWith(`_${c}`)||"15BB"===c&&!e.includes("_10BB")&&!e.includes("_20BB")&&!e.includes("_30BB")&&!e.includes("_40BB")&&!e.includes("_50BB")&&!e.includes("_75BB"))).length]}),(0,r.jsxs)("div",{children:["vs3ベットレンジ数: ",Object.keys(R).filter(e=>e.startsWith("vs3bet_")&&(e.endsWith(`_${c}`)||"15BB"===c&&e.includes("vs3bet_")&&!e.includes("_10BB")&&!e.includes("_20BB")&&!e.includes("_30BB")&&!e.includes("_40BB")&&!e.includes("_50BB")&&!e.includes("_75BB"))).length]}),(0,r.jsxs)("div",{children:["vs4ベットレンジ数: ",Object.keys(R).filter(e=>e.startsWith("vs4bet_")&&(e.endsWith(`_${c}`)||"15BB"===c&&e.includes("vs4bet_")&&!e.includes("_10BB")&&!e.includes("_20BB")&&!e.includes("_30BB")&&!e.includes("_40BB")&&!e.includes("_50BB")&&!e.includes("_75BB"))).length]}),(0,r.jsxs)("div",{children:[c,"スタック固有レンジ数: ",Object.keys(R).filter(e=>e.endsWith(`_${c}`)||!e.includes("_")&&"15BB"===c&&!e.startsWith("vsopen_")&&!e.startsWith("vs3bet_")&&!e.startsWith("vs4bet_")).length]}),Object.keys(R).filter(e=>e.startsWith("vsopen_")&&(e.endsWith(`_${c}`)||"15BB"===c&&!e.includes("_10BB")&&!e.includes("_20BB")&&!e.includes("_30BB")&&!e.includes("_40BB")&&!e.includes("_50BB")&&!e.includes("_75BB"))).length>0&&(0,r.jsxs)("div",{className:"mt-2",children:[(0,r.jsxs)("div",{className:"text-yellow-300 mb-1",children:["設定済み",c,"vsオープンレンジ:"]}),(0,r.jsxs)("div",{className:"max-h-32 overflow-y-auto",children:[Object.keys(R).filter(e=>e.startsWith("vsopen_")&&(e.endsWith(`_${c}`)||"15BB"===c&&!e.includes("_10BB")&&!e.includes("_20BB")&&!e.includes("_30BB")&&!e.includes("_40BB")&&!e.includes("_50BB")&&!e.includes("_75BB"))).slice(0,10).map(e=>(0,r.jsxs)("div",{className:"text-xs text-gray-300",children:["• ",e]},e)),Object.keys(R).filter(e=>e.startsWith("vsopen_")&&(e.endsWith(`_${c}`)||"15BB"===c&&!e.includes("_10BB")&&!e.includes("_20BB")&&!e.includes("_30BB")&&!e.includes("_40BB")&&!e.includes("_50BB")&&!e.includes("_75BB"))).length>10&&(0,r.jsxs)("div",{className:"text-xs text-gray-400",children:["...他",Object.keys(R).filter(e=>e.startsWith("vsopen_")&&(e.endsWith(`_${c}`)||"15BB"===c&&!e.includes("_10BB")&&!e.includes("_20BB")&&!e.includes("_30BB")&&!e.includes("_40BB")&&!e.includes("_50BB")&&!e.includes("_75BB"))).length-10,"レンジ"]})]})]}),Object.keys(R).filter(e=>e.startsWith("vs3bet_")&&(e.endsWith(`_${c}`)||"15BB"===c&&e.includes("vs3bet_")&&!e.includes("_10BB")&&!e.includes("_20BB")&&!e.includes("_30BB")&&!e.includes("_40BB")&&!e.includes("_50BB")&&!e.includes("_75BB"))).length>0&&(0,r.jsxs)("div",{className:"mt-2",children:[(0,r.jsxs)("div",{className:"text-yellow-300 mb-1",children:["設定済み",c,"vs3ベットレンジ:"]}),r.jsx("div",{className:"max-h-20 overflow-y-auto",children:Object.keys(R).filter(e=>e.startsWith("vs3bet_")&&(e.endsWith(`_${c}`)||"15BB"===c&&e.includes("vs3bet_")&&!e.includes("_10BB")&&!e.includes("_20BB")&&!e.includes("_30BB")&&!e.includes("_40BB")&&!e.includes("_50BB")&&!e.includes("_75BB"))).map(e=>(0,r.jsxs)("div",{className:"text-xs text-gray-300",children:["• ",e]},e))})]}),Object.keys(R).filter(e=>e.startsWith("vs4bet_")&&(e.endsWith(`_${c}`)||"15BB"===c&&e.includes("vs4bet_")&&!e.includes("_10BB")&&!e.includes("_20BB")&&!e.includes("_30BB")&&!e.includes("_40BB")&&!e.includes("_50BB")&&!e.includes("_75BB"))).length>0&&(0,r.jsxs)("div",{className:"mt-2",children:[(0,r.jsxs)("div",{className:"text-yellow-300 mb-1",children:["設定済み",c,"vs4ベットレンジ:"]}),r.jsx("div",{className:"max-h-20 overflow-y-auto",children:Object.keys(R).filter(e=>e.startsWith("vs4bet_")&&(e.endsWith(`_${c}`)||"15BB"===c&&e.includes("vs4bet_")&&!e.includes("_10BB")&&!e.includes("_20BB")&&!e.includes("_30BB")&&!e.includes("_40BB")&&!e.includes("_50BB")&&!e.includes("_75BB"))).map(e=>(0,r.jsxs)("div",{className:"text-xs text-gray-300",children:["• ",e]},e))})]}),Object.keys(R).filter(e=>e.endsWith(`_${c}`)||!e.includes("_")&&"15BB"===c&&!e.startsWith("vsopen_")&&!e.startsWith("vs3bet_")&&!e.startsWith("vs4bet_")).length>0&&(0,r.jsxs)("div",{className:"mt-2",children:[(0,r.jsxs)("div",{className:"text-yellow-300 mb-1",children:["設定済み",c,"レンジ:"]}),r.jsx("div",{className:"max-h-20 overflow-y-auto",children:Object.keys(R).filter(e=>e.endsWith(`_${c}`)||!e.includes("_")&&"15BB"===c&&!e.startsWith("vsopen_")&&!e.startsWith("vs3bet_")&&!e.startsWith("vs4bet_")).map(e=>(0,r.jsxs)("div",{className:"text-xs text-gray-300",children:["• ",e]},e))})]}),"vsopen"===u&&(0,r.jsxs)("div",{className:"mt-2 p-2 bg-blue-900/20 rounded",children:[r.jsx("div",{className:"text-blue-300",children:"現在のvsオープン設定:"}),(0,r.jsxs)("div",{children:["ポジション: ",d]}),(0,r.jsxs)("div",{children:["スタック: ",c]}),F?.openRaiserPosition&&(0,r.jsxs)("div",{children:["オープンレイザー: ",F.openRaiserPosition]}),F?.openRaiserPosition&&(0,r.jsxs)("div",{children:["レンジキー: vsopen_",d,"_vs_",F.openRaiserPosition,"_",c]})]})]})]})]}):r.jsx("div",{className:"min-h-screen bg-black md:bg-gray-900 text-white flex items-center justify-center",children:"ローディング中..."})}},8532:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>i,__esModule:()=>o,default:()=>l});var r=s(5153);let n=(0,r.createProxy)(String.raw`/Users/kensuke/Desktop/gtovantage/src/app/trainer/mtt/training/page.tsx`),{__esModule:o,$$typeof:i}=n,a=n.default,l=a}};var t=require("../../../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),s=t.X(0,[669,130,985,943],()=>__webpack_exec__(8971));module.exports=s})();